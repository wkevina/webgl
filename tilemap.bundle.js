!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=269)}({1:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContext=function(t){e.gl=n=t},e.gl=void 0;var n={};e.gl=n},10:function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},100:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Keyboard=e.MouseDrawing=e.CameraBodyTracker=e.CameraPan=void 0;var n=r(2);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}var u=["vertexadded","lineadded","drawingstart","drawingend"],f=function(){function t(e){var r=this;i(this,t),this.game=e.game,this.connected=e.connected||!0,this.endKeys=e.endKeys||["Shift"],this.endKeys.length||(this.endKeys=[this.endKeys]),this.listeners=u.reduce(function(t,e){return t[e]=[],t},{}),e.listeners&&Object.keys(e.listeners).forEach(function(t){return r.addListener(t,e.listeners[t])}),this._lineData=new Float32Array(4096),this.currentLineIdx=0,this.available=0,this.isDrawing=!1,this.game.canvas.addEventListener("mousemove",function(t){r.update(r.convertMouseCoordinates({x:t.offsetX,y:t.offsetY}))}),this.game.canvas.addEventListener("mousedown",function(t){r.isDrawing?r.endLine(r.convertMouseCoordinates({x:t.offsetX,y:t.offsetY})):r.startLine(r.convertMouseCoordinates({x:t.offsetX,y:t.offsetY}))}),window.addEventListener("keydown",function(t){r.endKeys.includes(t.key)&&r.isDrawing&&r.endDrawing(t)})}return a(t,[{key:"addListener",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"notifyListeners",value:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.listeners[t].forEach(function(t){return t.apply(void 0,r)})}},{key:"convertMouseCoordinates",value:function(t){var e=n.vec4.fromValues(t.x,t.y,0,1);return n.vec4.transformMat4(e,e,this.game.canvasToWorld),{x:e[0],y:e[1]}}},{key:"inBounds",value:function(t){return!0}},{key:"startLine",value:function(t){this.inBounds(t)&&!this.isDrawing&&(this.isDrawing=!0,this.available++,this._lineData[this.lineIndex+0]=t.x,this._lineData[this.lineIndex+1]=t.y,this.update(t),this.notifyListeners("drawingstart",{}),this.notifyListeners("vertexadded",this.currentLineStart))}},{key:"endLine",value:function(t){this.isDrawing&&(this._lineData[this.lineIndex+2]=t.x,this._lineData[this.lineIndex+3]=t.y,this.notifyListeners("lineadded",this.currentLine),this.notifyListeners("vertexadded",this.currentLineEnd),this.currentLineIdx++,this.connected?(this.available++,this._lineData[this.lineIndex+0]=t.x,this._lineData[this.lineIndex+1]=t.y,this.update(t)):this.isDrawing=!1)}},{key:"endDrawing",value:function(t){this.isDrawing=!1,this.notifyListeners("drawingend",t)}},{key:"update",value:function(t){this.isDrawing&&(this._lineData[this.lineIndex+2]=t.x,this._lineData[this.lineIndex+3]=t.y)}},{key:"clear",value:function(){this.available=0,this.currentLineIdx=0,this._lineData.fill(0)}},{key:"lineIndex",get:function(){return 4*this.currentLineIdx}},{key:"lineData",get:function(){return this._lineData.slice(0,4*this.available)}},{key:"currentLine",get:function(){return{start:this.currentLineStart,end:this.currentLineEnd}}},{key:"currentLineStart",get:function(){return{x:this._lineData[this.lineIndex],y:this._lineData[this.lineIndex+1]}}},{key:"currentLineEnd",get:function(){return{x:this._lineData[this.lineIndex+2],y:this._lineData[this.lineIndex+3]}}}]),t}();e.MouseDrawing=f;var c=function(){function t(e){i(this,t),this.keys=new Map,document.addEventListener("keydown",this.keydown.bind(this)),document.addEventListener("keyup",this.keyup.bind(this))}return a(t,[{key:"keydown",value:function(t){this.keys.set(t.key,!0),t.key.startsWith("Arrow")&&t.preventDefault()}},{key:"keyup",value:function(t){this.keys.delete(t.key)}},{key:"isdown",value:function(t){return this.keys.get(t)}}]),t}();e.Keyboard=c;e.CameraPan=function t(e){var r=this;i(this,t),this.pandir=[0,0],this.speed=200,this.keyboard=new c;var n=null;this.loopId=requestAnimationFrame(function t(i){n||(n=i);var o=(i-n)/1e3;n=i,r.pandir=[r.keyboard.isdown("ArrowLeft")?-1:r.keyboard.isdown("ArrowRight")?1:0,r.keyboard.isdown("ArrowDown")?-1:r.keyboard.isdown("ArrowUp")?1:0],r.keyboard.isdown("+")?r.speed+=10:r.keyboard.isdown("-")&&(r.speed-=10,r.speed=Math.max(200,r.speed)),0===r.pandir[0]&&0===r.pandir[1]||e.camera.translate(r.speed*o*r.pandir[0],r.speed*o*r.pandir[1]),r.loopId=requestAnimationFrame(t)})};var s=function(){function t(e,r){i(this,t),this.body=r,this.game=e,this.loopId=null}return a(t,[{key:"start",value:function(){this.loopId||(this.loopId=requestAnimationFrame(this.loop.bind(this)))}},{key:"stop",value:function(){cancelAnimationFrame(this.loopId),this.loopId=null}},{key:"loop",value:function(){this.body&&this.game.camera.centerAt(this.body.position.x,this.body.position.y),this.loopId=requestAnimationFrame(this.loop.bind(this))}}]),t}();e.CameraBodyTracker=s},15:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arraySetter=function(t){var e=0;return function(r){if(!r.length&&e+(r=[r]).length>t.length)throw new Error("attempting to append beyond buffer length");t.set(r,e),e+=r.length}},e.hsl2rgb=function(t,e,r){var n,i,o,a,u,f;isFinite(t)||(t=0);isFinite(e)||(e=0);isFinite(r)||(r=0);(t/=60)<0&&(t=6- -t%6);t%=6,e=Math.max(0,Math.min(1,e/100)),r=Math.max(0,Math.min(1,r/100)),u=(1-Math.abs(2*r-1))*e,f=u*(1-Math.abs(t%2-1)),t<1?(n=u,i=f,o=0):t<2?(n=f,i=u,o=0):t<3?(n=0,i=u,o=f):t<4?(n=0,i=f,o=u):t<5?(n=f,i=0,o=u):(n=u,i=0,o=f);return a=r-u/2,n=Math.round(255*(n+a)),i=Math.round(255*(i+a)),o=Math.round(255*(o+a)),[n,i,o]},e.attachFramebuffer=function(t,e,r){var n=t.createFramebuffer(),i=t.createTexture();return t.bindTexture(t.TEXTURE_2D,i),t.texStorage2D(t.TEXTURE_2D,1,t.RGBA8,e,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null),{width:e,height:r,attach:function(){t.viewport(0,0,e,r),t.bindFramebuffer(t.FRAMEBUFFER,n)},detach:function(){t.bindFramebuffer(t.FRAMEBUFFER,null)},texture:i,framebuffer:n}},e.loadImage=function(t){return new Promise(function(e,r){var n=new Image;function i(){n.removeEventListener("load",null),n.removeEventListener("error",null)}n.addEventListener("load",function(){i(),e(n)}),n.addEventListener("error",function(t){i(),r(t)}),n.src=t})}},17:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=void 0;e.Sprite=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=e.position||[0,0],this.size=e.size,this.angle=0,this.offset=e.offset||[0,0],this.backgroundColor=e.backgroundColor||[0,0,0,0],this.textureName=e.textureName||null}},18:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteRenderer=void 0;var n=a(r(5)),i=a(r(34)),o=a(r(33));function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var f=new Float32Array([0,0,1,0,0,1,1,1]),c=function(){function t(e){var r=e.game,n=e.textureInfo;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=r.gl,this.loader=r.loader,this.game=r,this.textureInfo=n,this.setup()}return function(t,e,r){e&&u(t.prototype,e),r&&u(t,r)}(t,[{key:"setup",value:function(){this.programInfo=n.default.createProgramInfo(this.gl,[i.default,o.default]),this._arrays={vertex:{data:f,numComponents:2,divisor:0,drawType:this.gl.STATIC_DRAW},position:{numComponents:2,divisor:1,drawType:this.gl.DYNAMIC_DRAW},offset:{numComponents:2,divisor:1,drawType:this.gl.DYNAMIC_DRAW},size:{numComponents:2,divisor:1,drawType:this.gl.DYNAMIC_DRAW},texcoord:{data:[0,0,1,0,0,1,1,1],numComponents:2,divisor:0,type:Int16Array},indices:{data:[0,1,2,3]}},this.bufferInfo=n.default.createBufferInfoFromArrays(this.gl,this._arrays),this.vao=n.default.createVertexArrayInfo(this.gl,this.programInfo,this.bufferInfo)}},{key:"render",value:function(t,e){var r=new Float32Array(2*t.length),i=new Float32Array(2*t.length),o=new Float32Array(2*t.length);t.forEach(function(t,e){t.position.forEach(function(t,n){r[2*e+n]=t}),t.size.forEach(function(t,r){i[2*e+r]=t}),t.offset.forEach(function(t,r){o[2*e+r]=t})}),n.default.setAttribInfoBufferFromArray(this.gl,this.bufferInfo.attribs.position,r),n.default.setAttribInfoBufferFromArray(this.gl,this.bufferInfo.attribs.size,i),n.default.setAttribInfoBufferFromArray(this.gl,this.bufferInfo.attribs.offset,o),this.gl.useProgram(this.programInfo.program),n.default.setUniforms(this.programInfo,{projection:e,texture:this.textureInfo.texture}),n.default.setBuffersAndAttributes(this.gl,this.programInfo,this.vao),n.default.drawBufferInfo(this.gl,this.vao,this.gl.TRIANGLE_STRIP,void 0,void 0,t.length)}}]),t}();e.SpriteRenderer=c},2:function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"EPSILON",function(){return h}),r.d(n,"ARRAY_TYPE",function(){return p}),r.d(n,"RANDOM",function(){return m}),r.d(n,"setMatrixArrayType",function(){return v}),r.d(n,"toRadian",function(){return y}),r.d(n,"equals",function(){return g});var i={};r.r(i),r.d(i,"create",function(){return x}),r.d(i,"clone",function(){return E}),r.d(i,"copy",function(){return _}),r.d(i,"identity",function(){return M}),r.d(i,"fromValues",function(){return A}),r.d(i,"set",function(){return T}),r.d(i,"transpose",function(){return w}),r.d(i,"invert",function(){return R}),r.d(i,"adjoint",function(){return F}),r.d(i,"determinant",function(){return P}),r.d(i,"multiply",function(){return I}),r.d(i,"rotate",function(){return S}),r.d(i,"scale",function(){return O}),r.d(i,"fromRotation",function(){return B}),r.d(i,"fromScaling",function(){return C}),r.d(i,"str",function(){return U}),r.d(i,"frob",function(){return D}),r.d(i,"LDU",function(){return L}),r.d(i,"add",function(){return k}),r.d(i,"subtract",function(){return j}),r.d(i,"exactEquals",function(){return N}),r.d(i,"equals",function(){return G}),r.d(i,"multiplyScalar",function(){return W}),r.d(i,"multiplyScalarAndAdd",function(){return z}),r.d(i,"mul",function(){return X}),r.d(i,"sub",function(){return q});var o={};r.r(o),r.d(o,"create",function(){return Y}),r.d(o,"clone",function(){return K}),r.d(o,"copy",function(){return V}),r.d(o,"identity",function(){return H}),r.d(o,"fromValues",function(){return Q}),r.d(o,"set",function(){return Z}),r.d(o,"invert",function(){return $}),r.d(o,"determinant",function(){return J}),r.d(o,"multiply",function(){return tt}),r.d(o,"rotate",function(){return et}),r.d(o,"scale",function(){return rt}),r.d(o,"translate",function(){return nt}),r.d(o,"fromRotation",function(){return it}),r.d(o,"fromScaling",function(){return ot}),r.d(o,"fromTranslation",function(){return at}),r.d(o,"str",function(){return ut}),r.d(o,"frob",function(){return ft}),r.d(o,"add",function(){return ct}),r.d(o,"subtract",function(){return st}),r.d(o,"multiplyScalar",function(){return lt}),r.d(o,"multiplyScalarAndAdd",function(){return dt}),r.d(o,"exactEquals",function(){return ht}),r.d(o,"equals",function(){return pt}),r.d(o,"mul",function(){return mt}),r.d(o,"sub",function(){return vt});var a={};r.r(a),r.d(a,"create",function(){return bt}),r.d(a,"fromMat4",function(){return yt}),r.d(a,"clone",function(){return gt}),r.d(a,"copy",function(){return xt}),r.d(a,"fromValues",function(){return Et}),r.d(a,"set",function(){return _t}),r.d(a,"identity",function(){return Mt}),r.d(a,"transpose",function(){return At}),r.d(a,"invert",function(){return Tt}),r.d(a,"adjoint",function(){return wt}),r.d(a,"determinant",function(){return Rt}),r.d(a,"multiply",function(){return Ft}),r.d(a,"translate",function(){return Pt}),r.d(a,"rotate",function(){return It}),r.d(a,"scale",function(){return St}),r.d(a,"fromTranslation",function(){return Ot}),r.d(a,"fromRotation",function(){return Bt}),r.d(a,"fromScaling",function(){return Ct}),r.d(a,"fromMat2d",function(){return Ut}),r.d(a,"fromQuat",function(){return Dt}),r.d(a,"normalFromMat4",function(){return Lt}),r.d(a,"projection",function(){return kt}),r.d(a,"str",function(){return jt}),r.d(a,"frob",function(){return Nt}),r.d(a,"add",function(){return Gt}),r.d(a,"subtract",function(){return Wt}),r.d(a,"multiplyScalar",function(){return zt}),r.d(a,"multiplyScalarAndAdd",function(){return Xt}),r.d(a,"exactEquals",function(){return qt}),r.d(a,"equals",function(){return Yt}),r.d(a,"mul",function(){return Kt}),r.d(a,"sub",function(){return Vt});var u={};r.r(u),r.d(u,"create",function(){return Ht}),r.d(u,"clone",function(){return Qt}),r.d(u,"copy",function(){return Zt}),r.d(u,"fromValues",function(){return $t}),r.d(u,"set",function(){return Jt}),r.d(u,"identity",function(){return te}),r.d(u,"transpose",function(){return ee}),r.d(u,"invert",function(){return re}),r.d(u,"adjoint",function(){return ne}),r.d(u,"determinant",function(){return ie}),r.d(u,"multiply",function(){return oe}),r.d(u,"translate",function(){return ae}),r.d(u,"scale",function(){return ue}),r.d(u,"rotate",function(){return fe}),r.d(u,"rotateX",function(){return ce}),r.d(u,"rotateY",function(){return se}),r.d(u,"rotateZ",function(){return le}),r.d(u,"fromTranslation",function(){return de}),r.d(u,"fromScaling",function(){return he}),r.d(u,"fromRotation",function(){return pe}),r.d(u,"fromXRotation",function(){return me}),r.d(u,"fromYRotation",function(){return ve}),r.d(u,"fromZRotation",function(){return be}),r.d(u,"fromRotationTranslation",function(){return ye}),r.d(u,"fromQuat2",function(){return ge}),r.d(u,"getTranslation",function(){return xe}),r.d(u,"getScaling",function(){return Ee}),r.d(u,"getRotation",function(){return _e}),r.d(u,"fromRotationTranslationScale",function(){return Me}),r.d(u,"fromRotationTranslationScaleOrigin",function(){return Ae}),r.d(u,"fromQuat",function(){return Te}),r.d(u,"frustum",function(){return we}),r.d(u,"perspective",function(){return Re}),r.d(u,"perspectiveFromFieldOfView",function(){return Fe}),r.d(u,"ortho",function(){return Pe}),r.d(u,"lookAt",function(){return Ie}),r.d(u,"targetTo",function(){return Se}),r.d(u,"str",function(){return Oe}),r.d(u,"frob",function(){return Be}),r.d(u,"add",function(){return Ce}),r.d(u,"subtract",function(){return Ue}),r.d(u,"multiplyScalar",function(){return De}),r.d(u,"multiplyScalarAndAdd",function(){return Le}),r.d(u,"exactEquals",function(){return ke}),r.d(u,"equals",function(){return je}),r.d(u,"mul",function(){return Ne}),r.d(u,"sub",function(){return Ge});var f={};r.r(f),r.d(f,"create",function(){return We}),r.d(f,"clone",function(){return ze}),r.d(f,"length",function(){return Xe}),r.d(f,"fromValues",function(){return qe}),r.d(f,"copy",function(){return Ye}),r.d(f,"set",function(){return Ke}),r.d(f,"add",function(){return Ve}),r.d(f,"subtract",function(){return He}),r.d(f,"multiply",function(){return Qe}),r.d(f,"divide",function(){return Ze}),r.d(f,"ceil",function(){return $e}),r.d(f,"floor",function(){return Je}),r.d(f,"min",function(){return tr}),r.d(f,"max",function(){return er}),r.d(f,"round",function(){return rr}),r.d(f,"scale",function(){return nr}),r.d(f,"scaleAndAdd",function(){return ir}),r.d(f,"distance",function(){return or}),r.d(f,"squaredDistance",function(){return ar}),r.d(f,"squaredLength",function(){return ur}),r.d(f,"negate",function(){return fr}),r.d(f,"inverse",function(){return cr}),r.d(f,"normalize",function(){return sr}),r.d(f,"dot",function(){return lr}),r.d(f,"cross",function(){return dr}),r.d(f,"lerp",function(){return hr}),r.d(f,"hermite",function(){return pr}),r.d(f,"bezier",function(){return mr}),r.d(f,"random",function(){return vr}),r.d(f,"transformMat4",function(){return br}),r.d(f,"transformMat3",function(){return yr}),r.d(f,"transformQuat",function(){return gr}),r.d(f,"rotateX",function(){return xr}),r.d(f,"rotateY",function(){return Er}),r.d(f,"rotateZ",function(){return _r}),r.d(f,"angle",function(){return Mr}),r.d(f,"str",function(){return Ar}),r.d(f,"exactEquals",function(){return Tr}),r.d(f,"equals",function(){return wr}),r.d(f,"sub",function(){return Rr}),r.d(f,"mul",function(){return Fr}),r.d(f,"div",function(){return Pr}),r.d(f,"dist",function(){return Ir}),r.d(f,"sqrDist",function(){return Sr}),r.d(f,"len",function(){return Or}),r.d(f,"sqrLen",function(){return Br}),r.d(f,"forEach",function(){return Cr});var c={};r.r(c),r.d(c,"create",function(){return Ur}),r.d(c,"clone",function(){return Dr}),r.d(c,"fromValues",function(){return Lr}),r.d(c,"copy",function(){return kr}),r.d(c,"set",function(){return jr}),r.d(c,"add",function(){return Nr}),r.d(c,"subtract",function(){return Gr}),r.d(c,"multiply",function(){return Wr}),r.d(c,"divide",function(){return zr}),r.d(c,"ceil",function(){return Xr}),r.d(c,"floor",function(){return qr}),r.d(c,"min",function(){return Yr}),r.d(c,"max",function(){return Kr}),r.d(c,"round",function(){return Vr}),r.d(c,"scale",function(){return Hr}),r.d(c,"scaleAndAdd",function(){return Qr}),r.d(c,"distance",function(){return Zr}),r.d(c,"squaredDistance",function(){return $r}),r.d(c,"length",function(){return Jr}),r.d(c,"squaredLength",function(){return tn}),r.d(c,"negate",function(){return en}),r.d(c,"inverse",function(){return rn}),r.d(c,"normalize",function(){return nn}),r.d(c,"dot",function(){return on}),r.d(c,"lerp",function(){return an}),r.d(c,"random",function(){return un}),r.d(c,"transformMat4",function(){return fn}),r.d(c,"transformQuat",function(){return cn}),r.d(c,"str",function(){return sn}),r.d(c,"exactEquals",function(){return ln}),r.d(c,"equals",function(){return dn}),r.d(c,"sub",function(){return hn}),r.d(c,"mul",function(){return pn}),r.d(c,"div",function(){return mn}),r.d(c,"dist",function(){return vn}),r.d(c,"sqrDist",function(){return bn}),r.d(c,"len",function(){return yn}),r.d(c,"sqrLen",function(){return gn}),r.d(c,"forEach",function(){return xn});var s={};r.r(s),r.d(s,"create",function(){return En}),r.d(s,"identity",function(){return _n}),r.d(s,"setAxisAngle",function(){return Mn}),r.d(s,"getAxisAngle",function(){return An}),r.d(s,"multiply",function(){return Tn}),r.d(s,"rotateX",function(){return wn}),r.d(s,"rotateY",function(){return Rn}),r.d(s,"rotateZ",function(){return Fn}),r.d(s,"calculateW",function(){return Pn}),r.d(s,"slerp",function(){return In}),r.d(s,"invert",function(){return Sn}),r.d(s,"conjugate",function(){return On}),r.d(s,"fromMat3",function(){return Bn}),r.d(s,"fromEuler",function(){return Cn}),r.d(s,"str",function(){return Un}),r.d(s,"clone",function(){return Dn}),r.d(s,"fromValues",function(){return Ln}),r.d(s,"copy",function(){return kn}),r.d(s,"set",function(){return jn}),r.d(s,"add",function(){return Nn}),r.d(s,"mul",function(){return Gn}),r.d(s,"scale",function(){return Wn}),r.d(s,"dot",function(){return zn}),r.d(s,"lerp",function(){return Xn}),r.d(s,"length",function(){return qn}),r.d(s,"len",function(){return Yn}),r.d(s,"squaredLength",function(){return Kn}),r.d(s,"sqrLen",function(){return Vn}),r.d(s,"normalize",function(){return Hn}),r.d(s,"exactEquals",function(){return Qn}),r.d(s,"equals",function(){return Zn}),r.d(s,"rotationTo",function(){return $n}),r.d(s,"sqlerp",function(){return Jn}),r.d(s,"setAxes",function(){return ti});var l={};r.r(l),r.d(l,"create",function(){return ei}),r.d(l,"clone",function(){return ri}),r.d(l,"fromValues",function(){return ni}),r.d(l,"fromRotationTranslationValues",function(){return ii}),r.d(l,"fromRotationTranslation",function(){return oi}),r.d(l,"fromTranslation",function(){return ai}),r.d(l,"fromRotation",function(){return ui}),r.d(l,"fromMat4",function(){return fi}),r.d(l,"copy",function(){return ci}),r.d(l,"identity",function(){return si}),r.d(l,"set",function(){return li}),r.d(l,"getReal",function(){return di}),r.d(l,"getDual",function(){return hi}),r.d(l,"setReal",function(){return pi}),r.d(l,"setDual",function(){return mi}),r.d(l,"getTranslation",function(){return vi}),r.d(l,"translate",function(){return bi}),r.d(l,"rotateX",function(){return yi}),r.d(l,"rotateY",function(){return gi}),r.d(l,"rotateZ",function(){return xi}),r.d(l,"rotateByQuatAppend",function(){return Ei}),r.d(l,"rotateByQuatPrepend",function(){return _i}),r.d(l,"rotateAroundAxis",function(){return Mi}),r.d(l,"add",function(){return Ai}),r.d(l,"multiply",function(){return Ti}),r.d(l,"mul",function(){return wi}),r.d(l,"scale",function(){return Ri}),r.d(l,"dot",function(){return Fi}),r.d(l,"lerp",function(){return Pi}),r.d(l,"invert",function(){return Ii}),r.d(l,"conjugate",function(){return Si}),r.d(l,"length",function(){return Oi}),r.d(l,"len",function(){return Bi}),r.d(l,"squaredLength",function(){return Ci}),r.d(l,"sqrLen",function(){return Ui}),r.d(l,"normalize",function(){return Di}),r.d(l,"str",function(){return Li}),r.d(l,"exactEquals",function(){return ki}),r.d(l,"equals",function(){return ji});var d={};r.r(d),r.d(d,"create",function(){return Ni}),r.d(d,"clone",function(){return Gi}),r.d(d,"fromValues",function(){return Wi}),r.d(d,"copy",function(){return zi}),r.d(d,"set",function(){return Xi}),r.d(d,"add",function(){return qi}),r.d(d,"subtract",function(){return Yi}),r.d(d,"multiply",function(){return Ki}),r.d(d,"divide",function(){return Vi}),r.d(d,"ceil",function(){return Hi}),r.d(d,"floor",function(){return Qi}),r.d(d,"min",function(){return Zi}),r.d(d,"max",function(){return $i}),r.d(d,"round",function(){return Ji}),r.d(d,"scale",function(){return to}),r.d(d,"scaleAndAdd",function(){return eo}),r.d(d,"distance",function(){return ro}),r.d(d,"squaredDistance",function(){return no}),r.d(d,"length",function(){return io}),r.d(d,"squaredLength",function(){return oo}),r.d(d,"negate",function(){return ao}),r.d(d,"inverse",function(){return uo}),r.d(d,"normalize",function(){return fo}),r.d(d,"dot",function(){return co}),r.d(d,"cross",function(){return so}),r.d(d,"lerp",function(){return lo}),r.d(d,"random",function(){return ho}),r.d(d,"transformMat2",function(){return po}),r.d(d,"transformMat2d",function(){return mo}),r.d(d,"transformMat3",function(){return vo}),r.d(d,"transformMat4",function(){return bo}),r.d(d,"rotate",function(){return yo}),r.d(d,"angle",function(){return go}),r.d(d,"str",function(){return xo}),r.d(d,"exactEquals",function(){return Eo}),r.d(d,"equals",function(){return _o}),r.d(d,"len",function(){return Mo}),r.d(d,"sub",function(){return Ao}),r.d(d,"mul",function(){return To}),r.d(d,"div",function(){return wo}),r.d(d,"dist",function(){return Ro}),r.d(d,"sqrDist",function(){return Fo}),r.d(d,"sqrLen",function(){return Po}),r.d(d,"forEach",function(){return Io});const h=1e-6;let p="undefined"!=typeof Float32Array?Float32Array:Array;const m=Math.random;function v(t){p=t}const b=Math.PI/180;function y(t){return t*b}function g(t,e){return Math.abs(t-e)<=h*Math.max(1,Math.abs(t),Math.abs(e))}function x(){let t=new p(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function E(t){let e=new p(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function _(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function M(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function A(t,e,r,n){let i=new p(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function T(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function w(t,e){if(t===e){let r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function R(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=r*o-i*n;return a?(a=1/a,t[0]=o*a,t[1]=-n*a,t[2]=-i*a,t[3]=r*a,t):null}function F(t,e){let r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function P(t){return t[0]*t[3]-t[2]*t[1]}function I(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=r[0],f=r[1],c=r[2],s=r[3];return t[0]=n*u+o*f,t[1]=i*u+a*f,t[2]=n*c+o*s,t[3]=i*c+a*s,t}function S(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(r),f=Math.cos(r);return t[0]=n*f+o*u,t[1]=i*f+a*u,t[2]=n*-u+o*f,t[3]=i*-u+a*f,t}function O(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=r[0],f=r[1];return t[0]=n*u,t[1]=i*u,t[2]=o*f,t[3]=a*f,t}function B(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function C(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function U(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function D(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function L(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function k(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function j(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function N(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function G(t,e){let r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],u=e[1],f=e[2],c=e[3];return Math.abs(r-a)<=h*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-u)<=h*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-f)<=h*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-c)<=h*Math.max(1,Math.abs(o),Math.abs(c))}function W(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function z(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}const X=I,q=j;function Y(){let t=new p(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function K(t){let e=new p(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function V(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function H(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Q(t,e,r,n,i,o){let a=new p(6);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a[4]=i,a[5]=o,a}function Z(t,e,r,n,i,o,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t}function $(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],f=r*o-n*i;return f?(f=1/f,t[0]=o*f,t[1]=-n*f,t[2]=-i*f,t[3]=r*f,t[4]=(i*u-o*a)*f,t[5]=(n*a-r*u)*f,t):null}function J(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],f=e[5],c=r[0],s=r[1],l=r[2],d=r[3],h=r[4],p=r[5];return t[0]=n*c+o*s,t[1]=i*c+a*s,t[2]=n*l+o*d,t[3]=i*l+a*d,t[4]=n*h+o*p+u,t[5]=i*h+a*p+f,t}function et(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],f=e[5],c=Math.sin(r),s=Math.cos(r);return t[0]=n*s+o*c,t[1]=i*s+a*c,t[2]=n*-c+o*s,t[3]=i*-c+a*s,t[4]=u,t[5]=f,t}function rt(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],f=e[5],c=r[0],s=r[1];return t[0]=n*c,t[1]=i*c,t[2]=o*s,t[3]=a*s,t[4]=u,t[5]=f,t}function nt(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],f=e[5],c=r[0],s=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=n*c+o*s+u,t[5]=i*c+a*s+f,t}function it(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function ot(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function at(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function ut(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ft(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function ct(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function st(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function lt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function dt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function ht(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function pt(t,e){let r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],f=e[0],c=e[1],s=e[2],l=e[3],d=e[4],p=e[5];return Math.abs(r-f)<=h*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-c)<=h*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-s)<=h*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-l)<=h*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-d)<=h*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(u-p)<=h*Math.max(1,Math.abs(u),Math.abs(p))}const mt=tt,vt=st;function bt(){let t=new p(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function yt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function gt(t){let e=new p(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function xt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Et(t,e,r,n,i,o,a,u,f){let c=new p(9);return c[0]=t,c[1]=e,c[2]=r,c[3]=n,c[4]=i,c[5]=o,c[6]=a,c[7]=u,c[8]=f,c}function _t(t,e,r,n,i,o,a,u,f,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t[6]=u,t[7]=f,t[8]=c,t}function Mt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function At(t,e){if(t===e){let r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Tt(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],f=e[6],c=e[7],s=e[8],l=s*a-u*c,d=-s*o+u*f,h=c*o-a*f,p=r*l+n*d+i*h;return p?(p=1/p,t[0]=l*p,t[1]=(-s*n+i*c)*p,t[2]=(u*n-i*a)*p,t[3]=d*p,t[4]=(s*r-i*f)*p,t[5]=(-u*r+i*o)*p,t[6]=h*p,t[7]=(-c*r+n*f)*p,t[8]=(a*r-n*o)*p,t):null}function wt(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],f=e[6],c=e[7],s=e[8];return t[0]=a*s-u*c,t[1]=i*c-n*s,t[2]=n*u-i*a,t[3]=u*f-o*s,t[4]=r*s-i*f,t[5]=i*o-r*u,t[6]=o*c-a*f,t[7]=n*f-r*c,t[8]=r*a-n*o,t}function Rt(t){let e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],u=t[6],f=t[7],c=t[8];return e*(c*o-a*f)+r*(-c*i+a*u)+n*(f*i-o*u)}function Ft(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=e[8],d=r[0],h=r[1],p=r[2],m=r[3],v=r[4],b=r[5],y=r[6],g=r[7],x=r[8];return t[0]=d*n+h*a+p*c,t[1]=d*i+h*u+p*s,t[2]=d*o+h*f+p*l,t[3]=m*n+v*a+b*c,t[4]=m*i+v*u+b*s,t[5]=m*o+v*f+b*l,t[6]=y*n+g*a+x*c,t[7]=y*i+g*u+x*s,t[8]=y*o+g*f+x*l,t}function Pt(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=e[8],d=r[0],h=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=u,t[5]=f,t[6]=d*n+h*a+c,t[7]=d*i+h*u+s,t[8]=d*o+h*f+l,t}function It(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=e[8],d=Math.sin(r),h=Math.cos(r);return t[0]=h*n+d*a,t[1]=h*i+d*u,t[2]=h*o+d*f,t[3]=h*a-d*n,t[4]=h*u-d*i,t[5]=h*f-d*o,t[6]=c,t[7]=s,t[8]=l,t}function St(t,e,r){let n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ot(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Bt(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ct(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ut(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Dt(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,u=n+n,f=i+i,c=r*a,s=n*a,l=n*u,d=i*a,h=i*u,p=i*f,m=o*a,v=o*u,b=o*f;return t[0]=1-l-p,t[3]=s-b,t[6]=d+v,t[1]=s+b,t[4]=1-c-p,t[7]=h-m,t[2]=d-v,t[5]=h+m,t[8]=1-c-l,t}function Lt(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],f=e[6],c=e[7],s=e[8],l=e[9],d=e[10],h=e[11],p=e[12],m=e[13],v=e[14],b=e[15],y=r*u-n*a,g=r*f-i*a,x=r*c-o*a,E=n*f-i*u,_=n*c-o*u,M=i*c-o*f,A=s*m-l*p,T=s*v-d*p,w=s*b-h*p,R=l*v-d*m,F=l*b-h*m,P=d*b-h*v,I=y*P-g*F+x*R+E*w-_*T+M*A;return I?(I=1/I,t[0]=(u*P-f*F+c*R)*I,t[1]=(f*w-a*P-c*T)*I,t[2]=(a*F-u*w+c*A)*I,t[3]=(i*F-n*P-o*R)*I,t[4]=(r*P-i*w+o*T)*I,t[5]=(n*w-r*F-o*A)*I,t[6]=(m*M-v*_+b*E)*I,t[7]=(v*x-p*M-b*g)*I,t[8]=(p*_-m*x+b*y)*I,t):null}function kt(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function jt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Nt(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function Gt(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function Wt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function zt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function Xt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function qt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Yt(t,e){let r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],f=t[6],c=t[7],s=t[8],l=e[0],d=e[1],p=e[2],m=e[3],v=e[4],b=e[5],y=e[6],g=e[7],x=e[8];return Math.abs(r-l)<=h*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-d)<=h*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-p)<=h*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-m)<=h*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-v)<=h*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-b)<=h*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(f-y)<=h*Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(c-g)<=h*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(s-x)<=h*Math.max(1,Math.abs(s),Math.abs(x))}const Kt=Ft,Vt=Wt;function Ht(){let t=new p(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Qt(t){let e=new p(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Zt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $t(t,e,r,n,i,o,a,u,f,c,s,l,d,h,m,v){let b=new p(16);return b[0]=t,b[1]=e,b[2]=r,b[3]=n,b[4]=i,b[5]=o,b[6]=a,b[7]=u,b[8]=f,b[9]=c,b[10]=s,b[11]=l,b[12]=d,b[13]=h,b[14]=m,b[15]=v,b}function Jt(t,e,r,n,i,o,a,u,f,c,s,l,d,h,p,m,v){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t[6]=u,t[7]=f,t[8]=c,t[9]=s,t[10]=l,t[11]=d,t[12]=h,t[13]=p,t[14]=m,t[15]=v,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){let r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function re(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],f=e[6],c=e[7],s=e[8],l=e[9],d=e[10],h=e[11],p=e[12],m=e[13],v=e[14],b=e[15],y=r*u-n*a,g=r*f-i*a,x=r*c-o*a,E=n*f-i*u,_=n*c-o*u,M=i*c-o*f,A=s*m-l*p,T=s*v-d*p,w=s*b-h*p,R=l*v-d*m,F=l*b-h*m,P=d*b-h*v,I=y*P-g*F+x*R+E*w-_*T+M*A;return I?(I=1/I,t[0]=(u*P-f*F+c*R)*I,t[1]=(i*F-n*P-o*R)*I,t[2]=(m*M-v*_+b*E)*I,t[3]=(d*_-l*M-h*E)*I,t[4]=(f*w-a*P-c*T)*I,t[5]=(r*P-i*w+o*T)*I,t[6]=(v*x-p*M-b*g)*I,t[7]=(s*M-d*x+h*g)*I,t[8]=(a*F-u*w+c*A)*I,t[9]=(n*w-r*F-o*A)*I,t[10]=(p*_-m*x+b*y)*I,t[11]=(l*x-s*_-h*y)*I,t[12]=(u*T-a*R-f*A)*I,t[13]=(r*R-n*T+i*A)*I,t[14]=(m*g-p*E-v*y)*I,t[15]=(s*E-l*g+d*y)*I,t):null}function ne(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],f=e[6],c=e[7],s=e[8],l=e[9],d=e[10],h=e[11],p=e[12],m=e[13],v=e[14],b=e[15];return t[0]=u*(d*b-h*v)-l*(f*b-c*v)+m*(f*h-c*d),t[1]=-(n*(d*b-h*v)-l*(i*b-o*v)+m*(i*h-o*d)),t[2]=n*(f*b-c*v)-u*(i*b-o*v)+m*(i*c-o*f),t[3]=-(n*(f*h-c*d)-u*(i*h-o*d)+l*(i*c-o*f)),t[4]=-(a*(d*b-h*v)-s*(f*b-c*v)+p*(f*h-c*d)),t[5]=r*(d*b-h*v)-s*(i*b-o*v)+p*(i*h-o*d),t[6]=-(r*(f*b-c*v)-a*(i*b-o*v)+p*(i*c-o*f)),t[7]=r*(f*h-c*d)-a*(i*h-o*d)+s*(i*c-o*f),t[8]=a*(l*b-h*m)-s*(u*b-c*m)+p*(u*h-c*l),t[9]=-(r*(l*b-h*m)-s*(n*b-o*m)+p*(n*h-o*l)),t[10]=r*(u*b-c*m)-a*(n*b-o*m)+p*(n*c-o*u),t[11]=-(r*(u*h-c*l)-a*(n*h-o*l)+s*(n*c-o*u)),t[12]=-(a*(l*v-d*m)-s*(u*v-f*m)+p*(u*d-f*l)),t[13]=r*(l*v-d*m)-s*(n*v-i*m)+p*(n*d-i*l),t[14]=-(r*(u*v-f*m)-a*(n*v-i*m)+p*(n*f-i*u)),t[15]=r*(u*d-f*l)-a*(n*d-i*l)+s*(n*f-i*u),t}function ie(t){let e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],u=t[6],f=t[7],c=t[8],s=t[9],l=t[10],d=t[11],h=t[12],p=t[13],m=t[14],v=t[15];return(e*a-r*o)*(l*v-d*m)-(e*u-n*o)*(s*v-d*p)+(e*f-i*o)*(s*m-l*p)+(r*u-n*a)*(c*v-d*h)-(r*f-i*a)*(c*m-l*h)+(n*f-i*u)*(c*p-s*h)}function oe(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=e[8],d=e[9],h=e[10],p=e[11],m=e[12],v=e[13],b=e[14],y=e[15],g=r[0],x=r[1],E=r[2],_=r[3];return t[0]=g*n+x*u+E*l+_*m,t[1]=g*i+x*f+E*d+_*v,t[2]=g*o+x*c+E*h+_*b,t[3]=g*a+x*s+E*p+_*y,g=r[4],x=r[5],E=r[6],_=r[7],t[4]=g*n+x*u+E*l+_*m,t[5]=g*i+x*f+E*d+_*v,t[6]=g*o+x*c+E*h+_*b,t[7]=g*a+x*s+E*p+_*y,g=r[8],x=r[9],E=r[10],_=r[11],t[8]=g*n+x*u+E*l+_*m,t[9]=g*i+x*f+E*d+_*v,t[10]=g*o+x*c+E*h+_*b,t[11]=g*a+x*s+E*p+_*y,g=r[12],x=r[13],E=r[14],_=r[15],t[12]=g*n+x*u+E*l+_*m,t[13]=g*i+x*f+E*d+_*v,t[14]=g*o+x*c+E*h+_*b,t[15]=g*a+x*s+E*p+_*y,t}function ae(t,e,r){let n,i,o,a,u,f,c,s,l,d,h,p,m=r[0],v=r[1],b=r[2];return e===t?(t[12]=e[0]*m+e[4]*v+e[8]*b+e[12],t[13]=e[1]*m+e[5]*v+e[9]*b+e[13],t[14]=e[2]*m+e[6]*v+e[10]*b+e[14],t[15]=e[3]*m+e[7]*v+e[11]*b+e[15]):(n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=e[8],d=e[9],h=e[10],p=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=u,t[5]=f,t[6]=c,t[7]=s,t[8]=l,t[9]=d,t[10]=h,t[11]=p,t[12]=n*m+u*v+l*b+e[12],t[13]=i*m+f*v+d*b+e[13],t[14]=o*m+c*v+h*b+e[14],t[15]=a*m+s*v+p*b+e[15]),t}function ue(t,e,r){let n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function fe(t,e,r,n){let i,o,a,u,f,c,s,l,d,p,m,v,b,y,g,x,E,_,M,A,T,w,R,F,P=n[0],I=n[1],S=n[2],O=Math.sqrt(P*P+I*I+S*S);return O<h?null:(P*=O=1/O,I*=O,S*=O,i=Math.sin(r),a=1-(o=Math.cos(r)),u=e[0],f=e[1],c=e[2],s=e[3],l=e[4],d=e[5],p=e[6],m=e[7],v=e[8],b=e[9],y=e[10],g=e[11],x=P*P*a+o,E=I*P*a+S*i,_=S*P*a-I*i,M=P*I*a-S*i,A=I*I*a+o,T=S*I*a+P*i,w=P*S*a+I*i,R=I*S*a-P*i,F=S*S*a+o,t[0]=u*x+l*E+v*_,t[1]=f*x+d*E+b*_,t[2]=c*x+p*E+y*_,t[3]=s*x+m*E+g*_,t[4]=u*M+l*A+v*T,t[5]=f*M+d*A+b*T,t[6]=c*M+p*A+y*T,t[7]=s*M+m*A+g*T,t[8]=u*w+l*R+v*F,t[9]=f*w+d*R+b*F,t[10]=c*w+p*R+y*F,t[11]=s*w+m*R+g*F,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,r){let n=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],u=e[6],f=e[7],c=e[8],s=e[9],l=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*n,t[5]=a*i+s*n,t[6]=u*i+l*n,t[7]=f*i+d*n,t[8]=c*i-o*n,t[9]=s*i-a*n,t[10]=l*i-u*n,t[11]=d*i-f*n,t}function se(t,e,r){let n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],u=e[2],f=e[3],c=e[8],s=e[9],l=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*n,t[1]=a*i-s*n,t[2]=u*i-l*n,t[3]=f*i-d*n,t[8]=o*n+c*i,t[9]=a*n+s*i,t[10]=u*n+l*i,t[11]=f*n+d*i,t}function le(t,e,r){let n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],u=e[2],f=e[3],c=e[4],s=e[5],l=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*n,t[1]=a*i+s*n,t[2]=u*i+l*n,t[3]=f*i+d*n,t[4]=c*i-o*n,t[5]=s*i-a*n,t[6]=l*i-u*n,t[7]=d*i-f*n,t}function de(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function he(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pe(t,e,r){let n,i,o,a=r[0],u=r[1],f=r[2],c=Math.sqrt(a*a+u*u+f*f);return c<h?null:(a*=c=1/c,u*=c,f*=c,n=Math.sin(e),o=1-(i=Math.cos(e)),t[0]=a*a*o+i,t[1]=u*a*o+f*n,t[2]=f*a*o-u*n,t[3]=0,t[4]=a*u*o-f*n,t[5]=u*u*o+i,t[6]=f*u*o+a*n,t[7]=0,t[8]=a*f*o+u*n,t[9]=u*f*o-a*n,t[10]=f*f*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function me(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function be(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ye(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=n+n,f=i+i,c=o+o,s=n*u,l=n*f,d=n*c,h=i*f,p=i*c,m=o*c,v=a*u,b=a*f,y=a*c;return t[0]=1-(h+m),t[1]=l+y,t[2]=d-b,t[3]=0,t[4]=l-y,t[5]=1-(s+m),t[6]=p+v,t[7]=0,t[8]=d+b,t[9]=p-v,t[10]=1-(s+h),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function ge(t,e){let r=new p(3),n=-e[0],i=-e[1],o=-e[2],a=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=n*n+i*i+o*o+a*a;return l>0?(r[0]=2*(u*a+s*n+f*o-c*i)/l,r[1]=2*(f*a+s*i+c*n-u*o)/l,r[2]=2*(c*a+s*o+u*i-f*n)/l):(r[0]=2*(u*a+s*n+f*o-c*i),r[1]=2*(f*a+s*i+c*n-u*o),r[2]=2*(c*a+s*o+u*i-f*n)),ye(t,e,r),t}function xe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Ee(t,e){let r=e[0],n=e[1],i=e[2],o=e[4],a=e[5],u=e[6],f=e[8],c=e[9],s=e[10];return t[0]=Math.sqrt(r*r+n*n+i*i),t[1]=Math.sqrt(o*o+a*a+u*u),t[2]=Math.sqrt(f*f+c*c+s*s),t}function _e(t,e){let r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t}function Me(t,e,r,n){let i=e[0],o=e[1],a=e[2],u=e[3],f=i+i,c=o+o,s=a+a,l=i*f,d=i*c,h=i*s,p=o*c,m=o*s,v=a*s,b=u*f,y=u*c,g=u*s,x=n[0],E=n[1],_=n[2];return t[0]=(1-(p+v))*x,t[1]=(d+g)*x,t[2]=(h-y)*x,t[3]=0,t[4]=(d-g)*E,t[5]=(1-(l+v))*E,t[6]=(m+b)*E,t[7]=0,t[8]=(h+y)*_,t[9]=(m-b)*_,t[10]=(1-(l+p))*_,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function Ae(t,e,r,n,i){let o=e[0],a=e[1],u=e[2],f=e[3],c=o+o,s=a+a,l=u+u,d=o*c,h=o*s,p=o*l,m=a*s,v=a*l,b=u*l,y=f*c,g=f*s,x=f*l,E=n[0],_=n[1],M=n[2],A=i[0],T=i[1],w=i[2],R=(1-(m+b))*E,F=(h+x)*E,P=(p-g)*E,I=(h-x)*_,S=(1-(d+b))*_,O=(v+y)*_,B=(p+g)*M,C=(v-y)*M,U=(1-(d+m))*M;return t[0]=R,t[1]=F,t[2]=P,t[3]=0,t[4]=I,t[5]=S,t[6]=O,t[7]=0,t[8]=B,t[9]=C,t[10]=U,t[11]=0,t[12]=r[0]+A-(R*A+I*T+B*w),t[13]=r[1]+T-(F*A+S*T+C*w),t[14]=r[2]+w-(P*A+O*T+U*w),t[15]=1,t}function Te(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,u=n+n,f=i+i,c=r*a,s=n*a,l=n*u,d=i*a,h=i*u,p=i*f,m=o*a,v=o*u,b=o*f;return t[0]=1-l-p,t[1]=s+b,t[2]=d-v,t[3]=0,t[4]=s-b,t[5]=1-c-p,t[6]=h+m,t[7]=0,t[8]=d+v,t[9]=h-m,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function we(t,e,r,n,i,o,a){let u=1/(r-e),f=1/(i-n),c=1/(o-a);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*f,t[6]=0,t[7]=0,t[8]=(r+e)*u,t[9]=(i+n)*f,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function Re(t,e,r,n,i){let o=1/Math.tan(e/2),a=1/(n-i);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*a,t[15]=0,t}function Fe(t,e,r,n){let i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),f=2/(a+u),c=2/(i+o);return t[0]=f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-u)*f*.5,t[9]=(i-o)*c*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function Pe(t,e,r,n,i,o,a){let u=1/(e-r),f=1/(n-i),c=1/(o-a);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*f,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*u,t[13]=(i+n)*f,t[14]=(a+o)*c,t[15]=1,t}function Ie(t,e,r,n){let i,o,a,u,f,c,s,l,d,p,m=e[0],v=e[1],b=e[2],y=n[0],g=n[1],x=n[2],E=r[0],_=r[1],M=r[2];return Math.abs(m-E)<h&&Math.abs(v-_)<h&&Math.abs(b-M)<h?te(t):(s=m-E,l=v-_,d=b-M,i=g*(d*=p=1/Math.sqrt(s*s+l*l+d*d))-x*(l*=p),o=x*(s*=p)-y*d,a=y*l-g*s,(p=Math.sqrt(i*i+o*o+a*a))?(i*=p=1/p,o*=p,a*=p):(i=0,o=0,a=0),u=l*a-d*o,f=d*i-s*a,c=s*o-l*i,(p=Math.sqrt(u*u+f*f+c*c))?(u*=p=1/p,f*=p,c*=p):(u=0,f=0,c=0),t[0]=i,t[1]=u,t[2]=s,t[3]=0,t[4]=o,t[5]=f,t[6]=l,t[7]=0,t[8]=a,t[9]=c,t[10]=d,t[11]=0,t[12]=-(i*m+o*v+a*b),t[13]=-(u*m+f*v+c*b),t[14]=-(s*m+l*v+d*b),t[15]=1,t)}function Se(t,e,r,n){let i=e[0],o=e[1],a=e[2],u=n[0],f=n[1],c=n[2],s=i-r[0],l=o-r[1],d=a-r[2],h=s*s+l*l+d*d;h>0&&(s*=h=1/Math.sqrt(h),l*=h,d*=h);let p=f*d-c*l,m=c*s-u*d,v=u*l-f*s;return(h=p*p+m*m+v*v)>0&&(p*=h=1/Math.sqrt(h),m*=h,v*=h),t[0]=p,t[1]=m,t[2]=v,t[3]=0,t[4]=l*v-d*m,t[5]=d*p-s*v,t[6]=s*m-l*p,t[7]=0,t[8]=s,t[9]=l,t[10]=d,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function Oe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Be(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function Ce(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function Ue(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function De(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function Le(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function ke(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function je(t,e){let r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],f=t[6],c=t[7],s=t[8],l=t[9],d=t[10],p=t[11],m=t[12],v=t[13],b=t[14],y=t[15],g=e[0],x=e[1],E=e[2],_=e[3],M=e[4],A=e[5],T=e[6],w=e[7],R=e[8],F=e[9],P=e[10],I=e[11],S=e[12],O=e[13],B=e[14],C=e[15];return Math.abs(r-g)<=h*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(n-x)<=h*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(i-E)<=h*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(o-_)<=h*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-M)<=h*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(u-A)<=h*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(f-T)<=h*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(c-w)<=h*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(s-R)<=h*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(l-F)<=h*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(d-P)<=h*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(p-I)<=h*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(m-S)<=h*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(v-O)<=h*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(b-B)<=h*Math.max(1,Math.abs(b),Math.abs(B))&&Math.abs(y-C)<=h*Math.max(1,Math.abs(y),Math.abs(C))}const Ne=oe,Ge=Ue;function We(){let t=new p(3);return t[0]=0,t[1]=0,t[2]=0,t}function ze(t){var e=new p(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Xe(t){let e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function qe(t,e,r){let n=new p(3);return n[0]=t,n[1]=e,n[2]=r,n}function Ye(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ke(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function Ve(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function He(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function Qe(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function Ze(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function $e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Je(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function tr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function er(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function rr(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function nr(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function ir(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function or(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}function ar(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function ur(t){let e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function fr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function cr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function sr(t,e){let r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function lr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function dr(t,e,r){let n=e[0],i=e[1],o=e[2],a=r[0],u=r[1],f=r[2];return t[0]=i*f-o*u,t[1]=o*a-n*f,t[2]=n*u-i*a,t}function hr(t,e,r,n){let i=e[0],o=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t}function pr(t,e,r,n,i,o){let a=o*o,u=a*(2*o-3)+1,f=a*(o-2)+o,c=a*(o-1),s=a*(3-2*o);return t[0]=e[0]*u+r[0]*f+n[0]*c+i[0]*s,t[1]=e[1]*u+r[1]*f+n[1]*c+i[1]*s,t[2]=e[2]*u+r[2]*f+n[2]*c+i[2]*s,t}function mr(t,e,r,n,i,o){let a=1-o,u=a*a,f=o*o,c=u*a,s=3*o*u,l=3*f*a,d=f*o;return t[0]=e[0]*c+r[0]*s+n[0]*l+i[0]*d,t[1]=e[1]*c+r[1]*s+n[1]*l+i[1]*d,t[2]=e[2]*c+r[2]*s+n[2]*l+i[2]*d,t}function vr(t,e){e=e||1;let r=2*m()*Math.PI,n=2*m()-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t}function br(t,e,r){let n=e[0],i=e[1],o=e[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,t}function yr(t,e,r){let n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t}function gr(t,e,r){let n=r[0],i=r[1],o=r[2],a=r[3],u=e[0],f=e[1],c=e[2],s=i*c-o*f,l=o*u-n*c,d=n*f-i*u,h=i*d-o*l,p=o*s-n*d,m=n*l-i*s,v=2*a;return s*=v,l*=v,d*=v,h*=2,p*=2,m*=2,t[0]=u+s+h,t[1]=f+l+p,t[2]=c+d+m,t}function xr(t,e,r,n){let i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function Er(t,e,r,n){let i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function _r(t,e,r,n){let i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function Mr(t,e){let r=qe(t[0],t[1],t[2]),n=qe(e[0],e[1],e[2]);sr(r,r),sr(n,n);let i=lr(r,n);return i>1?0:i<-1?Math.PI:Math.acos(i)}function Ar(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Tr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function wr(t,e){let r=t[0],n=t[1],i=t[2],o=e[0],a=e[1],u=e[2];return Math.abs(r-o)<=h*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=h*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-u)<=h*Math.max(1,Math.abs(i),Math.abs(u))}const Rr=He,Fr=Qe,Pr=Ze,Ir=or,Sr=ar,Or=Xe,Br=ur,Cr=function(){let t=We();return function(e,r,n,i,o,a){let u,f;for(r||(r=3),n||(n=0),f=i?Math.min(i*r+n,e.length):e.length,u=n;u<f;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}();function Ur(){let t=new p(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function Dr(t){let e=new p(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Lr(t,e,r,n){let i=new p(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function kr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function jr(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function Nr(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function Gr(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function Wr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function zr(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function Xr(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function qr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Yr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function Kr(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function Vr(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Hr(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function Qr(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function Zr(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+o*o)}function $r(t,e){let r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+i*i+o*o}function Jr(t){let e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)}function tn(t){let e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function en(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function rn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function nn(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=o*a),t}function on(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function an(t,e,r,n){let i=e[0],o=e[1],a=e[2],u=e[3];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t[3]=u+n*(r[3]-u),t}function un(t,e){var r,n,i,o,a,u;e=e||1;do{a=(r=2*m()-1)*r+(n=2*m()-1)*n}while(a>=1);do{u=(i=2*m()-1)*i+(o=2*m()-1)*o}while(u>=1);var f=Math.sqrt((1-a)/u);return t[0]=Hr*r,t[1]=Hr*n,t[2]=Hr*i*f,t[3]=Hr*o*f,t}function fn(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t}function cn(t,e,r){let n=e[0],i=e[1],o=e[2],a=r[0],u=r[1],f=r[2],c=r[3],s=c*n+u*o-f*i,l=c*i+f*n-a*o,d=c*o+a*i-u*n,h=-a*n-u*i-f*o;return t[0]=s*c+h*-a+l*-f-d*-u,t[1]=l*c+h*-u+d*-a-s*-f,t[2]=d*c+h*-f+s*-u-l*-a,t[3]=e[3],t}function sn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function ln(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function dn(t,e){let r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],u=e[1],f=e[2],c=e[3];return Math.abs(r-a)<=h*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-u)<=h*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-f)<=h*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-c)<=h*Math.max(1,Math.abs(o),Math.abs(c))}const hn=Gr,pn=Wr,mn=zr,vn=Zr,bn=$r,yn=Jr,gn=tn,xn=function(){let t=Ur();return function(e,r,n,i,o,a){let u,f;for(r||(r=4),n||(n=0),f=i?Math.min(i*r+n,e.length):e.length,u=n;u<f;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();function En(){let t=new p(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function _n(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Mn(t,e,r){r*=.5;let n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function An(t,e){let r=2*Math.acos(e[3]),n=Math.sin(r/2);return 0!=n?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function Tn(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=r[0],f=r[1],c=r[2],s=r[3];return t[0]=n*s+a*u+i*c-o*f,t[1]=i*s+a*f+o*u-n*c,t[2]=o*s+a*c+n*f-i*u,t[3]=a*s-n*u-i*f-o*c,t}function wn(t,e,r){r*=.5;let n=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(r),f=Math.cos(r);return t[0]=n*f+a*u,t[1]=i*f+o*u,t[2]=o*f-i*u,t[3]=a*f-n*u,t}function Rn(t,e,r){r*=.5;let n=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(r),f=Math.cos(r);return t[0]=n*f-o*u,t[1]=i*f+a*u,t[2]=o*f+n*u,t[3]=a*f-i*u,t}function Fn(t,e,r){r*=.5;let n=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(r),f=Math.cos(r);return t[0]=n*f+i*u,t[1]=i*f-n*u,t[2]=o*f+a*u,t[3]=a*f-o*u,t}function Pn(t,e){let r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t}function In(t,e,r,n){let i,o,a,u,f,c=e[0],s=e[1],l=e[2],d=e[3],h=r[0],p=r[1],m=r[2],v=r[3];return(o=c*h+s*p+l*m+d*v)<0&&(o=-o,h=-h,p=-p,m=-m,v=-v),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),u=Math.sin((1-n)*i)/a,f=Math.sin(n*i)/a):(u=1-n,f=n),t[0]=u*c+f*h,t[1]=u*s+f*p,t[2]=u*l+f*m,t[3]=u*d+f*v,t}function Sn(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o,u=a?1/a:0;return t[0]=-r*u,t[1]=-n*u,t[2]=-i*u,t[3]=o*u,t}function On(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Bn(t,e){let r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);let i=(n+1)%3,o=(n+2)%3;r=Math.sqrt(e[3*n+n]-e[3*i+i]-e[3*o+o]+1),t[n]=.5*r,r=.5/r,t[3]=(e[3*i+o]-e[3*o+i])*r,t[i]=(e[3*i+n]+e[3*n+i])*r,t[o]=(e[3*o+n]+e[3*n+o])*r}return t}function Cn(t,e,r,n){let i=.5*Math.PI/180;e*=i,r*=i,n*=i;let o=Math.sin(e),a=Math.cos(e),u=Math.sin(r),f=Math.cos(r),c=Math.sin(n),s=Math.cos(n);return t[0]=o*f*s-a*u*c,t[1]=a*u*s+o*f*c,t[2]=a*f*c-o*u*s,t[3]=a*f*s+o*u*c,t}function Un(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const Dn=Dr,Ln=Lr,kn=kr,jn=jr,Nn=Nr,Gn=Tn,Wn=Hr,zn=on,Xn=an,qn=Jr,Yn=qn,Kn=tn,Vn=Kn,Hn=nn,Qn=ln,Zn=dn,$n=function(){let t=We(),e=qe(1,0,0),r=qe(0,1,0);return function(n,i,o){let a=lr(i,o);return a<-.999999?(dr(t,e,i),Or(t)<1e-6&&dr(t,r,i),sr(t,t),Mn(n,t,Math.PI),n):a>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(dr(t,i,o),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+a,Hn(n,n))}}(),Jn=function(){let t=En(),e=En();return function(r,n,i,o,a,u){return In(t,n,a,u),In(e,i,o,u),In(r,t,e,2*u*(1-u)),r}}(),ti=function(){let t=bt();return function(e,r,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],Hn(e,Bn(e,t))}}();function ei(){let t=new p(8);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function ri(t){let e=new p(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function ni(t,e,r,n,i,o,a,u){let f=new p(8);return f[0]=t,f[1]=e,f[2]=r,f[3]=n,f[4]=i,f[5]=o,f[6]=a,f[7]=u,f}function ii(t,e,r,n,i,o,a){let u=new p(8);u[0]=t,u[1]=e,u[2]=r,u[3]=n;let f=.5*i,c=.5*o,s=.5*a;return u[4]=f*n+c*r-s*e,u[5]=c*n+s*t-f*r,u[6]=s*n+f*e-c*t,u[7]=-f*t-c*e-s*r,u}function oi(t,e,r){let n=.5*r[0],i=.5*r[1],o=.5*r[2],a=e[0],u=e[1],f=e[2],c=e[3];return t[0]=a,t[1]=u,t[2]=f,t[3]=c,t[4]=n*c+i*f-o*u,t[5]=i*c+o*a-n*f,t[6]=o*c+n*u-i*a,t[7]=-n*a-i*u-o*f,t}function ai(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function ui(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function fi(t,e){let r=En();_e(r,e);let n=new p(3);return xe(n,e),oi(t,r,n),t}function ci(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function si(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function li(t,e,r,n,i,o,a,u,f){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t[6]=u,t[7]=f,t}const di=kn;function hi(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}const pi=kn;function mi(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function vi(t,e){let r=e[4],n=e[5],i=e[6],o=e[7],a=-e[0],u=-e[1],f=-e[2],c=e[3];return t[0]=2*(r*c+o*a+n*f-i*u),t[1]=2*(n*c+o*u+i*a-r*f),t[2]=2*(i*c+o*f+r*u-n*a),t}function bi(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=.5*r[0],f=.5*r[1],c=.5*r[2],s=e[4],l=e[5],d=e[6],h=e[7];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=a*u+i*c-o*f+s,t[5]=a*f+o*u-n*c+l,t[6]=a*c+n*f-i*u+d,t[7]=-n*u-i*f-o*c+h,t}function yi(t,e,r){let n=-e[0],i=-e[1],o=-e[2],a=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=u*a+s*n+f*o-c*i,d=f*a+s*i+c*n-u*o,h=c*a+s*o+u*i-f*n,p=s*a-u*n-f*i-c*o;return wn(t,e,r),n=t[0],i=t[1],o=t[2],a=t[3],t[4]=l*a+p*n+d*o-h*i,t[5]=d*a+p*i+h*n-l*o,t[6]=h*a+p*o+l*i-d*n,t[7]=p*a-l*n-d*i-h*o,t}function gi(t,e,r){let n=-e[0],i=-e[1],o=-e[2],a=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=u*a+s*n+f*o-c*i,d=f*a+s*i+c*n-u*o,h=c*a+s*o+u*i-f*n,p=s*a-u*n-f*i-c*o;return Rn(t,e,r),n=t[0],i=t[1],o=t[2],a=t[3],t[4]=l*a+p*n+d*o-h*i,t[5]=d*a+p*i+h*n-l*o,t[6]=h*a+p*o+l*i-d*n,t[7]=p*a-l*n-d*i-h*o,t}function xi(t,e,r){let n=-e[0],i=-e[1],o=-e[2],a=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=u*a+s*n+f*o-c*i,d=f*a+s*i+c*n-u*o,h=c*a+s*o+u*i-f*n,p=s*a-u*n-f*i-c*o;return Fn(t,e,r),n=t[0],i=t[1],o=t[2],a=t[3],t[4]=l*a+p*n+d*o-h*i,t[5]=d*a+p*i+h*n-l*o,t[6]=h*a+p*o+l*i-d*n,t[7]=p*a-l*n-d*i-h*o,t}function Ei(t,e,r){let n=r[0],i=r[1],o=r[2],a=r[3],u=e[0],f=e[1],c=e[2],s=e[3];return t[0]=u*a+s*n+f*o-c*i,t[1]=f*a+s*i+c*n-u*o,t[2]=c*a+s*o+u*i-f*n,t[3]=s*a-u*n-f*i-c*o,u=e[4],f=e[5],c=e[6],s=e[7],t[4]=u*a+s*n+f*o-c*i,t[5]=f*a+s*i+c*n-u*o,t[6]=c*a+s*o+u*i-f*n,t[7]=s*a-u*n-f*i-c*o,t}function _i(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=r[0],f=r[1],c=r[2],s=r[3];return t[0]=n*s+a*u+i*c-o*f,t[1]=i*s+a*f+o*u-n*c,t[2]=o*s+a*c+n*f-i*u,t[3]=a*s-n*u-i*f-o*c,u=r[4],f=r[5],c=r[6],s=r[7],t[4]=n*s+a*u+i*c-o*f,t[5]=i*s+a*f+o*u-n*c,t[6]=o*s+a*c+n*f-i*u,t[7]=a*s-n*u-i*f-o*c,t}function Mi(t,e,r,n){if(Math.abs(n)<h)return ci(t,e);let i=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);n*=.5;let o=Math.sin(n),a=o*r[0]/i,u=o*r[1]/i,f=o*r[2]/i,c=Math.cos(n),s=e[0],l=e[1],d=e[2],p=e[3];t[0]=s*c+p*a+l*f-d*u,t[1]=l*c+p*u+d*a-s*f,t[2]=d*c+p*f+s*u-l*a,t[3]=p*c-s*a-l*u-d*f;let m=e[4],v=e[5],b=e[6],y=e[7];return t[4]=m*c+y*a+v*f-b*u,t[5]=v*c+y*u+b*a-m*f,t[6]=b*c+y*f+m*u-v*a,t[7]=y*c-m*a-v*u-b*f,t}function Ai(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t}function Ti(t,e,r){let n=e[0],i=e[1],o=e[2],a=e[3],u=r[4],f=r[5],c=r[6],s=r[7],l=e[4],d=e[5],h=e[6],p=e[7],m=r[0],v=r[1],b=r[2],y=r[3];return t[0]=n*y+a*m+i*b-o*v,t[1]=i*y+a*v+o*m-n*b,t[2]=o*y+a*b+n*v-i*m,t[3]=a*y-n*m-i*v-o*b,t[4]=n*s+a*u+i*c-o*f+l*y+p*m+d*b-h*v,t[5]=i*s+a*f+o*u-n*c+d*y+p*v+h*m-l*b,t[6]=o*s+a*c+n*f-i*u+h*y+p*b+l*v-d*m,t[7]=a*s-n*u-i*f-o*c+p*y-l*m-d*v-h*b,t}const wi=Ti;function Ri(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t}const Fi=zn;function Pi(t,e,r,n){let i=1-n;return Fi(e,r)<0&&(n=-n),t[0]=e[0]*i+r[0]*n,t[1]=e[1]*i+r[1]*n,t[2]=e[2]*i+r[2]*n,t[3]=e[3]*i+r[3]*n,t[4]=e[4]*i+r[4]*n,t[5]=e[5]*i+r[5]*n,t[6]=e[6]*i+r[6]*n,t[7]=e[7]*i+r[7]*n,t}function Ii(t,e){let r=Ci(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t}function Si(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}const Oi=qn,Bi=Oi,Ci=Kn,Ui=Ci;function Di(t,e){let r=Ci(e);return r>0&&(r=Math.sqrt(r),t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r,t[3]=e[3]/r,t[4]=e[4]/r,t[5]=e[5]/r,t[6]=e[6]/r,t[7]=e[7]/r),t}function Li(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function ki(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function ji(t,e){let r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],f=t[6],c=t[7],s=e[0],l=e[1],d=e[2],p=e[3],m=e[4],v=e[5],b=e[6],y=e[7];return Math.abs(r-s)<=h*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-l)<=h*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(i-d)<=h*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-p)<=h*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=h*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(u-v)<=h*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(f-b)<=h*Math.max(1,Math.abs(f),Math.abs(b))&&Math.abs(c-y)<=h*Math.max(1,Math.abs(c),Math.abs(y))}function Ni(){let t=new p(2);return t[0]=0,t[1]=0,t}function Gi(t){let e=new p(2);return e[0]=t[0],e[1]=t[1],e}function Wi(t,e){let r=new p(2);return r[0]=t,r[1]=e,r}function zi(t,e){return t[0]=e[0],t[1]=e[1],t}function Xi(t,e,r){return t[0]=e,t[1]=r,t}function qi(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function Yi(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function Ki(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function Vi(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function Hi(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function Qi(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Zi(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function $i(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function Ji(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function to(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function eo(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function ro(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function no(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function io(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function oo(t){var e=t[0],r=t[1];return e*e+r*r}function ao(t,e){return t[0]=-e[0],t[1]=-e[1],t}function uo(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function fo(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t}function co(t,e){return t[0]*e[0]+t[1]*e[1]}function so(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function lo(t,e,r,n){var i=e[0],o=e[1];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t}function ho(t,e){e=e||1;var r=2*m()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function po(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t}function mo(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}function vo(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function bo(t,e,r){let n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}function yo(t,e,r,n){let i=e[0]-r[0],o=e[1]-r[1],a=Math.sin(n),u=Math.cos(n);return t[0]=i*u-o*a+r[0],t[1]=i*a+o*u+r[1],t}function go(t,e){let r=t[0],n=t[1],i=e[0],o=e[1],a=r*r+n*n;a>0&&(a=1/Math.sqrt(a));let u=i*i+o*o;u>0&&(u=1/Math.sqrt(u));let f=(r*i+n*o)*a*u;return f>1?0:f<-1?Math.PI:Math.acos(f)}function xo(t){return"vec2("+t[0]+", "+t[1]+")"}function Eo(t,e){return t[0]===e[0]&&t[1]===e[1]}function _o(t,e){let r=t[0],n=t[1],i=e[0],o=e[1];return Math.abs(r-i)<=h*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=h*Math.max(1,Math.abs(n),Math.abs(o))}const Mo=io,Ao=Yi,To=Ki,wo=Vi,Ro=ro,Fo=no,Po=oo,Io=function(){let t=Ni();return function(e,r,n,i,o,a){let u,f;for(r||(r=2),n||(n=0),f=i?Math.min(i*r+n,e.length):e.length,u=n;u<f;u+=r)t[0]=e[u],t[1]=e[u+1],o(t,t,a),e[u]=t[0],e[u+1]=t[1];return e}}();r.d(e,"glMatrix",function(){return n}),r.d(e,"mat2",function(){return i}),r.d(e,"mat2d",function(){return o}),r.d(e,"mat3",function(){return a}),r.d(e,"mat4",function(){return u}),r.d(e,"quat",function(){return s}),r.d(e,"quat2",function(){return l}),r.d(e,"vec2",function(){return d}),r.d(e,"vec3",function(){return f}),r.d(e,"vec4",function(){return c})},23:function(t,e,r){var n={},i=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),o=function(t){var e={};return function(t){if(void 0===e[t]){var r=function(t){return document.querySelector(t)}.call(this,t);if(r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),a=null,u=0,f=[],c=r(25);function s(t,e){for(var r=0;r<t.length;r++){var i=t[r],o=n[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(v(i.parts[a],e))}else{var u=[];for(a=0;a<i.parts.length;a++)u.push(v(i.parts[a],e));n[i.id]={id:i.id,refs:1,parts:u}}}}function l(t,e){for(var r=[],n={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],u={css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(u):r.push(n[a]={id:a,parts:[u]})}return r}function d(t,e){var r=o(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=f[f.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),f.push(e);else if("bottom"===t.insertAt)r.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(t.insertInto+" "+t.insertAt.before);r.insertBefore(e,i)}}function h(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=f.indexOf(t);e>=0&&f.splice(e,1)}function p(t){var e=document.createElement("style");return t.attrs.type="text/css",m(e,t.attrs),d(t,e),e}function m(t,e){Object.keys(e).forEach(function(r){t.setAttribute(r,e[r])})}function v(t,e){var r,n,i,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var f=u++;r=a||(a=p(e)),n=y.bind(null,r,f,!1),i=y.bind(null,r,f,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",m(e,t.attrs),d(t,e),e}(e),n=function(t,e,r){var n=r.css,i=r.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(n=c(n));i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),u=t.href;t.href=URL.createObjectURL(a),u&&URL.revokeObjectURL(u)}.bind(null,r,e),i=function(){h(r),r.href&&URL.revokeObjectURL(r.href)}):(r=p(e),n=function(t,e){var r=e.css,n=e.media;n&&t.setAttribute("media",n);if(t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,r),i=function(){h(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=i()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var r=l(t,e);return s(r,e),function(t){for(var i=[],o=0;o<r.length;o++){var a=r[o];(u=n[a.id]).refs--,i.push(u)}t&&s(l(t,e),e);for(o=0;o<i.length;o++){var u;if(0===(u=i[o]).refs){for(var f=0;f<u.parts.length;f++)u.parts[f]();delete n[u.id]}}}};var b=function(){var t=[];return function(e,r){return t[e]=r,t.filter(Boolean).join("\n")}}();function y(t,e,r,n){var i=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=b(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},24:function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(n),o=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[r].concat(o).concat([i]).join("\n")}return[r].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r}).join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),e.push(a))}},e}},25:function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,n=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?r+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},26:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoordinateConversions=e.TilemapTextureBuilder=void 0;var n=r(2),i=r(1);function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){o(t,e,r[e])})}return t}({tileWidth:8,tileHeight:8,width:256,height:1,layers:2},e)),this.copyIndex=0,this.texture=i.gl.createTexture(),i.gl.bindTexture(i.gl.TEXTURE_2D_ARRAY,this.texture),i.gl.texStorage3D(i.gl.TEXTURE_2D_ARRAY,1,i.gl.RGBA8,this.width*this.tileWidth,this.height*this.tileHeight,this.layers),i.gl.texParameteri(i.gl.TEXTURE_2D_ARRAY,i.gl.TEXTURE_MIN_FILTER,i.gl.NEAREST),i.gl.bindTexture(i.gl.TEXTURE_2D_ARRAY,null)}return function(t,e,r){e&&a(t.prototype,e),r&&a(t,r)}(t,[{key:"tileCoordinates",value:function(){return{x:this.copyIndex%this.width,y:Math.floor(this.copyIndex/this.width)%this.height,z:Math.floor(this.copyIndex/(this.width*this.height))%this.layers}}},{key:"addTiles",value:function(t){var e=this,r=this.detectWidthInTiles(t),n=this.detectHeightInTiles(t),o=document.createElement("canvas"),a=o.getContext("2d");o.width=t.width,o.height=t.height,a.drawImage(t,0,0);var u=function(t,r){var n=a.getImageData(t*e.tileWidth,r*e.tileHeight,e.tileWidth,e.tileHeight),o=e.tileCoordinates(),u=o.x,f=o.y,c=o.z;i.gl.texSubImage3D(i.gl.TEXTURE_2D_ARRAY,0,u*e.tileWidth,f*e.tileHeight,c,e.tileWidth,e.tileHeight,1,i.gl.RGBA,i.gl.UNSIGNED_BYTE,n),e.copyIndex++};i.gl.bindTexture(i.gl.TEXTURE_2D_ARRAY,this.texture),i.gl.pixelStorei(i.gl.UNPACK_FLIP_Y_WEBGL,1);for(var f=0;f<n;f++)for(var c=0;c<r&&!this.isFull();c++)u(c,f);i.gl.pixelStorei(i.gl.UNPACK_FLIP_Y_WEBGL,0),i.gl.bindTexture(i.gl.TEXTURE_2D_ARRAY,null)}},{key:"detectWidthInTiles",value:function(t){return Math.floor(t.width/this.tileWidth)}},{key:"detectHeightInTiles",value:function(t){return Math.floor(t.height/this.tileHeight)}},{key:"isFull",value:function(){return this.copyIndex>=this.maxIndex}},{key:"readback",value:function(){var t=new Uint8Array(this.layerWidth*this.layerHeight*4),e=i.gl.createFramebuffer(),r=[];i.gl.bindFramebuffer(i.gl.READ_FRAMEBUFFER,e);for(var n=0;n<this.layers;n++)i.gl.framebufferTextureLayer(i.gl.READ_FRAMEBUFFER,i.gl.COLOR_ATTACHMENT0,this.texture,0,n),i.gl.readPixels(0,0,this.layerWidth,this.layerHeight,i.gl.RGBA,i.gl.UNSIGNED_BYTE,t),r.push(new ImageData(new Uint8ClampedArray(t),this.layerWidth,this.layerHeight));return i.gl.bindFramebuffer(i.gl.READ_FRAMEBUFFER,null),r}},{key:"layerWidth",get:function(){return this.tileWidth*this.width}},{key:"layerHeight",get:function(){return this.tileHeight*this.height}},{key:"maxIndex",get:function(){return this.width*this.height*this.layers}}]),t}();e.TilemapTextureBuilder=u;var f={canvasToWorldMatrix:function(t,e,r){var i=n.mat4.create(),o=n.mat4.create();return n.mat4.multiply(i,n.mat4.fromValues(1,0,0,0,0,-1,0,0,0,0,1,0,0,e.height,1,1),i),n.mat4.fromScaling(o,[r.width/e.width,r.height/e.height,1]),n.mat4.multiply(i,o,i),n.mat4.invert(o,t),n.mat4.multiply(i,o,i),i}};e.CoordinateConversions=f},266:function(t,e){t.exports="#version 300 es\n\nprecision mediump float;\nprecision mediump int;\n\nout vec4 out_color;\n\nin vec2 v_tex_coord;\nflat in int v_tile_index;\n\nuniform highp sampler2DArray texture;\nuniform lowp ivec2 tile_size;\n\n#define TILE_X_MASK 0x0F\n#define TILE_Y_MASK 0xF0\n#define TILE_Z_MASK 0xFF00\n\n#define TILE_Y_SHIFT 4\n#define TILE_Z_SHIFT 8\n\n#define tile_coord(idx) (ivec3(idx & TILE_X_MASK, (idx & TILE_Y_MASK) >> TILE_Y_SHIFT, (idx & TILE_Z_MASK) >> TILE_Z_SHIFT))\n\nvoid main() {\n    ivec3 tile_coords = tile_coord(v_tile_index);\n\n    out_color = texelFetch(texture, ivec3(tile_coords.xy * tile_size + ivec2(v_tex_coord), tile_coords.z), 0);\n}\n"},267:function(t,e){t.exports="#version 300 es\n\nlayout(location = 0) in vec2 vertex;\nlayout(location = 1) in vec3 position;\nlayout(location = 2) in vec2 texcoord;\nlayout(location = 3) in int tile_index;\n\nout vec2 v_tex_coord;\nflat out int v_tile_index;\n\nuniform mat4 projection;\n\nvoid main() {\n    vec4 transformed_position = projection * vec4(position + vec3(vertex, 0), 1);\n    gl_Position = transformed_position;\n    v_tex_coord = texcoord;\n    v_tile_index = tile_index;\n}\n"},268:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TilemapRenderer=void 0;var n=f(r(5)),i=r(1),o=r(15),a=f(r(267)),u=f(r(266));function f(t){return t&&t.__esModule?t:{default:t}}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=null,l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=e.tilemap,o=e.game,f=e.textureArray;this.tilemap=r,this.game=o,this.gl=o.gl,this.textureArray=f,this.tileWidth=this.tilemap.tileWidth,this.tileHeight=this.tilemap.tileHeight,s||(s=n.default.createProgramInfo(i.gl,[a.default,u.default]),this.programInfo=s),this.setup()}return function(t,e,r){e&&c(t.prototype,e),r&&c(t,r)}(t,[{key:"setup",value:function(){this.bufferInfo=n.default.createBufferInfoFromArrays(i.gl,{vertex:{data:new Float32Array([0,0,this.tileWidth,0,0,this.tileHeight,this.tileWidth,this.tileHeight]),numComponents:2,divisor:0,drawType:i.gl.STATIC_DRAW},position:{numComponents:3,divisor:1,drawType:i.gl.DYNAMIC_DRAW},texcoord:{data:[0,0,this.tileWidth,0,0,this.tileHeight,this.tileWidth,this.tileHeight],numComponents:2,divisor:0,drawType:i.gl.STATIC_DRAW},tile_index:{numComponents:1,divisor:1,drawType:i.gl.DYNAMIC_DRAW,type:Int16Array},indices:{data:[0,1,2,3]}}),this.arrays={position:new Float32Array(3*this.maxCells()),tile_index:new Int16Array(this.maxCells())},this.vao=n.default.createVertexArrayInfo(i.gl,this.programInfo,this.bufferInfo)}},{key:"maxCells",value:function(){return this.maxWidthInCells*this.maxHeightInCells}},{key:"draw",value:function(t){var e=t.x,r=t.y,a=t.width,u=t.height,f={x:Math.floor(a/this.tileWidth)+1,y:Math.floor(u/this.tileHeight)+1},c=Math.floor(e/this.tileWidth),s=Math.floor(r/this.tileHeight);f.x=Math.min(f.x,this.tilemap.width-c,this.maxWidthInCells),f.y=Math.min(f.y,this.tilemap.height-s,this.maxHeightInCells);var l={x:e,y:r};e>0&&(l.x=-e%this.tileWidth),r>0&&(l.y=-r%this.tileHeight);for(var d=(0,o.arraySetter)(this.arrays.position),h=(0,o.arraySetter)(this.arrays.tile_index),p=0;p<f.y;p++)for(var m=p*this.tileHeight+l.y,v=0;v<f.x;v++){var b=v*this.tileWidth+l.x,y=this.tilemap.getTile(v+c,p+s);d([b,m,0]),h(y)}n.default.setAttribInfoBufferFromArray(i.gl,this.bufferInfo.attribs.position,this.arrays.position),n.default.setAttribInfoBufferFromArray(i.gl,this.bufferInfo.attribs.tile_index,this.arrays.tile_index),i.gl.useProgram(this.programInfo.program),n.default.setUniforms(this.programInfo,{projection:this.game.viewMatrix,texture:this.textureArray,tile_size:[this.tileWidth,this.tileHeight]}),n.default.setBuffersAndAttributes(i.gl,this.programInfo,this.vao),n.default.drawBufferInfo(i.gl,this.vao,i.gl.TRIANGLE_STRIP,void 0,void 0,f.x*f.y)}},{key:"maxWidthInCells",get:function(){return Math.floor(this.game.resolution.width/this.tileWidth)+1}},{key:"maxHeightInCells",get:function(){return Math.floor(this.game.resolution.height/this.tileHeight)+1}}]),t}();e.TilemapRenderer=l},269:function(t,e,r){"use strict";var n=r(26),i=r(17),o=r(15);r(32);var a=function(t){return t&&t.__esModule?t:{default:t}}(r(39)),u=r(268),f=r(18),c=r(100),s=r(51);function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){d(t,e,r[e])})}return t}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t,e,r,n,i,o,a){try{var u=t[o](a),f=u.value}catch(t){return void r(t)}u.done?e(f):Promise.resolve(f).then(n,i)}var p=document.getElementById("content"),m=document.createElement("canvas");m.classList.add("game"),p.appendChild(m);var v=new a.default({el:m,clearColor:[.1,.1,.1,1],resolution:{width:320,height:224},pixelMultiplier:2});new c.CameraPan(v);v.load({basePath:"shaders/",programs:["tilemap","grid","sprite"]});var b=new n.TilemapTextureBuilder({tileWidth:16,tileHeight:16,width:16,height:16,layers:4});function y(){return(y=function(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(t){h(o,n,i,a,u,"next",t)}function u(t){h(o,n,i,a,u,"throw",t)}a(void 0)})}}(regeneratorRuntime.mark(function t(){var e,r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.loader.loading;case 2:return t.t0=b,t.next=5,(0,o.loadImage)("img/mario.png");case 5:t.t1=t.sent,t.t0.addTiles.call(t.t0,t.t1),e=new f.SpriteRenderer({game:v,textureInfo:l({texture:v.framebuffer.texture},v.resolution)}),r=new u.TilemapRenderer({game:v,textureArray:b.texture,tilemap:{tileWidth:16,tileHeight:16,width:33,height:28,getTile:function(t,e){return(t%=33)+33*(28-(e%=28)-1)}}}),(n=new s.Grid(v)).addGrid(16,16,[1,1,1,.5],1),requestAnimationFrame(function t(){v.adjustViewport(),v.clear(),v.framebuffer.attach(),v.clear(),v.enableCamera(),r.draw({x:0,y:224,width:320,height:224}),n.render(),v.disableCamera(),v.framebuffer.detach(),v.adjustViewport(),e.render([new i.Sprite({position:[0,0],size:[v.resolution.width,v.resolution.height]})]),v.debug||requestAnimationFrame(t)});case 12:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}!function(){y.apply(this,arguments)}()},27:function(t,e,r){(function(t,r){var n;!function(){var i="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this||{},o=i._,a=Array.prototype,u=Object.prototype,f="undefined"!=typeof Symbol?Symbol.prototype:null,c=a.push,s=a.slice,l=u.toString,d=u.hasOwnProperty,h=Array.isArray,p=Object.keys,m=Object.create,v=function(){},b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};void 0===e||e.nodeType?i._=b:(void 0!==r&&!r.nodeType&&r.exports&&(e=r.exports=b),e._=b),b.VERSION="1.9.1";var y,g=function(t,e,r){if(void 0===e)return t;switch(null==r?3:r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)}}return function(){return t.apply(e,arguments)}},x=function(t,e,r){return b.iteratee!==y?b.iteratee(t,e):null==t?b.identity:b.isFunction(t)?g(t,e,r):b.isObject(t)&&!b.isArray(t)?b.matcher(t):b.property(t)};b.iteratee=y=function(t,e){return x(t,e,1/0)};var E=function(t,e){return e=null==e?t.length-1:+e,function(){for(var r=Math.max(arguments.length-e,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n);case 2:return t.call(this,arguments[0],arguments[1],n)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=n,t.apply(this,o)}},_=function(t){if(!b.isObject(t))return{};if(m)return m(t);v.prototype=t;var e=new v;return v.prototype=null,e},M=function(t){return function(e){return null==e?void 0:e[t]}},A=function(t,e){return null!=t&&d.call(t,e)},T=function(t,e){for(var r=e.length,n=0;n<r;n++){if(null==t)return;t=t[e[n]]}return r?t:void 0},w=Math.pow(2,53)-1,R=M("length"),F=function(t){var e=R(t);return"number"==typeof e&&e>=0&&e<=w};b.each=b.forEach=function(t,e,r){var n,i;if(e=g(e,r),F(t))for(n=0,i=t.length;n<i;n++)e(t[n],n,t);else{var o=b.keys(t);for(n=0,i=o.length;n<i;n++)e(t[o[n]],o[n],t)}return t},b.map=b.collect=function(t,e,r){e=x(e,r);for(var n=!F(t)&&b.keys(t),i=(n||t).length,o=Array(i),a=0;a<i;a++){var u=n?n[a]:a;o[a]=e(t[u],u,t)}return o};var P=function(t){return function(e,r,n,i){var o=arguments.length>=3;return function(e,r,n,i){var o=!F(e)&&b.keys(e),a=(o||e).length,u=t>0?0:a-1;for(i||(n=e[o?o[u]:u],u+=t);u>=0&&u<a;u+=t){var f=o?o[u]:u;n=r(n,e[f],f,e)}return n}(e,g(r,i,4),n,o)}};b.reduce=b.foldl=b.inject=P(1),b.reduceRight=b.foldr=P(-1),b.find=b.detect=function(t,e,r){var n=(F(t)?b.findIndex:b.findKey)(t,e,r);if(void 0!==n&&-1!==n)return t[n]},b.filter=b.select=function(t,e,r){var n=[];return e=x(e,r),b.each(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n},b.reject=function(t,e,r){return b.filter(t,b.negate(x(e)),r)},b.every=b.all=function(t,e,r){e=x(e,r);for(var n=!F(t)&&b.keys(t),i=(n||t).length,o=0;o<i;o++){var a=n?n[o]:o;if(!e(t[a],a,t))return!1}return!0},b.some=b.any=function(t,e,r){e=x(e,r);for(var n=!F(t)&&b.keys(t),i=(n||t).length,o=0;o<i;o++){var a=n?n[o]:o;if(e(t[a],a,t))return!0}return!1},b.contains=b.includes=b.include=function(t,e,r,n){return F(t)||(t=b.values(t)),("number"!=typeof r||n)&&(r=0),b.indexOf(t,e,r)>=0},b.invoke=E(function(t,e,r){var n,i;return b.isFunction(e)?i=e:b.isArray(e)&&(n=e.slice(0,-1),e=e[e.length-1]),b.map(t,function(t){var o=i;if(!o){if(n&&n.length&&(t=T(t,n)),null==t)return;o=t[e]}return null==o?o:o.apply(t,r)})}),b.pluck=function(t,e){return b.map(t,b.property(e))},b.where=function(t,e){return b.filter(t,b.matcher(e))},b.findWhere=function(t,e){return b.find(t,b.matcher(e))},b.max=function(t,e,r){var n,i,o=-1/0,a=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var u=0,f=(t=F(t)?t:b.values(t)).length;u<f;u++)null!=(n=t[u])&&n>o&&(o=n);else e=x(e,r),b.each(t,function(t,r,n){((i=e(t,r,n))>a||i===-1/0&&o===-1/0)&&(o=t,a=i)});return o},b.min=function(t,e,r){var n,i,o=1/0,a=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var u=0,f=(t=F(t)?t:b.values(t)).length;u<f;u++)null!=(n=t[u])&&n<o&&(o=n);else e=x(e,r),b.each(t,function(t,r,n){((i=e(t,r,n))<a||i===1/0&&o===1/0)&&(o=t,a=i)});return o},b.shuffle=function(t){return b.sample(t,1/0)},b.sample=function(t,e,r){if(null==e||r)return F(t)||(t=b.values(t)),t[b.random(t.length-1)];var n=F(t)?b.clone(t):b.values(t),i=R(n);e=Math.max(Math.min(e,i),0);for(var o=i-1,a=0;a<e;a++){var u=b.random(a,o),f=n[a];n[a]=n[u],n[u]=f}return n.slice(0,e)},b.sortBy=function(t,e,r){var n=0;return e=x(e,r),b.pluck(b.map(t,function(t,r,i){return{value:t,index:n++,criteria:e(t,r,i)}}).sort(function(t,e){var r=t.criteria,n=e.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return t.index-e.index}),"value")};var I=function(t,e){return function(r,n,i){var o=e?[[],[]]:{};return n=x(n,i),b.each(r,function(e,i){var a=n(e,i,r);t(o,e,a)}),o}};b.groupBy=I(function(t,e,r){A(t,r)?t[r].push(e):t[r]=[e]}),b.indexBy=I(function(t,e,r){t[r]=e}),b.countBy=I(function(t,e,r){A(t,r)?t[r]++:t[r]=1});var S=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;b.toArray=function(t){return t?b.isArray(t)?s.call(t):b.isString(t)?t.match(S):F(t)?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:F(t)?t.length:b.keys(t).length},b.partition=I(function(t,e,r){t[r?0:1].push(e)},!0),b.first=b.head=b.take=function(t,e,r){return null==t||t.length<1?null==e?void 0:[]:null==e||r?t[0]:b.initial(t,t.length-e)},b.initial=function(t,e,r){return s.call(t,0,Math.max(0,t.length-(null==e||r?1:e)))},b.last=function(t,e,r){return null==t||t.length<1?null==e?void 0:[]:null==e||r?t[t.length-1]:b.rest(t,Math.max(0,t.length-e))},b.rest=b.tail=b.drop=function(t,e,r){return s.call(t,null==e||r?1:e)},b.compact=function(t){return b.filter(t,Boolean)};var O=function(t,e,r,n){for(var i=(n=n||[]).length,o=0,a=R(t);o<a;o++){var u=t[o];if(F(u)&&(b.isArray(u)||b.isArguments(u)))if(e)for(var f=0,c=u.length;f<c;)n[i++]=u[f++];else O(u,e,r,n),i=n.length;else r||(n[i++]=u)}return n};b.flatten=function(t,e){return O(t,e,!1)},b.without=E(function(t,e){return b.difference(t,e)}),b.uniq=b.unique=function(t,e,r,n){b.isBoolean(e)||(n=r,r=e,e=!1),null!=r&&(r=x(r,n));for(var i=[],o=[],a=0,u=R(t);a<u;a++){var f=t[a],c=r?r(f,a,t):f;e&&!r?(a&&o===c||i.push(f),o=c):r?b.contains(o,c)||(o.push(c),i.push(f)):b.contains(i,f)||i.push(f)}return i},b.union=E(function(t){return b.uniq(O(t,!0,!0))}),b.intersection=function(t){for(var e=[],r=arguments.length,n=0,i=R(t);n<i;n++){var o=t[n];if(!b.contains(e,o)){var a;for(a=1;a<r&&b.contains(arguments[a],o);a++);a===r&&e.push(o)}}return e},b.difference=E(function(t,e){return e=O(e,!0,!0),b.filter(t,function(t){return!b.contains(e,t)})}),b.unzip=function(t){for(var e=t&&b.max(t,R).length||0,r=Array(e),n=0;n<e;n++)r[n]=b.pluck(t,n);return r},b.zip=E(b.unzip),b.object=function(t,e){for(var r={},n=0,i=R(t);n<i;n++)e?r[t[n]]=e[n]:r[t[n][0]]=t[n][1];return r};var B=function(t){return function(e,r,n){r=x(r,n);for(var i=R(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(r(e[o],o,e))return o;return-1}};b.findIndex=B(1),b.findLastIndex=B(-1),b.sortedIndex=function(t,e,r,n){for(var i=(r=x(r,n,1))(e),o=0,a=R(t);o<a;){var u=Math.floor((o+a)/2);r(t[u])<i?o=u+1:a=u}return o};var C=function(t,e,r){return function(n,i,o){var a=0,u=R(n);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+u,a):u=o>=0?Math.min(o+1,u):o+u+1;else if(r&&o&&u)return n[o=r(n,i)]===i?o:-1;if(i!=i)return(o=e(s.call(n,a,u),b.isNaN))>=0?o+a:-1;for(o=t>0?a:u-1;o>=0&&o<u;o+=t)if(n[o]===i)return o;return-1}};b.indexOf=C(1,b.findIndex,b.sortedIndex),b.lastIndexOf=C(-1,b.findLastIndex),b.range=function(t,e,r){null==e&&(e=t||0,t=0),r||(r=e<t?-1:1);for(var n=Math.max(Math.ceil((e-t)/r),0),i=Array(n),o=0;o<n;o++,t+=r)i[o]=t;return i},b.chunk=function(t,e){if(null==e||e<1)return[];for(var r=[],n=0,i=t.length;n<i;)r.push(s.call(t,n,n+=e));return r};var U=function(t,e,r,n,i){if(!(n instanceof e))return t.apply(r,i);var o=_(t.prototype),a=t.apply(o,i);return b.isObject(a)?a:o};b.bind=E(function(t,e,r){if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");var n=E(function(i){return U(t,n,e,this,r.concat(i))});return n}),b.partial=E(function(t,e){var r=b.partial.placeholder,n=function(){for(var i=0,o=e.length,a=Array(o),u=0;u<o;u++)a[u]=e[u]===r?arguments[i++]:e[u];for(;i<arguments.length;)a.push(arguments[i++]);return U(t,n,this,this,a)};return n}),b.partial.placeholder=b,b.bindAll=E(function(t,e){var r=(e=O(e,!1,!1)).length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=e[r];t[n]=b.bind(t[n],t)}}),b.memoize=function(t,e){var r=function(n){var i=r.cache,o=""+(e?e.apply(this,arguments):n);return A(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return r.cache={},r},b.delay=E(function(t,e,r){return setTimeout(function(){return t.apply(null,r)},e)}),b.defer=b.partial(b.delay,b,1),b.throttle=function(t,e,r){var n,i,o,a,u=0;r||(r={});var f=function(){u=!1===r.leading?0:b.now(),n=null,a=t.apply(i,o),n||(i=o=null)},c=function(){var c=b.now();u||!1!==r.leading||(u=c);var s=e-(c-u);return i=this,o=arguments,s<=0||s>e?(n&&(clearTimeout(n),n=null),u=c,a=t.apply(i,o),n||(i=o=null)):n||!1===r.trailing||(n=setTimeout(f,s)),a};return c.cancel=function(){clearTimeout(n),u=0,n=i=o=null},c},b.debounce=function(t,e,r){var n,i,o=function(e,r){n=null,r&&(i=t.apply(e,r))},a=E(function(a){if(n&&clearTimeout(n),r){var u=!n;n=setTimeout(o,e),u&&(i=t.apply(this,a))}else n=b.delay(o,e,this,a);return i});return a.cancel=function(){clearTimeout(n),n=null},a},b.wrap=function(t,e){return b.partial(e,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,e=t.length-1;return function(){for(var r=e,n=t[e].apply(this,arguments);r--;)n=t[r].call(this,n);return n}},b.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},b.before=function(t,e){var r;return function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=null),r}},b.once=b.partial(b.before,2),b.restArguments=E;var D=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],k=function(t,e){var r=L.length,n=t.constructor,i=b.isFunction(n)&&n.prototype||u,o="constructor";for(A(t,o)&&!b.contains(e,o)&&e.push(o);r--;)(o=L[r])in t&&t[o]!==i[o]&&!b.contains(e,o)&&e.push(o)};b.keys=function(t){if(!b.isObject(t))return[];if(p)return p(t);var e=[];for(var r in t)A(t,r)&&e.push(r);return D&&k(t,e),e},b.allKeys=function(t){if(!b.isObject(t))return[];var e=[];for(var r in t)e.push(r);return D&&k(t,e),e},b.values=function(t){for(var e=b.keys(t),r=e.length,n=Array(r),i=0;i<r;i++)n[i]=t[e[i]];return n},b.mapObject=function(t,e,r){e=x(e,r);for(var n=b.keys(t),i=n.length,o={},a=0;a<i;a++){var u=n[a];o[u]=e(t[u],u,t)}return o},b.pairs=function(t){for(var e=b.keys(t),r=e.length,n=Array(r),i=0;i<r;i++)n[i]=[e[i],t[e[i]]];return n},b.invert=function(t){for(var e={},r=b.keys(t),n=0,i=r.length;n<i;n++)e[t[r[n]]]=r[n];return e},b.functions=b.methods=function(t){var e=[];for(var r in t)b.isFunction(t[r])&&e.push(r);return e.sort()};var j=function(t,e){return function(r){var n=arguments.length;if(e&&(r=Object(r)),n<2||null==r)return r;for(var i=1;i<n;i++)for(var o=arguments[i],a=t(o),u=a.length,f=0;f<u;f++){var c=a[f];e&&void 0!==r[c]||(r[c]=o[c])}return r}};b.extend=j(b.allKeys),b.extendOwn=b.assign=j(b.keys),b.findKey=function(t,e,r){e=x(e,r);for(var n,i=b.keys(t),o=0,a=i.length;o<a;o++)if(e(t[n=i[o]],n,t))return n};var N,G,W=function(t,e,r){return e in r};b.pick=E(function(t,e){var r={},n=e[0];if(null==t)return r;b.isFunction(n)?(e.length>1&&(n=g(n,e[1])),e=b.allKeys(t)):(n=W,e=O(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var a=e[i],u=t[a];n(u,a,t)&&(r[a]=u)}return r}),b.omit=E(function(t,e){var r,n=e[0];return b.isFunction(n)?(n=b.negate(n),e.length>1&&(r=e[1])):(e=b.map(O(e,!1,!1),String),n=function(t,r){return!b.contains(e,r)}),b.pick(t,n,r)}),b.defaults=j(b.allKeys,!0),b.create=function(t,e){var r=_(t);return e&&b.extendOwn(r,e),r},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,e){return e(t),t},b.isMatch=function(t,e){var r=b.keys(e),n=r.length;if(null==t)return!n;for(var i=Object(t),o=0;o<n;o++){var a=r[o];if(e[a]!==i[a]||!(a in i))return!1}return!0},N=function(t,e,r,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&G(t,e,r,n)},G=function(t,e,r,n){t instanceof b&&(t=t._wrapped),e instanceof b&&(e=e._wrapped);var i=l.call(t);if(i!==l.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return f.valueOf.call(t)===f.valueOf.call(e)}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,u=e.constructor;if(a!==u&&!(b.isFunction(a)&&a instanceof a&&b.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}r=r||[],n=n||[];for(var c=r.length;c--;)if(r[c]===t)return n[c]===e;if(r.push(t),n.push(e),o){if((c=t.length)!==e.length)return!1;for(;c--;)if(!N(t[c],e[c],r,n))return!1}else{var s,d=b.keys(t);if(c=d.length,b.keys(e).length!==c)return!1;for(;c--;)if(s=d[c],!A(e,s)||!N(t[s],e[s],r,n))return!1}return r.pop(),n.pop(),!0},b.isEqual=function(t,e){return N(t,e)},b.isEmpty=function(t){return null==t||(F(t)&&(b.isArray(t)||b.isString(t)||b.isArguments(t))?0===t.length:0===b.keys(t).length)},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=h||function(t){return"[object Array]"===l.call(t)},b.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(t){b["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return A(t,"callee")});var z=i.document&&i.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof z&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return!b.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&isNaN(t)},b.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,e){if(!b.isArray(e))return A(t,e);for(var r=e.length,n=0;n<r;n++){var i=e[n];if(null==t||!d.call(t,i))return!1;t=t[i]}return!!r},b.noConflict=function(){return i._=o,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=function(t){return b.isArray(t)?function(e){return T(e,t)}:M(t)},b.propertyOf=function(t){return null==t?function(){}:function(e){return b.isArray(e)?T(t,e):t[e]}},b.matcher=b.matches=function(t){return t=b.extendOwn({},t),function(e){return b.isMatch(e,t)}},b.times=function(t,e,r){var n=Array(Math.max(0,t));e=g(e,r,1);for(var i=0;i<t;i++)n[i]=e(i);return n},b.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var X={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},q=b.invert(X),Y=function(t){var e=function(e){return t[e]},r="(?:"+b.keys(t).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(i,e):t}};b.escape=Y(X),b.unescape=Y(q),b.result=function(t,e,r){b.isArray(e)||(e=[e]);var n=e.length;if(!n)return b.isFunction(r)?r.call(t):r;for(var i=0;i<n;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=r,i=n),t=b.isFunction(o)?o.call(t):o}return t};var K=0;b.uniqueId=function(t){var e=++K+"";return t?t+e:e},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var V=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Q=/\\|'|\r|\n|\u2028|\u2029/g,Z=function(t){return"\\"+H[t]};b.template=function(t,e,r){!e&&r&&(e=r),e=b.defaults({},e,b.templateSettings);var n,i=RegExp([(e.escape||V).source,(e.interpolate||V).source,(e.evaluate||V).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(i,function(e,r,n,i,u){return a+=t.slice(o,u).replace(Q,Z),o=u+e.length,r?a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?a+="'+\n((__t=("+n+"))==null?'':__t)+\n'":i&&(a+="';\n"+i+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{n=new Function(e.variable||"obj","_",a)}catch(t){throw t.source=a,t}var u=function(t){return n.call(this,t,b)},f=e.variable||"obj";return u.source="function("+f+"){\n"+a+"}",u},b.chain=function(t){var e=b(t);return e._chain=!0,e};var $=function(t,e){return t._chain?b(e).chain():e};b.mixin=function(t){return b.each(b.functions(t),function(e){var r=b[e]=t[e];b.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),$(this,r.apply(b,t))}}),b},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=a[t];b.prototype[t]=function(){var r=this._wrapped;return e.apply(r,arguments),"shift"!==t&&"splice"!==t||0!==r.length||delete r[0],$(this,r)}}),b.each(["concat","join","slice"],function(t){var e=a[t];b.prototype[t]=function(){return $(this,e.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return String(this._wrapped)},void 0===(n=function(){return b}.apply(e,[]))||(r.exports=n)}()}).call(this,r(10),r(37)(t))},29:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=void 0;var n=r(2);function i(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._translation=n.vec2.create(),this._bounds=e}return function(t,e,r){e&&o(t.prototype,e),r&&o(t,r)}(t,[{key:"centerAt",value:function(t,e){return this._translation.set([-(t-this._bounds.width/2),-(e-this._bounds.height/2)]),this}},{key:"translate",value:function(t,e){return n.vec2.sub(this._translation,this._translation,[t,e]),this}},{key:"position",get:function(){return n.vec2.clone(this._translation)}},{key:"translation",get:function(){return this.position}},{key:"matrix",get:function(){return n.mat4.fromTranslation(n.mat4.create(),n.vec4.fromValues.apply(n.vec4,i(this._translation).concat([0,1])))}}]),t}();e.Camera=a},31:function(t,e,r){(t.exports=r(24)(!1)).push([t.i,"html {\n    height: 100%;\n    background-color: #555;\n    color: #eee;\n    font-family: monospace;\n}\n\nbody {\n    padding: 0;\n    margin: 0;\n    height: 100%;\n}\n\n#content {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n}\n\ncanvas.game {\n    width: 100vw;\n    height: 100vh;\n}\n",""])},32:function(t,e,r){var n=r(31);"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0};r(23)(n,i);n.locals&&(t.exports=n.locals)},33:function(t,e){t.exports="#version 300 es\n\nprecision mediump float;\n\nout vec4 out_color;\n\nin vec2 v_tex_coord;\n\nuniform sampler2D texture;\n\nvoid main() {\n    float line = v_tex_coord.y - floor(v_tex_coord.y);\n\n    vec4 texel = texelFetch(texture, ivec2(v_tex_coord), 0).xyzw;\n    out_color = texel; //vec4(texel.xyz * (line >= 0.5 ? 1. : .25), texel.w);\n}\n"},34:function(t,e){t.exports="#version 300 es\n\nlayout(location = 0) in vec2 vertex;\nlayout(location = 1) in vec2 position;\nlayout(location = 2) in vec2 size;\nlayout(location = 3) in ivec2 texcoord;\nlayout(location = 4) in vec2 offset;\n\nout vec2 v_tex_coord;\n\nuniform mat4 projection;\n\n/*\n\nConvert coordinates from world space to clip space\n\n 1. Scale [0, dim] -> [-1, 1] where dim is screen width or height\n    dim pixels = 2 clip\n    clip / pixels = 2 / dim\n    x' = 2 * x / width - 1\n    y' = 2 * y / height - 1\n\n    2/w  0   0   -1\n     0  2/h  0   -1\n     0   0   1    0\n     0   0   0    1\n*/\n\nvoid main() {\n    vec4 transformed_position = projection * vec4(position + size * (vertex - offset), 0, 1);\n    gl_Position = transformed_position;\n    v_tex_coord = vec2(texcoord * ivec2(size));\n}\n"},35:function(t,e){WebGLDebugUtils=function(){var t=function(t){window.console&&window.console.error?window.console.error(t):function(t){window.console&&window.console.log&&window.console.log(t)}(t)},e={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},bindBuffer:{2:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}},bufferData:{3:{0:!0,2:!0},4:{0:!0,2:!0},5:{0:!0,2:!0}},bufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},copyBufferSubData:{5:{0:!0,1:!0}},getBufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},blitFramebuffer:{10:{8:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]},9:!0}},framebufferTextureLayer:{5:{0:!0,1:!0}},invalidateFramebuffer:{2:{0:!0}},invalidateSubFramebuffer:{6:{0:!0}},readBuffer:{1:{0:!0}},getInternalformatParameter:{3:{0:!0,1:!0,2:!0}},renderbufferStorageMultisample:{5:{0:!0,2:!0}},texStorage2D:{5:{0:!0,2:!0}},texStorage3D:{6:{0:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0},10:{0:!0,2:!0,6:!0,7:!0}},texImage3D:{10:{0:!0,2:!0,7:!0,8:!0},11:{0:!0,2:!0,7:!0,8:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0},10:{0:!0,6:!0,7:!0}},texSubImage3D:{11:{0:!0,8:!0,9:!0},12:{0:!0,8:!0,9:!0}},copyTexSubImage3D:{9:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0},8:{0:!0,2:!0},9:{0:!0,2:!0}},compressedTexImage3D:{8:{0:!0,2:!0},9:{0:!0,2:!0},10:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0},9:{0:!0,6:!0},10:{0:!0,6:!0}},compressedTexSubImage3D:{10:{0:!0,8:!0},11:{0:!0,8:!0},12:{0:!0,8:!0}},vertexAttribIPointer:{5:{2:!0}},drawArraysInstanced:{4:{0:!0}},drawElementsInstanced:{5:{0:!0,2:!0}},drawRangeElements:{6:{0:!0,4:!0}},readPixels:{7:{4:!0,5:!0},8:{4:!0,5:!0}},clearBufferfv:{3:{0:!0},4:{0:!0}},clearBufferiv:{3:{0:!0},4:{0:!0}},clearBufferuiv:{3:{0:!0},4:{0:!0}},clearBufferfi:{4:{0:!0}},beginQuery:{2:{0:!0}},endQuery:{1:{0:!0}},getQuery:{2:{0:!0,1:!0}},getQueryParameter:{2:{1:!0}},samplerParameteri:{3:{1:!0,2:!0}},samplerParameterf:{3:{1:!0}},getSamplerParameter:{2:{1:!0}},fenceSync:{2:{0:!0,1:{enumBitwiseOr:[]}}},clientWaitSync:{3:{1:{enumBitwiseOr:["SYNC_FLUSH_COMMANDS_BIT"]}}},waitSync:{3:{1:{enumBitwiseOr:[]}}},getSyncParameter:{2:{1:!0}},bindTransformFeedback:{2:{0:!0}},beginTransformFeedback:{1:{0:!0}},transformFeedbackVaryings:{3:{2:!0}},bindBufferBase:{3:{0:!0}},bindBufferRange:{5:{0:!0}},getIndexedParameter:{2:{0:!0}},getActiveUniforms:{3:{2:!0}},getActiveUniformBlockParameter:{3:{2:!0}}},r=null,n=null;function i(t){if(null==r)for(var e in r={},n={},t)"number"==typeof t[e]&&(r[t[e]]=e,n[e]=t[e])}function o(){if(null==r)throw"WebGLDebugUtils.init(ctx) not called"}function a(t){o();var e=r[t];return void 0!==e?"gl."+e:"/*UNKNOWN WebGL ENUM*/ 0x"+t.toString(16)}function u(t,r,i,o){var u;if(void 0!==(u=e[t])&&(void 0!==(u=u[r])&&u[i])){if("object"==typeof u[i]&&void 0!==u[i].enumBitwiseOr){for(var f=u[i].enumBitwiseOr,c=0,s=[],l=0;l<f.length;++l){var d=n[f[l]];0!=(o&d)&&(c|=d,s.push(a(d)))}return c===o?s.join(" | "):a(o)}return a(o)}return null===o?"null":void 0===o?"undefined":o.toString()}function f(t,e,r){t.__defineGetter__(r,function(){return e[r]}),t.__defineSetter__(r,function(t){e[r]=t})}function c(t){var e=!!t.createTransformFeedback;e&&t.bindVertexArray(null);var r=t.getParameter(t.MAX_VERTEX_ATTRIBS),n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n);for(var i=0;i<r;++i)t.disableVertexAttribArray(i),t.vertexAttribPointer(i,4,t.FLOAT,!1,0,0),t.vertexAttrib1f(i,0),e&&t.vertexAttribDivisor(i,0);t.deleteBuffer(n);var o=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);for(i=0;i<o;++i)t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_CUBE_MAP,null),t.bindTexture(t.TEXTURE_2D,null),e&&(t.bindTexture(t.TEXTURE_2D_ARRAY,null),t.bindTexture(t.TEXTURE_3D,null),t.bindSampler(i,null));if(t.activeTexture(t.TEXTURE0),t.useProgram(null),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.DITHER),t.disable(t.SCISSOR_TEST),t.blendColor(0,0,0,0),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.clearColor(0,0,0,0),t.clearDepth(1),t.clearStencil(-1),t.colorMask(!0,!0,!0,!0),t.cullFace(t.BACK),t.depthFunc(t.LESS),t.depthMask(!0),t.depthRange(0,1),t.frontFace(t.CCW),t.hint(t.GENERATE_MIPMAP_HINT,t.DONT_CARE),t.lineWidth(1),t.pixelStorei(t.PACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.UNPACK_COLORSPACE_CONVERSION_WEBGL&&t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.BROWSER_DEFAULT_WEBGL),t.polygonOffset(0,0),t.sampleCoverage(1,!1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilMask(4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT),e){t.drawBuffers([t.BACK]),t.readBuffer(t.BACK),t.bindBuffer(t.COPY_READ_BUFFER,null),t.bindBuffer(t.COPY_WRITE_BUFFER,null),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindBuffer(t.PIXEL_UNPACK_BUFFER,null);var a=t.getParameter(t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS);for(i=0;i<a;++i)t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,i,null);var u=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);for(i=0;i<u;++i)t.bindBufferBase(t.UNIFORM_BUFFER,i,null);t.disable(t.RASTERIZER_DISCARD),t.pixelStorei(t.UNPACK_IMAGE_HEIGHT,0),t.pixelStorei(t.UNPACK_SKIP_IMAGES,0),t.pixelStorei(t.UNPACK_ROW_LENGTH,0),t.pixelStorei(t.UNPACK_SKIP_ROWS,0),t.pixelStorei(t.UNPACK_SKIP_PIXELS,0),t.pixelStorei(t.PACK_ROW_LENGTH,0),t.pixelStorei(t.PACK_SKIP_ROWS,0),t.pixelStorei(t.PACK_SKIP_PIXELS,0),t.hint(t.FRAGMENT_SHADER_DERIVATIVE_HINT,t.DONT_CARE)}for(;t.getError(););}return{init:i,mightBeEnum:function(t){return o(),void 0!==r[t]},glEnumToString:a,glFunctionArgToString:u,glFunctionArgsToString:function(t,e){for(var r="",n=e.length,i=0;i<n;++i)r+=(0==i?"":", ")+u(t,n,i,e[i]);return r},makeDebugContext:function e(r,n,o,c){c=c||r,i(r),n=n||function(e,r,n){for(var i="",o=n.length,f=0;f<o;++f)i+=(0==f?"":", ")+u(r,o,f,n[f]);t("WebGL error "+a(e)+" in "+r+"("+i+")")};var s={};function l(t,e){return function(){o&&o(e,arguments);var r=t[e].apply(t,arguments),i=c.getError();return 0!=i&&(s[i]=!0,n(i,e,arguments)),r}}var d={};for(var h in r)if("function"==typeof r[h])if("getExtension"!=h)d[h]=l(r,h);else{var p=l(r,h);d[h]=function(){var t=p.apply(r,arguments);return t?e(t,n,o,c):null}}else f(d,r,h);return d.getError=function(){for(var t in s)if(s.hasOwnProperty(t)&&s[t])return s[t]=!1,t;return r.NO_ERROR},d},makeLostContextSimulatingCanvas:function(t){var e,r,n=[],i=[],o={},a=1,u=!1,s=[],l=0,d=0,h=!1,p=0,m={};function v(t){return"function"==typeof t?t:function(e){t.handleEvent(e)}}t.getContext=function(n){return function(){var i=n.apply(t,arguments);if(i instanceof WebGLRenderingContext||window.WebGL2RenderingContext&&i instanceof WebGL2RenderingContext){if(i!=e){if(e)throw"got different context";r=window.WebGL2RenderingContext&&i instanceof WebGL2RenderingContext,o=function(t){for(var n in t)"function"==typeof t[n]?o[n]=x(t,n):f(o,t,n);o.getError=function(){if(g(),!u)for(;t=e.getError();)m[t]=!0;for(var t in m)if(m[t])return delete m[t],t;return o.NO_ERROR};var i=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"];r&&i.push("createQuery","createSampler","fenceSync","createTransformFeedback","createVertexArray");for(var c=0;c<i.length;++c){var l=i[c];o[l]=function(e){return function(){if(g(),u)return null;var r=e.apply(t,arguments);return r.__webglDebugContextLostId__=a,s.push(r),r}}(t[l])}var d=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];r&&d.push("getInternalformatParameter","getQuery","getQueryParameter","getSamplerParameter","getSyncParameter","getTransformFeedbackVarying","getIndexedParameter","getUniformIndices","getActiveUniforms","getActiveUniformBlockParameter","getActiveUniformBlockName");for(var c=0;c<d.length;++c){var l=d[c];o[l]=function(e){return function(){return g(),u?null:e.apply(t,arguments)}}(o[l])}var h=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];r&&h.push("isQuery","isSampler","isSync","isTransformFeedback","isVertexArray");for(var c=0;c<h.length;++c){var l=h[c];o[l]=function(e){return function(){return g(),!u&&e.apply(t,arguments)}}(o[l])}return o.checkFramebufferStatus=function(e){return function(){return g(),u?o.FRAMEBUFFER_UNSUPPORTED:e.apply(t,arguments)}}(o.checkFramebufferStatus),o.getAttribLocation=function(e){return function(){return g(),u?-1:e.apply(t,arguments)}}(o.getAttribLocation),o.getVertexAttribOffset=function(e){return function(){return g(),u?0:e.apply(t,arguments)}}(o.getVertexAttribOffset),o.isContextLost=function(){return u},r&&(o.getFragDataLocation=function(e){return function(){return g(),u?-1:e.apply(t,arguments)}}(o.getFragDataLocation),o.clientWaitSync=function(e){return function(){return g(),u?o.WAIT_FAILED:e.apply(t,arguments)}}(o.clientWaitSync),o.getUniformBlockIndex=function(e){return function(){return g(),u?o.INVALID_INDEX:e.apply(t,arguments)}}(o.getUniformBlockIndex)),o}(e=i)}return o}return i}}(t.getContext);var b=function(t){n.push(v(t))},y=function(t){i.push(v(t))};function g(){++d,u||l==d&&t.loseContext()}function x(t,e){var r=t[e];return function(){if(g(),!u)return r.apply(t,arguments)}}function E(t){return{statusMessage:t,preventDefault:function(){h=!0}}}return function(t){var e=t.addEventListener;t.addEventListener=function(r,n,i){switch(r){case"webglcontextlost":b(n);break;case"webglcontextrestored":y(n);break;default:e.apply(t,arguments)}}}(t),t.loseContext=function(){if(!u){for(u=!0,l=0,++a;e.getError(););!function(){for(var t=Object.keys(m),e=0;e<t.length;++e)delete m[t[e]]}(),m[e.CONTEXT_LOST_WEBGL]=!0;var r=E("context lost"),i=n.slice();setTimeout(function(){for(var e=0;e<i.length;++e)i[e](r);p>=0&&setTimeout(function(){t.restoreContext()},p)},0)}},t.restoreContext=function(){u&&i.length&&setTimeout(function(){if(!h)throw"can not restore. webglcontestlost listener did not call event.preventDefault";!function(){for(var t=0;t<s.length;++t){var n=s[t];n instanceof WebGLBuffer?e.deleteBuffer(n):n instanceof WebGLFramebuffer?e.deleteFramebuffer(n):n instanceof WebGLProgram?e.deleteProgram(n):n instanceof WebGLRenderbuffer?e.deleteRenderbuffer(n):n instanceof WebGLShader?e.deleteShader(n):n instanceof WebGLTexture?e.deleteTexture(n):r&&(n instanceof WebGLQuery?e.deleteQuery(n):n instanceof WebGLSampler?e.deleteSampler(n):n instanceof WebGLSync?e.deleteSync(n):n instanceof WebGLTransformFeedback?e.deleteTransformFeedback(n):n instanceof WebGLVertexArrayObject&&e.deleteVertexArray(n))}}(),c(e),u=!1,d=0,h=!1;for(var t=i.slice(),n=E("context restored"),o=0;o<t.length;++o)t[o](n)},0)},t.loseContextInNCalls=function(t){if(u)throw"You can not ask a lost contet to be lost";l=d+t},t.getNumCalls=function(){return d},t.setRestoreTimeout=function(t){p=t},t},resetToInitialState:c}}()},36:function(t,e,r){
/*!
 * @license twgl.js 4.4.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */
!function(e,r){t.exports=r()}("undefined"!=typeof self&&self,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=9)}([function(t,e,r){"use strict";e.__esModule=!0,e.copyExistingProperties=function(t,e){Object.keys(e).forEach(function(r){e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&(e[r]=t[r])})},e.copyNamedProperties=function(t,e,r){t.forEach(function(t){var n=e[t];void 0!==n&&(r[t]=n)})},e.isBuffer=function(t,e){o||(o=t.createBuffer());return e instanceof o.constructor},e.isRenderbuffer=function(t,e){a||(a=t.createRenderbuffer());return e instanceof a.constructor},e.isShader=function(t,e){u||(u=t.createShader(t.VERTEX_SHADER));return e instanceof u.constructor},e.isTexture=function(t,e){f||(f=t.createTexture());return e instanceof f.constructor},e.isSampler=function(t,e){if(!c){if(!t.createSampler)return!1;c=t.createSampler()}return e instanceof c.constructor},e.warn=e.error=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(2));var i=n.default.console&&n.default.console.error&&"function"==typeof n.default.console.error?n.default.console.error.bind(n.default.console):function(){};e.error=i;var o,a,u,f,c,s=n.default.console&&n.default.console.warn&&"function"==typeof n.default.console.warn?n.default.console.warn.bind(n.default.console):function(){};e.warn=s},function(t,e,r){"use strict";e.__esModule=!0,e.getGLTypeForTypedArray=function(t){if(t instanceof Int8Array)return i;if(t instanceof Uint8Array)return o;if(t instanceof Uint8ClampedArray)return o;if(t instanceof Int16Array)return a;if(t instanceof Uint16Array)return u;if(t instanceof Int32Array)return f;if(t instanceof Uint32Array)return c;if(t instanceof Float32Array)return s;throw"unsupported typed array type"},e.getGLTypeForTypedArrayType=function(t){if(t===Int8Array)return i;if(t===Uint8Array)return o;if(t===Uint8ClampedArray)return o;if(t===Int16Array)return a;if(t===Uint16Array)return u;if(t===Int32Array)return f;if(t===Uint32Array)return c;if(t===Float32Array)return s;throw"unsupported typed array type"},e.getTypedArrayTypeForGLType=function(t){var e=l[t];if(!e)throw"unknown gl type";return e},e.isArrayBuffer=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(2));var i=5120,o=5121,a=5122,u=5123,f=5124,c=5125,s=5126,l={},d=l;d[i]=Int8Array,d[o]=Uint8Array,d[a]=Int16Array,d[u]=Uint16Array,d[f]=Int32Array,d[c]=Uint32Array,d[s]=Float32Array,d[32819]=Uint16Array,d[32820]=Uint16Array,d[33635]=Uint16Array,d[5131]=Uint16Array,d[33640]=Uint32Array,d[35899]=Uint32Array,d[35902]=Uint32Array,d[36269]=Uint32Array,d[34042]=Uint32Array;var h=n.default.SharedArrayBuffer?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof n.default.SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};e.isArrayBuffer=h},function(t,e,r){"use strict";e.__esModule=!0,e.default=void 0;var n=void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};e.default=n},function(t,e,r){"use strict";e.__esModule=!0,e.add=function(t,e,r){return(r=r||new n(3))[0]=t[0]+e[0],r[1]=t[1]+e[1],r[2]=t[2]+e[2],r},e.copy=function(t,e){return(e=e||new n(3))[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.create=function(t,e,r){var i=new n(3);t&&(i[0]=t);e&&(i[1]=e);r&&(i[2]=r);return i},e.cross=function(t,e,r){r=r||new n(3);var i=t[2]*e[0]-t[0]*e[2],o=t[0]*e[1]-t[1]*e[0];return r[0]=t[1]*e[2]-t[2]*e[1],r[1]=i,r[2]=o,r},e.distance=function(t,e){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)},e.distanceSq=function(t,e){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i},e.divide=function(t,e,r){return(r=r||new n(3))[0]=t[0]/e[0],r[1]=t[1]/e[1],r[2]=t[2]/e[2],r},e.divScalar=function(t,e,r){return(r=r||new n(3))[0]=t[0]/e,r[1]=t[1]/e,r[2]=t[2]/e,r},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},e.lerp=function(t,e,r,i){return(i=i||new n(3))[0]=(1-r)*t[0]+r*e[0],i[1]=(1-r)*t[1]+r*e[1],i[2]=(1-r)*t[2]+r*e[2],i},e.length=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])},e.lengthSq=function(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},e.mulScalar=function(t,e,r){return(r=r||new n(3))[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r},e.multiply=function(t,e,r){return(r=r||new n(3))[0]=t[0]*e[0],r[1]=t[1]*e[1],r[2]=t[2]*e[2],r},e.negate=function(t,e){return(e=e||new n(3))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},e.normalize=function(t,e){e=e||new n(3);var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=Math.sqrt(r);i>1e-5?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=0,e[1]=0,e[2]=0);return e},e.setDefaultType=function(t){var e=n;return n=t,e},e.subtract=function(t,e,r){return(r=r||new n(3))[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r};var n=Float32Array},function(t,e,r){"use strict";e.__esModule=!0,e.isWebGL1=function(t){return!t.texStorage2D},e.isWebGL2=function(t){return!!t.texStorage2D},e.glEnumToString=void 0;var n=function(){var t={},e={};return function(r,n){return function(r){var n=r.constructor.name;if(!t[n]){for(var i in r)if("number"==typeof r[i]){var o=e[r[i]];e[r[i]]=o?"".concat(o," | ").concat(i):i}t[n]=!0}}(r),e[n]||"0x"+n.toString(16)}}();e.glEnumToString=n},function(t,e,r){"use strict";e.__esModule=!0,e.createAttributeSetters=G,e.createProgram=I,e.createProgramFromScripts=function(t,e,r,n,i){for(var o=w(r,n,i),a=[],u=0;u<e.length;++u){var f=S(t,e[u],t[R[u]],o.errorCallback);if(!f)return null;a.push(f)}return I(t,a,o)},e.createProgramFromSources=O,e.createProgramInfo=function(t,e,r,n,i){var o=w(r,n,i),a=!0;if(e=e.map(function(t){if(t.indexOf("\n")<0){var e=c(t);e?t=e.text:(o.errorCallback("no element with id: "+t),a=!1)}return t}),!a)return null;var u=O(t,e,o);if(!u)return null;return z(t,u)},e.createProgramInfoFromProgram=z,e.createUniformSetters=C,e.createUniformBlockSpecFromProgram=L,e.createUniformBlockInfoFromProgram=j,e.createUniformBlockInfo=function(t,e,r){return j(t,e.program,e.uniformBlockSpec,r)},e.createTransformFeedback=function(t,e,r){var n=t.createTransformFeedback();return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,n),t.useProgram(e.program),D(t,e,r),t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),function(t,e,r){for(var n in e.transformFeedbackInfo&&(e=e.transformFeedbackInfo),r.attribs&&(r=r.attribs),r){var i=e[n];i&&t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,i.index,null)}}(t,e,r),n},e.createTransformFeedbackInfo=U,e.bindTransformFeedbackInfo=D,e.setAttributes=W,e.setBuffersAndAttributes=function(t,e,r){r.vertexArrayObject?t.bindVertexArray(r.vertexArrayObject):(W(e.attribSetters||e,r.attribs),r.indices&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.indices))},e.setUniforms=function t(e,r){var n=e.uniformSetters||e;var i=arguments.length;for(var o=1;o<i;++o){var a=arguments[o];if(Array.isArray(a))for(var u=a.length,f=0;f<u;++f)t(n,a[f]);else for(var c in a){var s=n[c];s&&s(a[c])}}},e.setUniformBlock=function(t,e,r){N(t,e,r)&&t.bufferData(t.UNIFORM_BUFFER,r.array,t.DYNAMIC_DRAW)},e.setBlockUniforms=function(t,e){var r=t.uniforms;for(var n in e){var i=r[n];if(i){var o=e[n];o.length?i.set(o):i[0]=o}}},e.bindUniformBlock=N;var n=a(r(4)),i=a(r(0)),o=function(t){return t&&t.__esModule?t:{default:t}}(r(2));function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}var u=i.error,f=i.warn,c=o.default&&o.default.document&&o.default.document.getElementById?o.default.document.getElementById.bind(o.default.document):function(){return null},s={};function l(t,e){return s[e].bindPoint}function d(t,e){return function(r){t.uniform1i(e,r)}}function h(t,e){return function(r){t.uniform1iv(e,r)}}function p(t,e){return function(r){t.uniform2iv(e,r)}}function m(t,e){return function(r){t.uniform3iv(e,r)}}function v(t,e){return function(r){t.uniform4iv(e,r)}}function b(t,e,r,o){var a=l(0,e);return n.isWebGL2(t)?function(e){var n,u;i.isTexture(t,e)?(n=e,u=null):(n=e.texture,u=e.sampler),t.uniform1i(o,r),t.activeTexture(t.TEXTURE0+r),t.bindTexture(a,n),t.bindSampler(r,u)}:function(e){t.uniform1i(o,r),t.activeTexture(t.TEXTURE0+r),t.bindTexture(a,e)}}function y(t,e,r,o,a){for(var u=l(0,e),f=new Int32Array(a),c=0;c<a;++c)f[c]=r+c;return n.isWebGL2(t)?function(e){t.uniform1iv(o,f),e.forEach(function(e,n){var o,a;t.activeTexture(t.TEXTURE0+f[n]),i.isTexture(t,e)?(o=e,a=null):(o=e.texture,a=e.sampler),t.bindSampler(r,a),t.bindTexture(u,o)})}:function(e){t.uniform1iv(o,f),e.forEach(function(e,r){t.activeTexture(t.TEXTURE0+f[r]),t.bindTexture(u,e)})}}function g(t,e){return function(r){t.bindBuffer(t.ARRAY_BUFFER,r.buffer),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,r.numComponents||r.size,r.type||t.FLOAT,r.normalize||!1,r.stride||0,r.offset||0),void 0!==r.divisor&&t.vertexAttribDivisor(e,r.divisor)}}function x(t,e){return function(r){t.bindBuffer(t.ARRAY_BUFFER,r.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,r.numComponents||r.size,r.type||t.INT,r.stride||0,r.offset||0),void 0!==r.divisor&&t.vertexAttribDivisor(e,r.divisor)}}function E(t,e,r){var n=r.size,i=r.count;return function(r){t.bindBuffer(t.ARRAY_BUFFER,r.buffer);for(var o=r.size||r.numComponents||n,a=o/i,u=r.type||t.FLOAT,f=s[u].size*o,c=r.normalize||!1,l=r.offset||0,d=f/i,h=0;h<i;++h)t.enableVertexAttribArray(e+h),t.vertexAttribPointer(e+h,a,u,c,f,l+d*h),void 0!==r.divisor&&t.vertexAttribDivisor(e+h,r.divisor)}}s[5126]={Type:Float32Array,size:4,setter:function(t,e){return function(r){t.uniform1f(e,r)}},arraySetter:function(t,e){return function(r){t.uniform1fv(e,r)}}},s[35664]={Type:Float32Array,size:8,setter:function(t,e){return function(r){t.uniform2fv(e,r)}}},s[35665]={Type:Float32Array,size:12,setter:function(t,e){return function(r){t.uniform3fv(e,r)}}},s[35666]={Type:Float32Array,size:16,setter:function(t,e){return function(r){t.uniform4fv(e,r)}}},s[5124]={Type:Int32Array,size:4,setter:d,arraySetter:h},s[35667]={Type:Int32Array,size:8,setter:p},s[35668]={Type:Int32Array,size:12,setter:m},s[35669]={Type:Int32Array,size:16,setter:v},s[5125]={Type:Uint32Array,size:4,setter:function(t,e){return function(r){t.uniform1ui(e,r)}},arraySetter:function(t,e){return function(r){t.uniform1uiv(e,r)}}},s[36294]={Type:Uint32Array,size:8,setter:function(t,e){return function(r){t.uniform2uiv(e,r)}}},s[36295]={Type:Uint32Array,size:12,setter:function(t,e){return function(r){t.uniform3uiv(e,r)}}},s[36296]={Type:Uint32Array,size:16,setter:function(t,e){return function(r){t.uniform4uiv(e,r)}}},s[35670]={Type:Uint32Array,size:4,setter:d,arraySetter:h},s[35671]={Type:Uint32Array,size:8,setter:p},s[35672]={Type:Uint32Array,size:12,setter:m},s[35673]={Type:Uint32Array,size:16,setter:v},s[35674]={Type:Float32Array,size:16,setter:function(t,e){return function(r){t.uniformMatrix2fv(e,!1,r)}}},s[35675]={Type:Float32Array,size:36,setter:function(t,e){return function(r){t.uniformMatrix3fv(e,!1,r)}}},s[35676]={Type:Float32Array,size:64,setter:function(t,e){return function(r){t.uniformMatrix4fv(e,!1,r)}}},s[35685]={Type:Float32Array,size:24,setter:function(t,e){return function(r){t.uniformMatrix2x3fv(e,!1,r)}}},s[35686]={Type:Float32Array,size:32,setter:function(t,e){return function(r){t.uniformMatrix2x4fv(e,!1,r)}}},s[35687]={Type:Float32Array,size:24,setter:function(t,e){return function(r){t.uniformMatrix3x2fv(e,!1,r)}}},s[35688]={Type:Float32Array,size:48,setter:function(t,e){return function(r){t.uniformMatrix3x4fv(e,!1,r)}}},s[35689]={Type:Float32Array,size:32,setter:function(t,e){return function(r){t.uniformMatrix4x2fv(e,!1,r)}}},s[35690]={Type:Float32Array,size:48,setter:function(t,e){return function(r){t.uniformMatrix4x3fv(e,!1,r)}}},s[35678]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:3553},s[35680]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:34067},s[35679]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:32879},s[35682]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:3553},s[36289]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:35866},s[36292]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:35866},s[36293]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:34067},s[36298]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:3553},s[36299]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:32879},s[36300]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:34067},s[36303]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:35866},s[36306]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:3553},s[36307]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:32879},s[36308]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:34067},s[36311]={Type:null,size:0,setter:b,arraySetter:y,bindPoint:35866};var _={};_[5126]={size:4,setter:g},_[35664]={size:8,setter:g},_[35665]={size:12,setter:g},_[35666]={size:16,setter:g},_[5124]={size:4,setter:x},_[35667]={size:8,setter:x},_[35668]={size:12,setter:x},_[35669]={size:16,setter:x},_[5125]={size:4,setter:x},_[36294]={size:8,setter:x},_[36295]={size:12,setter:x},_[36296]={size:16,setter:x},_[35670]={size:4,setter:x},_[35671]={size:8,setter:x},_[35672]={size:12,setter:x},_[35673]={size:16,setter:x},_[35674]={size:4,setter:E,count:2},_[35675]={size:9,setter:E,count:3},_[35676]={size:16,setter:E,count:4};var M=void 0;var A=/^[ \t]*\n/;function T(t,e,r,n){var i=n||u,o=t.createShader(r),a=0;if(A.test(e)&&(a=1,e=e.replace(A,"")),t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS)){var f=t.getShaderInfoLog(o);return i(function(t,e){return e=e||0,++e,t.split("\n").map(function(t,r){return r+e+": "+t}).join("\n")}(e,a)+"\n*** Error compiling shader: "+f),t.deleteShader(o),null}return o}function w(t,e,r){var n;if("function"==typeof e&&(r=e,e=void 0),"function"==typeof t)r=t,t=void 0;else if(t&&!Array.isArray(t)){if(t.errorCallback)return t;var i=t;r=i.errorCallback,t=i.attribLocations,n=i.transformFeedbackVaryings}var o={errorCallback:r||u,transformFeedbackVaryings:n};if(t){var a={};Array.isArray(t)?t.forEach(function(t,r){a[t]=e?e[r]:r}):a=t,o.attribLocations=a}return o}var R=["VERTEX_SHADER","FRAGMENT_SHADER"];function F(t){return t.indexOf("frag")>=0?M.FRAGMENT_SHADER:t.indexOf("vert")>=0?M.VERTEX_SHADER:void 0}function P(t,e){e.forEach(function(e){t.deleteShader(e)})}function I(t,e,r,n,o){for(var a=w(r,n,o),u=[],f=[],s=0;s<e.length;++s){var l=e[s];if("string"==typeof l){var d=c(l),h=d?d.text:l,p=t[R[s]];d&&d.type&&(p=F(d.type)||p),l=T(t,h,p,a.errorCallback),f.push(l)}i.isShader(t,l)&&u.push(l)}if(u.length!==e.length)return a.errorCallback("not enough shaders for program"),P(t,f),null;var m=t.createProgram();u.forEach(function(e){t.attachShader(m,e)}),a.attribLocations&&Object.keys(a.attribLocations).forEach(function(e){t.bindAttribLocation(m,a.attribLocations[e],e)});var v=a.transformFeedbackVaryings;if(v&&(v.attribs&&(v=v.attribs),Array.isArray(v)||(v=Object.keys(v)),t.transformFeedbackVaryings(m,v,a.transformFeedbackMode||t.SEPARATE_ATTRIBS)),t.linkProgram(m),!t.getProgramParameter(m,t.LINK_STATUS)){var b=t.getProgramInfoLog(m);return a.errorCallback("Error in program linking:"+b),t.deleteProgram(m),P(t,f),null}return m}function S(t,e,r,n){var i,o=c(e);if(!o)throw"*** Error: unknown script element"+e;i=o.text;var a=r||F(o.type);if(!a)throw"*** Error: unknown shader type";return T(t,i,a,n)}function O(t,e,r,n,i){for(var o=w(r,n,i),a=[],u=0;u<e.length;++u){var f=T(t,e[u],t[R[u]],o.errorCallback);if(!f)return null;a.push(f)}return I(t,a,o)}function B(t){var e=t.name;return e.startsWith("gl_")||e.startsWith("webgl_")}function C(t,e){var r=0;function n(e,n){var i,o=t.getUniformLocation(e,n.name),a=n.size>1&&"[0]"===n.name.substr(-3),u=n.type,f=s[u];if(!f)throw"unknown type: 0x"+u.toString(16);if(f.bindPoint){var c=r;r+=n.size,i=a?f.arraySetter(t,u,c,o,n.size):f.setter(t,u,c,o,n.size)}else i=f.arraySetter&&a?f.arraySetter(t,o):f.setter(t,o);return i.location=o,i}for(var i={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),a=0;a<o;++a){var u=t.getActiveUniform(e,a);if(!B(u)){var f=u.name;"[0]"===f.substr(-3)&&(f=f.substr(0,f.length-3));var c=n(e,u);i[f]=c}}return i}function U(t,e){for(var r={},n=t.getProgramParameter(e,t.TRANSFORM_FEEDBACK_VARYINGS),i=0;i<n;++i){var o=t.getTransformFeedbackVarying(e,i);r[o.name]={index:i,type:o.type,size:o.size}}return r}function D(t,e,r){for(var n in e.transformFeedbackInfo&&(e=e.transformFeedbackInfo),r.attribs&&(r=r.attribs),r){var i=e[n];if(i){var o=r[n];o.offset?t.bindBufferRange(t.TRANSFORM_FEEDBACK_BUFFER,i.index,o.buffer,o.offset,o.size):t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,i.index,o.buffer)}}}function L(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=[],i=[],o=0;o<r;++o){i.push(o),n.push({});var a=t.getActiveUniform(e,o);if(B(a))break;n[o].name=a.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(r){var o=r[0],a=r[1];t.getActiveUniforms(e,i,t[o]).forEach(function(t,e){n[e][a]=t})});for(var u={},f=t.getProgramParameter(e,t.ACTIVE_UNIFORM_BLOCKS),c=0;c<f;++c){var s=t.getActiveUniformBlockName(e,c),l={index:c,usedByVertexShader:t.getActiveUniformBlockParameter(e,c,t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:t.getActiveUniformBlockParameter(e,c,t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:t.getActiveUniformBlockParameter(e,c,t.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:t.getActiveUniformBlockParameter(e,c,t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};l.used=l.usedByVertexSahder||l.usedByFragmentShader,u[s]=l}return{blockSpecs:u,uniformData:n}}var k=/\[\d+\]\.$/;function j(t,e,r,n){var i=r.blockSpecs,o=r.uniformData,a=i[n];if(!a)return f("no uniform block object named:",n),{name:n,uniforms:{}};var u=new ArrayBuffer(a.size),c=t.createBuffer(),l=a.index;t.bindBuffer(t.UNIFORM_BUFFER,c),t.uniformBlockBinding(e,a.index,l);var d=n+".";k.test(d)&&(d=d.replace(k,"."));var h={};return a.uniformIndices.forEach(function(t){var e=o[t],r=s[e.type],n=r.Type,i=e.size*r.size,a=e.name;a.substr(0,d.length)===d&&(a=a.substr(d.length)),h[a]=new n(u,e.offset,i/n.BYTES_PER_ELEMENT)}),{name:n,array:u,asFloat:new Float32Array(u),buffer:c,uniforms:h}}function N(t,e,r){var n=(e.uniformBlockSpec||e).blockSpecs[r.name];if(n){var i=n.index;return t.bindBufferRange(t.UNIFORM_BUFFER,i,r.buffer,r.offset||0,r.array.byteLength),!0}return!1}function G(t,e){for(var r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<n;++i){var o=t.getActiveAttrib(e,i);if(!B(o)){var a=t.getAttribLocation(e,o.name),u=_[o.type],f=u.setter(t,a,u);f.location=a,r[o.name]=f}}return r}function W(t,e){for(var r in e){var n=t[r];n&&n(e[r])}}function z(t,e){var r={program:e,uniformSetters:C(t,e),attribSetters:G(t,e)};return n.isWebGL2(t)&&(r.uniformBlockSpec=L(t,e),r.transformFeedbackInfo=U(t,e)),r}},function(t,e,r){"use strict";e.__esModule=!0,e.axisRotate=function(t,e,r,n){n=n||new i(16);var o=e[0],a=e[1],u=e[2],f=Math.sqrt(o*o+a*a+u*u),c=(o/=f)*o,s=(a/=f)*a,l=(u/=f)*u,d=Math.cos(r),h=Math.sin(r),p=1-d,m=c+(1-c)*d,v=o*a*p+u*h,b=o*u*p-a*h,y=o*a*p-u*h,g=s+(1-s)*d,x=a*u*p+o*h,E=o*u*p+a*h,_=a*u*p-o*h,M=l+(1-l)*d,A=t[0],T=t[1],w=t[2],R=t[3],F=t[4],P=t[5],I=t[6],S=t[7],O=t[8],B=t[9],C=t[10],U=t[11];n[0]=m*A+v*F+b*O,n[1]=m*T+v*P+b*B,n[2]=m*w+v*I+b*C,n[3]=m*R+v*S+b*U,n[4]=y*A+g*F+x*O,n[5]=y*T+g*P+x*B,n[6]=y*w+g*I+x*C,n[7]=y*R+g*S+x*U,n[8]=E*A+_*F+M*O,n[9]=E*T+_*P+M*B,n[10]=E*w+_*I+M*C,n[11]=E*R+_*S+M*U,t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]);return n},e.axisRotation=function(t,e,r){r=r||new i(16);var n=t[0],o=t[1],a=t[2],u=Math.sqrt(n*n+o*o+a*a),f=(n/=u)*n,c=(o/=u)*o,s=(a/=u)*a,l=Math.cos(e),d=Math.sin(e),h=1-l;return r[0]=f+(1-f)*l,r[1]=n*o*h+a*d,r[2]=n*a*h-o*d,r[3]=0,r[4]=n*o*h-a*d,r[5]=c+(1-c)*l,r[6]=o*a*h+n*d,r[7]=0,r[8]=n*a*h+o*d,r[9]=o*a*h-n*d,r[10]=s+(1-s)*l,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},e.copy=f,e.frustum=function(t,e,r,n,o,a,u){u=u||new i(16);var f=e-t,c=n-r,s=o-a;return u[0]=2*o/f,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2*o/c,u[6]=0,u[7]=0,u[8]=(t+e)/f,u[9]=(n+r)/c,u[10]=a/s,u[11]=-1,u[12]=0,u[13]=0,u[14]=o*a/s,u[15]=0,u},e.getAxis=function(t,e,r){r=r||n.create();var i=4*e;return r[0]=t[i+0],r[1]=t[i+1],r[2]=t[i+2],r},e.getTranslation=function(t,e){return(e=e||n.create())[0]=t[12],e[1]=t[13],e[2]=t[14],e},e.identity=c,e.inverse=s,e.lookAt=function(t,e,r,f){f=f||new i(16);var c=o,s=a,l=u;return n.normalize(n.subtract(t,e,l),l),n.normalize(n.cross(r,l,c),c),n.normalize(n.cross(l,c,s),s),f[0]=c[0],f[1]=c[1],f[2]=c[2],f[3]=0,f[4]=s[0],f[5]=s[1],f[6]=s[2],f[7]=0,f[8]=l[0],f[9]=l[1],f[10]=l[2],f[11]=0,f[12]=t[0],f[13]=t[1],f[14]=t[2],f[15]=1,f},e.multiply=function(t,e,r){r=r||new i(16);var n=t[0],o=t[1],a=t[2],u=t[3],f=t[4],c=t[5],s=t[6],l=t[7],d=t[8],h=t[9],p=t[10],m=t[11],v=t[12],b=t[13],y=t[14],g=t[15],x=e[0],E=e[1],_=e[2],M=e[3],A=e[4],T=e[5],w=e[6],R=e[7],F=e[8],P=e[9],I=e[10],S=e[11],O=e[12],B=e[13],C=e[14],U=e[15];return r[0]=n*x+f*E+d*_+v*M,r[1]=o*x+c*E+h*_+b*M,r[2]=a*x+s*E+p*_+y*M,r[3]=u*x+l*E+m*_+g*M,r[4]=n*A+f*T+d*w+v*R,r[5]=o*A+c*T+h*w+b*R,r[6]=a*A+s*T+p*w+y*R,r[7]=u*A+l*T+m*w+g*R,r[8]=n*F+f*P+d*I+v*S,r[9]=o*F+c*P+h*I+b*S,r[10]=a*F+s*P+p*I+y*S,r[11]=u*F+l*P+m*I+g*S,r[12]=n*O+f*B+d*C+v*U,r[13]=o*O+c*B+h*C+b*U,r[14]=a*O+s*B+p*C+y*U,r[15]=u*O+l*B+m*C+g*U,r},e.negate=function(t,e){return(e=e||new i(16))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e[11]=-t[11],e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=-t[15],e},e.ortho=function(t,e,r,n,o,a,u){return(u=u||new i(16))[0]=2/(e-t),u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2/(n-r),u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2/(o-a),u[11]=0,u[12]=(e+t)/(t-e),u[13]=(n+r)/(r-n),u[14]=(a+o)/(o-a),u[15]=1,u},e.perspective=function(t,e,r,n,o){o=o||new i(16);var a=Math.tan(.5*Math.PI-.5*t),u=1/(r-n);return o[0]=a/e,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(r+n)*u,o[11]=-1,o[12]=0,o[13]=0,o[14]=r*n*u*2,o[15]=0,o},e.rotateX=function(t,e,r){r=r||new i(16);var n=t[4],o=t[5],a=t[6],u=t[7],f=t[8],c=t[9],s=t[10],l=t[11],d=Math.cos(e),h=Math.sin(e);r[4]=d*n+h*f,r[5]=d*o+h*c,r[6]=d*a+h*s,r[7]=d*u+h*l,r[8]=d*f-h*n,r[9]=d*c-h*o,r[10]=d*s-h*a,r[11]=d*l-h*u,t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]);return r},e.rotateY=function(t,e,r){r=r||new i(16);var n=t[0],o=t[1],a=t[2],u=t[3],f=t[8],c=t[9],s=t[10],l=t[11],d=Math.cos(e),h=Math.sin(e);r[0]=d*n-h*f,r[1]=d*o-h*c,r[2]=d*a-h*s,r[3]=d*u-h*l,r[8]=d*f+h*n,r[9]=d*c+h*o,r[10]=d*s+h*a,r[11]=d*l+h*u,t!==r&&(r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]);return r},e.rotateZ=function(t,e,r){r=r||new i(16);var n=t[0],o=t[1],a=t[2],u=t[3],f=t[4],c=t[5],s=t[6],l=t[7],d=Math.cos(e),h=Math.sin(e);r[0]=d*n+h*f,r[1]=d*o+h*c,r[2]=d*a+h*s,r[3]=d*u+h*l,r[4]=d*f-h*n,r[5]=d*c-h*o,r[6]=d*s-h*a,r[7]=d*l-h*u,t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]);return r},e.rotationX=function(t,e){e=e||new i(16);var r=Math.cos(t),n=Math.sin(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.rotationY=function(t,e){e=e||new i(16);var r=Math.cos(t),n=Math.sin(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.rotationZ=function(t,e){e=e||new i(16);var r=Math.cos(t),n=Math.sin(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.scale=function(t,e,r){r=r||new i(16);var n=e[0],o=e[1],a=e[2];r[0]=n*t[0],r[1]=n*t[1],r[2]=n*t[2],r[3]=n*t[3],r[4]=o*t[4],r[5]=o*t[5],r[6]=o*t[6],r[7]=o*t[7],r[8]=a*t[8],r[9]=a*t[9],r[10]=a*t[10],r[11]=a*t[11],t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]);return r},e.scaling=function(t,e){return(e=e||new i(16))[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.setAxis=function(t,e,r,n){n!==t&&(n=f(t,n));var i=4*r;return n[i+0]=e[0],n[i+1]=e[1],n[i+2]=e[2],n},e.setDefaultType=function(t){var e=i;return i=t,e},e.setTranslation=function(t,e,r){r=r||c(),t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11]);return r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r},e.transformDirection=function(t,e,r){r=r||n.create();var i=e[0],o=e[1],a=e[2];return r[0]=i*t[0]+o*t[4]+a*t[8],r[1]=i*t[1]+o*t[5]+a*t[9],r[2]=i*t[2]+o*t[6]+a*t[10],r},e.transformNormal=function(t,e,r){r=r||n.create();var i=s(t),o=e[0],a=e[1],u=e[2];return r[0]=o*i[0]+a*i[1]+u*i[2],r[1]=o*i[4]+a*i[5]+u*i[6],r[2]=o*i[8]+a*i[9]+u*i[10],r},e.transformPoint=function(t,e,r){r=r||n.create();var i=e[0],o=e[1],a=e[2],u=i*t[3]+o*t[7]+a*t[11]+t[15];return r[0]=(i*t[0]+o*t[4]+a*t[8]+t[12])/u,r[1]=(i*t[1]+o*t[5]+a*t[9]+t[13])/u,r[2]=(i*t[2]+o*t[6]+a*t[10]+t[14])/u,r},e.translate=function(t,e,r){r=r||new i(16);var n=e[0],o=e[1],a=e[2],u=t[0],f=t[1],c=t[2],s=t[3],l=t[4],d=t[5],h=t[6],p=t[7],m=t[8],v=t[9],b=t[10],y=t[11],g=t[12],x=t[13],E=t[14],_=t[15];t!==r&&(r[0]=u,r[1]=f,r[2]=c,r[3]=s,r[4]=l,r[5]=d,r[6]=h,r[7]=p,r[8]=m,r[9]=v,r[10]=b,r[11]=y);return r[12]=u*n+l*o+m*a+g,r[13]=f*n+d*o+v*a+x,r[14]=c*n+h*o+b*a+E,r[15]=s*n+p*o+y*a+_,r},e.translation=function(t,e){return(e=e||new i(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},e.transpose=function(t,e){if((e=e||new i(16))===t){var r;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,e}var n=t[0],o=t[1],a=t[2],u=t[3],f=t[4],c=t[5],s=t[6],l=t[7],d=t[8],h=t[9],p=t[10],m=t[11],v=t[12],b=t[13],y=t[14],g=t[15];return e[0]=n,e[1]=f,e[2]=d,e[3]=v,e[4]=o,e[5]=c,e[6]=h,e[7]=b,e[8]=a,e[9]=s,e[10]=p,e[11]=y,e[12]=u,e[13]=l,e[14]=m,e[15]=g,e};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(r(3));var i=Float32Array,o=n.create(),a=n.create(),u=n.create();function f(t,e){return(e=e||new i(16))[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function c(t){return(t=t||new i(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function s(t,e){e=e||new i(16);var r=t[0],n=t[1],o=t[2],a=t[3],u=t[4],f=t[5],c=t[6],s=t[7],l=t[8],d=t[9],h=t[10],p=t[11],m=t[12],v=t[13],b=t[14],y=t[15],g=h*y,x=b*p,E=c*y,_=b*s,M=c*p,A=h*s,T=o*y,w=b*a,R=o*p,F=h*a,P=o*s,I=c*a,S=l*v,O=m*d,B=u*v,C=m*f,U=u*d,D=l*f,L=r*v,k=m*n,j=r*d,N=l*n,G=r*f,W=u*n,z=g*f+_*d+M*v-(x*f+E*d+A*v),X=x*n+T*d+F*v-(g*n+w*d+R*v),q=E*n+w*f+P*v-(_*n+T*f+I*v),Y=A*n+R*f+I*d-(M*n+F*f+P*d),K=1/(r*z+u*X+l*q+m*Y);return e[0]=K*z,e[1]=K*X,e[2]=K*q,e[3]=K*Y,e[4]=K*(x*u+E*l+A*m-(g*u+_*l+M*m)),e[5]=K*(g*r+w*l+R*m-(x*r+T*l+F*m)),e[6]=K*(_*r+T*u+I*m-(E*r+w*u+P*m)),e[7]=K*(M*r+F*u+P*l-(A*r+R*u+I*l)),e[8]=K*(S*s+C*p+U*y-(O*s+B*p+D*y)),e[9]=K*(O*a+L*p+N*y-(S*a+k*p+j*y)),e[10]=K*(B*a+k*s+G*y-(C*a+L*s+W*y)),e[11]=K*(D*a+j*s+W*p-(U*a+N*s+G*p)),e[12]=K*(B*h+D*b+O*c-(U*b+S*c+C*h)),e[13]=K*(j*b+S*o+k*h-(L*h+N*b+O*o)),e[14]=K*(L*c+W*b+C*o-(G*b+B*o+k*c)),e[15]=K*(G*h+U*o+N*c-(j*c+W*h+D*o)),e}},function(t,e,r){"use strict";e.__esModule=!0,e.createAttribsFromArrays=v,e.createBuffersFromArrays=function(t,e){var r={};Object.keys(e).forEach(function(n){r[n]=y(t,e[n],n)}),e.indices?(r.numElements=e.indices.length,r.elementType=n.getGLTypeForTypedArray(m(e.indices),"indices")):r.numElements=function(t){for(var e,r=0;r<b.length&&!((e=b[r])in t);++r);ii===b.length&&(e=Object.keys(t)[0]);var n=t[e],i=s(n).length,o=p(n,e),a=i/o;if(i%o>0)throw"numComponents "+o+" not correct for length "+i;return a}(e);return r},e.createBufferFromArray=y,e.createBufferFromTypedArray=f,e.createBufferInfoFromArrays=function(t,e){var r={attribs:v(t,e)},i=e.indices;if(i){var o=m(i,"indices");r.indices=f(t,o,t.ELEMENT_ARRAY_BUFFER),r.numElements=o.length,r.elementType=n.getGLTypeForTypedArray(o)}else r.numElements=function(t,e){var r,n;for(n=0;n<b.length&&!((r=b[n])in e)&&!((r=a.attribPrefix+r)in e);++n);n===b.length&&(r=Object.keys(e)[0]);var i=e[r];t.bindBuffer(t.ARRAY_BUFFER,i.buffer);var o=t.getBufferParameter(t.ARRAY_BUFFER,t.BUFFER_SIZE);t.bindBuffer(t.ARRAY_BUFFER,null);var u=function(t,e){return e===t.BYTE?1:e===t.UNSIGNED_BYTE?1:e===t.SHORT?2:e===t.UNSIGNED_SHORT?2:e===t.INT?4:e===t.UNSIGNED_INT?4:e===t.FLOAT?4:0}(t,i.type),f=o/u,c=i.numComponents||i.size,s=f/c;if(s%1!=0)throw"numComponents "+c+" not correct for length "+length;return s}(t,r.attribs);return r},e.setAttribInfoBufferFromArray=function(t,e,r,n){r=m(r),void 0!==n?(t.bindBuffer(t.ARRAY_BUFFER,e.buffer),t.bufferSubData(t.ARRAY_BUFFER,n,r)):u(t,t.ARRAY_BUFFER,e.buffer,r,e.drawType)},e.setAttributePrefix=function(t){a.attribPrefix=t},e.setAttributeDefaults_=function(t){i.copyExistingProperties(t,a)},e.getNumComponents_=p,e.getArray_=s;var n=o(r(1)),i=o(r(0));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}var a={attribPrefix:""};function u(t,e,r,n,i){t.bindBuffer(e,r),t.bufferData(e,n,i||t.STATIC_DRAW)}function f(t,e,r,n){if(i.isBuffer(t,e))return e;r=r||t.ARRAY_BUFFER;var o=t.createBuffer();return u(t,r,o,e,n),o}function c(t){return"indices"===t}function s(t){return t.length?t:t.data}var l=/coord|texture/i,d=/color|colour/i;function h(t,e){var r;if(e%(r=l.test(t)?2:d.test(t)?4:3)>0)throw"Can not guess numComponents for attribute '"+t+"'. Tried "+r+" but "+e+" values is not evenly divisible by "+r+". You should specify it.";return r}function p(t,e){return t.numComponents||t.size||h(e,s(t).length)}function m(t,e){if(n.isArrayBuffer(t))return t;if(n.isArrayBuffer(t.data))return t.data;Array.isArray(t)&&(t={data:t});var r=t.type;return r||(r=c(e)?Uint16Array:Float32Array),new r(t.data)}function v(t,e){var r={};return Object.keys(e).forEach(function(i){if(!c(i)){var o,u,s,l,d,v=e[i],b=v.attrib||v.name||v.attribName||a.attribPrefix+i;if("number"==typeof v||"number"==typeof v.data){d=v.data||v;var y=v.type||Float32Array,g=d*y.BYTES_PER_ELEMENT;u=n.getGLTypeForTypedArrayType(y),s=void 0!==v.normalize?v.normalize:function(t){return t===Int8Array||t===Uint8Array}(y),l=v.numComponents||v.size||h(i,d),o=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,g,v.drawType||t.STATIC_DRAW)}else{var x=m(v,i);o=f(t,x,void 0,v.drawType),u=n.getGLTypeForTypedArray(x),s=void 0!==v.normalize?v.normalize:function(t){return t instanceof Int8Array||t instanceof Uint8Array}(x),l=p(v,i),d=x.length}r[b]={buffer:o,numComponents:l,type:u,normalize:s,stride:v.stride||0,offset:v.offset||0,divisor:void 0===v.divisor?void 0:v.divisor,drawType:v.drawType}}}),t.bindBuffer(t.ARRAY_BUFFER,null),r}var b=["position","positions","a_position"];function y(t,e,r){var n="indices"===r?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER;return f(t,m(e,r),n)}},function(t,e,r){"use strict";e.__esModule=!0,e.setTextureDefaults_=function(t){o.copyExistingProperties(t,f),t.textureColor&&_(t.textureColor)},e.createSampler=S,e.createSamplers=function(t,e){var r={};return Object.keys(e).forEach(function(n){r[n]=S(t,e[n])}),r},e.setSamplerParameters=I,e.createTexture=Y,e.setEmptyTexture=q,e.setTextureFromArray=X,e.loadTextureFromUrl=G,e.setTextureFromElement=D,e.setTextureFilteringForSize=O,e.setTextureParameters=P,e.setDefaultTextureColor=_,e.createTextures=function(t,e,r){r=r||L;var n=0,i=[],o={},a={};function u(){0===n&&setTimeout(function(){r(i.length?i:void 0,o,a)},0)}return Object.keys(e).forEach(function(r){var f,c=e[r];(function(t){return"string"==typeof t||Array.isArray(t)&&"string"==typeof t[0]})(c.src)&&(f=function(t,e,o){a[r]=o,--n,t&&i.push(t),u()},++n),o[r]=Y(t,c,f)}),u(),o},e.resizeTexture=function(t,e,r,n,i){n=n||r.width,i=i||r.height;var o=r.target||t.TEXTURE_2D;t.bindTexture(o,e);var a,u=r.level||0,f=r.internalFormat||r.format||t.RGBA,s=y(f),l=r.format||s.format,d=r.src;a=d&&(c(d)||Array.isArray(d)&&"number"==typeof d[0])?r.type||x(t,d,s.type):r.type||s.type;if(o===t.TEXTURE_CUBE_MAP)for(var h=0;h<6;++h)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+h,u,f,n,i,0,l,a,null);else t.texImage2D(o,u,f,n,i,0,l,a,null)},e.getNumComponentsForFormat=function(t){var e=h[t];if(!e)throw"unknown format: "+t;return e.numColorComponents},e.getBytesPerElementForInternalFormat=b;var n=u(r(4)),i=u(r(1)),o=u(r(0)),a=function(t){return t&&t.__esModule?t:{default:t}}(r(2));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}var f={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},c=i.isArrayBuffer,s=a.default.document&&a.default.document.createElement?a.default.document.createElement("canvas").getContext("2d"):null,l=6407,d=33319,h={},p=h;p[6406]={numColorComponents:1},p[6409]={numColorComponents:1},p[6410]={numColorComponents:2},p[l]={numColorComponents:3},p[6408]={numColorComponents:4},p[6403]={numColorComponents:1},p[36244]={numColorComponents:1},p[d]={numColorComponents:2},p[33320]={numColorComponents:2},p[l]={numColorComponents:3},p[36248]={numColorComponents:3},p[6408]={numColorComponents:4},p[36249]={numColorComponents:4},p[6402]={numColorComponents:1},p[34041]={numColorComponents:2};var m={},v=m;function b(t,e){var r=m[t];if(!r)throw"unknown internal format";var n=r.bytesPerElementMap[e];if(void 0===n)throw"unknown internal format";return n}function y(t){var e=m[t];if(!e)throw"unknown internal format";return{format:e.textureFormat,type:Array.isArray(e.type)?e.type[0]:e.type}}function g(t){return 0==(t&t-1)}function x(t,e,r){return c(e)?i.getGLTypeForTypedArray(e):r||t.UNSIGNED_BYTE}function E(t,e,r,n,i){if(i%1!=0)throw"can't guess dimensions";if(r||n){if(n){if(!r&&(r=i/n)%1)throw"can't guess dimensions"}else if((n=i/r)%1)throw"can't guess dimensions"}else{var o=Math.sqrt(i/(e===t.TEXTURE_CUBE_MAP?6:1));o%1==0?(r=o,n=o):(r=i,n=1)}return{width:r,height:n}}function _(t){f.textureColor=new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}v[6406]={textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},v[6409]={textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},v[6410]={textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[5121,5131,36193,5126]},v[l]={textureFormat:l,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},v[6408]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},v[33321]={textureFormat:6403,colorRenderable:!0,textureFilterable:!0,bytesPerElement:1,type:5121},v[36756]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:1,type:5120},v[33325]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[5126,5131]},v[33326]={textureFormat:6403,colorRenderable:!1,textureFilterable:!1,bytesPerElement:4,type:5126},v[33330]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:1,type:5121},v[33329]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:1,type:5120},v[33332]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5123},v[33331]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5122},v[33334]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5125},v[33333]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5124},v[33323]={textureFormat:d,colorRenderable:!0,textureFilterable:!0,bytesPerElement:2,type:5121},v[36757]={textureFormat:d,colorRenderable:!1,textureFilterable:!0,bytesPerElement:2,type:5120},v[33327]={textureFormat:d,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[5126,5131]},v[33328]={textureFormat:d,colorRenderable:!1,textureFilterable:!1,bytesPerElement:8,type:5126},v[33336]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5121},v[33335]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5120},v[33338]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5123},v[33337]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5122},v[33340]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5125},v[33339]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5124},v[32849]={textureFormat:l,colorRenderable:!0,textureFilterable:!0,bytesPerElement:3,type:5121},v[35905]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:3,type:5121},v[36194]={textureFormat:l,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[5121,33635]},v[36758]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:3,type:5120},v[35898]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35899]},v[35901]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35902]},v[34843]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[5126,5131]},v[34837]={textureFormat:l,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5126},v[36221]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:3,type:5121},v[36239]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:3,type:5120},v[36215]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:6,type:5123},v[36233]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:6,type:5122},v[36209]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5125},v[36227]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5124},v[32856]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:5121},v[35907]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:5121},v[36759]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:4,type:5120},v[32855]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[5121,32820,33640]},v[32854]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[5121,32819]},v[32857]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:33640},v[34842]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[5126,5131]},v[34836]={textureFormat:6408,colorRenderable:!1,textureFilterable:!1,bytesPerElement:16,type:5126},v[36220]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5121},v[36238]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5120},v[36975]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:33640},v[36214]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5123},v[36232]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5122},v[36226]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:16,type:5124},v[36208]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:16,type:5125},v[33189]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5123,5125]},v[33190]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5125},v[36012]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5126},v[35056]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:34042},v[36013]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:36269},Object.keys(v).forEach(function(t){var e=v[t];if(e.bytesPerElementMap={},Array.isArray(e.bytesPerElement))e.bytesPerElement.forEach(function(t,r){var n=e.type[r];e.bytesPerElementMap[n]=t});else{var r=e.type;e.bytesPerElementMap[r]=e.bytesPerElement}});var M={};function A(t,e){void 0!==e.colorspaceConversion&&(M.colorspaceConversion=t.getParameter(t.UNPACK_COLORSPACE_CONVERSION_WEBGL),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.colorspaceConversion)),void 0!==e.premultiplyAlpha&&(M.premultiplyAlpha=t.getParameter(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha)),void 0!==e.flipY&&(M.flipY=t.getParameter(t.UNPACK_FLIP_Y_WEBGL),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY))}function T(t,e){void 0!==e.colorspaceConversion&&t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,M.colorspaceConversion),void 0!==e.premultiplyAlpha&&t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,M.premultiplyAlpha),void 0!==e.flipY&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,M.flipY)}function w(t){M.unpackAlignment=t.getParameter(t.UNPACK_ALIGNMENT),n.isWebGL2(t)&&(M.unpackRowLength=t.getParameter(t.UNPACK_ROW_LENGTH),M.unpackImageHeight=t.getParameter(t.UNPACK_IMAGE_HEIGHT),M.unpackSkipPixels=t.getParameter(t.UNPACK_SKIP_PIXELS),M.unpackSkipRows=t.getParameter(t.UNPACK_SKIP_ROWS),M.unpackSkipImages=t.getParameter(t.UNPACK_SKIP_IMAGES))}function R(t){t.pixelStorei(t.UNPACK_ALIGNMENT,M.unpackAlignment),n.isWebGL2(t)&&(t.pixelStorei(t.UNPACK_ROW_LENGTH,M.unpackRowLength),t.pixelStorei(t.UNPACK_IMAGE_HEIGHT,M.unpackImageHeight),t.pixelStorei(t.UNPACK_SKIP_PIXELS,M.unpackSkipPixels),t.pixelStorei(t.UNPACK_SKIP_ROWS,M.unpackSkipRows),t.pixelStorei(t.UNPACK_SKIP_IMAGES,M.unpackSkipImages))}function F(t,e,r,n){n.minMag&&(r.call(t,e,t.TEXTURE_MIN_FILTER,n.minMag),r.call(t,e,t.TEXTURE_MAG_FILTER,n.minMag)),n.min&&r.call(t,e,t.TEXTURE_MIN_FILTER,n.min),n.mag&&r.call(t,e,t.TEXTURE_MAG_FILTER,n.mag),n.wrap&&(r.call(t,e,t.TEXTURE_WRAP_S,n.wrap),r.call(t,e,t.TEXTURE_WRAP_T,n.wrap),(e===t.TEXTURE_3D||o.isSampler(t,e))&&r.call(t,e,t.TEXTURE_WRAP_R,n.wrap)),n.wrapR&&r.call(t,e,t.TEXTURE_WRAP_R,n.wrapR),n.wrapS&&r.call(t,e,t.TEXTURE_WRAP_S,n.wrapS),n.wrapT&&r.call(t,e,t.TEXTURE_WRAP_T,n.wrapT),n.minLod&&r.call(t,e,t.TEXTURE_MIN_LOD,n.minLod),n.maxLod&&r.call(t,e,t.TEXTURE_MAX_LOD,n.maxLod),n.baseLevel&&r.call(t,e,t.TEXTURE_BASE_LEVEL,n.baseLevel),n.maxLevel&&r.call(t,e,t.TEXTURE_MAX_LEVEL,n.maxLevel)}function P(t,e,r){var n=r.target||t.TEXTURE_2D;t.bindTexture(n,e),F(t,n,t.texParameteri,r)}function I(t,e,r){F(t,e,t.samplerParameteri,r)}function S(t,e){var r=t.createSampler();return I(t,r,e),r}function O(t,e,r,i,o,a,u){r=r||f.textureOptions,a=a||t.RGBA,u=u||t.UNSIGNED_BYTE;var c=r.target||t.TEXTURE_2D;if(i=i||r.width,o=o||r.height,t.bindTexture(c,e),function(t,e,r,i){if(!n.isWebGL2(t))return g(e)&&g(r);var o=m[i];if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}(t,i,o,a))t.generateMipmap(c);else{var s=function(t){var e=m[t];if(!e)throw"unknown internal format";return e.textureFilterable}(a)?t.LINEAR:t.NEAREST;t.texParameteri(c,t.TEXTURE_MIN_FILTER,s),t.texParameteri(c,t.TEXTURE_MAG_FILTER,s),t.texParameteri(c,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(c,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}}function B(t){return!0===t.auto||void 0===t.auto&&void 0===t.level}function C(t,e){return(e=e||{}).cubeFaceOrder||[t.TEXTURE_CUBE_MAP_POSITIVE_X,t.TEXTURE_CUBE_MAP_NEGATIVE_X,t.TEXTURE_CUBE_MAP_POSITIVE_Y,t.TEXTURE_CUBE_MAP_NEGATIVE_Y,t.TEXTURE_CUBE_MAP_POSITIVE_Z,t.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function U(t,e){var r=C(t,e).map(function(t,e){return{face:t,ndx:e}});return r.sort(function(t,e){return t.face-e.face}),r}function D(t,e,r,n){var i=(n=n||f.textureOptions).target||t.TEXTURE_2D,o=n.level||0,u=r.width,c=r.height,l=n.internalFormat||n.format||t.RGBA,d=y(l),h=n.format||d.format,p=n.type||d.type;if(A(t,n),t.bindTexture(i,e),i===t.TEXTURE_CUBE_MAP){var m,v,b=r.width,g=r.height;if(b/6===g)m=g,v=[0,0,1,0,2,0,3,0,4,0,5,0];else if(g/6===b)m=b,v=[0,0,0,1,0,2,0,3,0,4,0,5];else if(b/3==g/2)m=b/3,v=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(b/2!=g/3)throw"can't figure out cube map from element: "+(r.src?r.src:r.nodeName);m=b/2,v=[0,0,1,0,0,1,1,1,0,2,1,2]}s?(s.canvas.width=m,s.canvas.height=m,u=m,c=m,U(t,n).forEach(function(e){var n=v[2*e.ndx+0]*m,i=v[2*e.ndx+1]*m;s.drawImage(r,n,i,m,m,0,0,m,m),t.texImage2D(e.face,o,l,h,p,s.canvas)}),s.canvas.width=1,s.canvas.height=1):a.default.createImageBitmap&&(u=m,c=m,U(t,n).forEach(function(f){var s=v[2*f.ndx+0]*m,d=v[2*f.ndx+1]*m;t.texImage2D(f.face,o,l,m,m,0,h,p,null),a.default.createImageBitmap(r,s,d,m,m,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(r){A(t,n),t.bindTexture(i,e),t.texImage2D(f.face,o,l,h,p,r),T(t,n),B(n)&&O(t,e,n,u,c,l,p)})}))}else if(i===t.TEXTURE_3D||i===t.TEXTURE_2D_ARRAY){var x=Math.min(r.width,r.height),E=Math.max(r.width,r.height),_=E/x;if(_%1!=0)throw"can not compute 3D dimensions of element";var M=r.width===E?1:0,F=r.height===E?1:0;w(t),t.pixelStorei(t.UNPACK_ALIGNMENT,1),t.pixelStorei(t.UNPACK_ROW_LENGTH,r.width),t.pixelStorei(t.UNPACK_IMAGE_HEIGHT,0),t.pixelStorei(t.UNPACK_SKIP_IMAGES,0),t.texImage3D(i,o,l,x,x,x,0,h,p,null);for(var I=0;I<_;++I){var S=I*x*M,C=I*x*F;t.pixelStorei(t.UNPACK_SKIP_PIXELS,S),t.pixelStorei(t.UNPACK_SKIP_ROWS,C),t.texSubImage3D(i,o,0,0,I,x,x,1,h,p,r)}R(t)}else t.texImage2D(i,o,l,h,p,r);T(t,n),B(n)&&O(t,e,n,u,c,l,p),P(t,e,n)}function L(){}function k(t){return a.default.ImageBitmap&&t instanceof a.default.ImageBitmap||a.default.ImageData&&t instanceof a.default.ImageData||a.default.HTMLElement&&t instanceof a.default.HTMLElement}function j(t,e,r){return k(t)?(setTimeout(function(){r(null,t)}),t):function(t,e,r){var n;if(r=r||L,a.default.Image){n=new a.default.Image,void 0!==(e=void 0!==e?e:f.crossOrigin)&&(n.crossOrigin=e);var i=function(){n.removeEventListener("error",u),n.removeEventListener("load",c),n=null},u=function(){var e="couldn't load image: "+t;o.error(e),r(e,n),i()},c=function(){r(null,n),i()};return n.addEventListener("error",u),n.addEventListener("load",c),n.src=t,n}if(a.default.ImageBitmap){var s,l,d=function(){r(s,l)},h={};e&&(h.mode="cors"),fetch(t,h).then(function(t){if(!t.ok)throw t;return t.blob()}).then(function(t){return a.default.createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(t){l=t,setTimeout(d)}).catch(function(t){s=t,setTimeout(d)}),n=null}return n}(t,e,r)}function N(t,e,r){var n=(r=r||f.textureOptions).target||t.TEXTURE_2D;if(t.bindTexture(n,e),!1!==r.color){var i=function(t){return t=t||f.textureColor,c(t)?t:new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}(r.color);if(n===t.TEXTURE_CUBE_MAP)for(var o=0;o<6;++o)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,i);else n===t.TEXTURE_3D||n===t.TEXTURE_2D_ARRAY?t.texImage3D(n,0,t.RGBA,1,1,1,0,t.RGBA,t.UNSIGNED_BYTE,i):t.texImage2D(n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,i)}}function G(t,e,r,n){return n=n||L,r=r||f.textureOptions,N(t,e,r),j((r=Object.assign({},r)).src,r.crossOrigin,function(i,o){i?n(i,e,o):(D(t,e,o,r),n(null,e,o))})}function W(t,e,r,n){n=n||L;var i=r.src;if(6!==i.length)throw"there must be 6 urls for a cubemap";var o=r.level||0,a=r.internalFormat||r.format||t.RGBA,u=y(a),f=r.format||u.format,c=r.type||t.UNSIGNED_BYTE,s=r.target||t.TEXTURE_2D;if(s!==t.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";N(t,e,r),r=Object.assign({},r);var l,d=6,h=[],p=C(t,r);l=i.map(function(i,u){return j(i,r.crossOrigin,function(i){return function(u,p){--d,u?h.push(u):p.width!==p.height?h.push("cubemap face img is not a square: "+p.src):(A(t,r),t.bindTexture(s,e),5===d?C(t).forEach(function(e){t.texImage2D(e,o,a,f,c,p)}):t.texImage2D(i,o,a,f,c,p),T(t,r),B(r)&&t.generateMipmap(s)),0===d&&n(h.length?h:void 0,e,l)}}(p[u]))})}function z(t,e,r,n){n=n||L;var i=r.src,o=r.internalFormat||r.format||t.RGBA,a=y(o),u=r.format||a.format,f=r.type||t.UNSIGNED_BYTE,c=r.target||t.TEXTURE_2D_ARRAY;if(c!==t.TEXTURE_3D&&c!==t.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";N(t,e,r),r=Object.assign({},r);var l,d=i.length,h=[],p=r.level||0,m=r.width,v=r.height,b=i.length,g=!0;l=i.map(function(i,a){return j(i,r.crossOrigin,function(i){return function(a,y){if(--d,a)h.push(a);else{if(A(t,r),t.bindTexture(c,e),g){g=!1,m=r.width||y.width,v=r.height||y.height,t.texImage3D(c,p,o,m,v,b,0,u,f,null);for(var x=0;x<b;++x)t.texSubImage3D(c,p,0,0,x,m,v,1,u,f,y)}else{var E=y;y.width===m&&y.height===v||(E=s.canvas,s.canvas.width=m,s.canvas.height=v,s.drawImage(y,0,0,m,v)),t.texSubImage3D(c,p,0,0,i,m,v,1,u,f,E),E===s.canvas&&(s.canvas.width=0,s.canvas.height=0)}T(t,r),B(r)&&t.generateMipmap(c)}0===d&&n(h.length?h:void 0,e,l)}}(a))})}function X(t,e,r,o){var a=(o=o||f.textureOptions).target||t.TEXTURE_2D;t.bindTexture(a,e);var u=o.width,s=o.height,l=o.depth,d=o.level||0,h=o.internalFormat||o.format||t.RGBA,p=y(h),m=o.format||p.format,v=o.type||x(t,r,p.type);if(c(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{var g=i.getTypedArrayTypeForGLType(v);r=new g(r)}var _,M=b(h,v),F=r.byteLength/M;if(F%1)throw"length wrong size for format: "+n.glEnumToString(t,m);if(a===t.TEXTURE_3D)if(u||s||l)!u||s&&l?!s||u&&l?(_=E(t,a,u,s,F/l),u=_.width,s=_.height):(_=E(t,a,u,l,F/s),u=_.width,l=_.height):(_=E(t,a,s,l,F/u),s=_.width,l=_.height);else{var P=Math.cbrt(F);if(P%1!=0)throw"can't guess cube size of array of numElements: "+F;u=P,s=P,l=P}else _=E(t,a,u,s,F),u=_.width,s=_.height;if(w(t),t.pixelStorei(t.UNPACK_ALIGNMENT,o.unpackAlignment||1),A(t,o),a===t.TEXTURE_CUBE_MAP){var I=F/6*(M/r.BYTES_PER_ELEMENT);U(t,o).forEach(function(e){var n=I*e.ndx,i=r.subarray(n,n+I);t.texImage2D(e.face,d,h,u,s,0,m,v,i)})}else a===t.TEXTURE_3D?t.texImage3D(a,d,h,u,s,l,0,m,v,r):t.texImage2D(a,d,h,u,s,0,m,v,r);return T(t,o),R(t),{width:u,height:s,depth:l,type:v}}function q(t,e,r){var n=r.target||t.TEXTURE_2D;t.bindTexture(n,e);var i=r.level||0,o=r.internalFormat||r.format||t.RGBA,a=y(o),u=r.format||a.format,f=r.type||a.type;if(A(t,r),n===t.TEXTURE_CUBE_MAP)for(var c=0;c<6;++c)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+c,i,o,r.width,r.height,0,u,f,null);else n===t.TEXTURE_3D?t.texImage3D(n,i,o,r.width,r.height,r.depth,0,u,f,null):t.texImage2D(n,i,o,r.width,r.height,0,u,f,null);T(t,r)}function Y(t,e,r){r=r||L,e=e||f.textureOptions;var n=t.createTexture(),i=e.target||t.TEXTURE_2D,o=e.width||1,a=e.height||1,u=e.internalFormat||t.RGBA,s=y(u),l=e.type||s.type;t.bindTexture(i,n),i===t.TEXTURE_CUBE_MAP&&(t.texParameteri(i,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(i,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE));var d=e.src;if(d)if("function"==typeof d&&(d=d(t,e)),"string"==typeof d)G(t,n,e,r);else if(c(d)||Array.isArray(d)&&("number"==typeof d[0]||Array.isArray(d[0])||c(d[0]))){var h=X(t,n,d,e);o=h.width,a=h.height,l=h.type}else if(Array.isArray(d)&&("string"==typeof d[0]||k(d[0])))i===t.TEXTURE_CUBE_MAP?W(t,n,e,r):z(t,n,e,r);else{if(!k(d))throw"unsupported src type";D(t,n,d,e),o=d.width,a=d.height}else q(t,n,e);return B(e)&&O(t,n,e,o,a,u,l),P(t,n,e),n}},function(t,e,r){"use strict";e.__esModule=!0;var n={m4:!0,v3:!0,primitives:!0};e.primitives=e.v3=e.m4=void 0;var i=f(r(6));e.m4=i;var o=f(r(3));e.v3=o;var a=f(r(10));e.primitives=a;var u=r(11);function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=u[t]))})},function(t,e,r){"use strict";e.__esModule=!0,e.create3DFVertices=R,e.createAugmentedTypedArray=d,e.createCubeVertices=A,e.createPlaneVertices=E,e.createSphereVertices=_,e.createTruncatedConeVertices=T,e.createXYQuadVertices=x,e.createCresentVertices=F,e.createCylinderVertices=P,e.createTorusVertices=I,e.createDiscVertices=S,e.deindexVertices=function(t){var e=t.indices,r={},n=e.length;return Object.keys(t).filter(h).forEach(function(i){for(var o=t[i],a=o.numComponents,u=d(a,n,o.constructor),f=0;f<n;++f)for(var c=e[f],s=c*a,l=0;l<a;++l)u.push(o[s+l]);r[i]=u}),r},e.flattenNormals=function(t){if(t.indices)throw"can't flatten normals of indexed vertices. deindex them first";for(var e=t.normal,r=e.length,n=0;n<r;n+=9){var i=e[n+0],o=e[n+1],a=e[n+2],u=e[n+3],f=e[n+4],c=e[n+5],s=e[n+6],l=e[n+7],d=e[n+8],h=i+u+s,p=o+f+l,m=a+c+d,v=Math.sqrt(h*h+p*p+m*m);h/=v,p/=v,m/=v,e[n+0]=h,e[n+1]=p,e[n+2]=m,e[n+3]=h,e[n+4]=p,e[n+5]=m,e[n+6]=h,e[n+7]=p,e[n+8]=m}return t},e.makeRandomVertexColors=function(t,e){e=e||{};var r=t.position.numElements,n=d(4,r,Uint8Array),i=e.rand||function(t,e){return e<3?function(t){return Math.random()*t|0}(256):255};if(t.color=n,t.indices)for(var o=0;o<r;++o)n.push(i(o,0),i(o,1),i(o,2),i(o,3));else for(var a=e.vertsPerColor||3,u=r/a,f=0;f<u;++f)for(var c=[i(f,0),i(f,1),i(f,2),i(f,3)],s=0;s<a;++s)n.push(c);return t},e.reorientDirections=v,e.reorientNormals=b,e.reorientPositions=y,e.reorientVertices=g,e.concatVertices=function(t){for(var e,r={},n=function(n){var i=t[n];Object.keys(i).forEach(function(t){r[t]||(r[t]=[]),e||"indices"===t||(e=t);var n=i[t],o=s(n,t),a=c(n),u=a.length/o;r[t].push(u)})},i=0;i<t.length;++i)n(i);var o=r[e],a={};return Object.keys(r).forEach(function(e){var r=function(e){for(var r,n=0,i=0;i<t.length;++i){var o=t[i],a=o[e],u=c(a);n+=u.length,r&&!a.data||(r=a)}return{length:n,spec:r}}(e),n=D(r.spec,r.length);!function(e,r,n){for(var i=0,o=0,a=0;a<t.length;++a){var u=t[a],f=u[e],s=c(f);"indices"===e?(U(s,n,o,i),i+=r[a]):U(s,n,o),o+=s.length}}(e,o,c(n)),a[e]=n}),a},e.duplicateVertices=function(t){var e={};return Object.keys(t).forEach(function(r){var n=t[r],i=c(n),o=D(n,i.length);U(i,c(o),0),e[r]=o}),e},e.createDiscBuffers=e.createDiscBufferInfo=e.createTorusBuffers=e.createTorusBufferInfo=e.createCylinderBuffers=e.createCylinderBufferInfo=e.createCresentBuffers=e.createCresentBufferInfo=e.createXYQuadBuffers=e.createXYQuadBufferInfo=e.createTruncatedConeBuffers=e.createTruncatedConeBufferInfo=e.createSphereBuffers=e.createSphereBufferInfo=e.createPlaneBuffers=e.createPlaneBufferInfo=e.createCubeBuffers=e.createCubeBufferInfo=e.create3DFBuffers=e.create3DFBufferInfo=void 0;var n=f(r(7)),i=f(r(0)),o=f(r(1)),a=f(r(6)),u=f(r(3));function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}var c=n.getArray_,s=n.getNumComponents_;function l(t,e){var r=0;return t.push=function(){for(var e=0;e<arguments.length;++e){var n=arguments[e];if(n instanceof Array||o.isArrayBuffer(n))for(var i=0;i<n.length;++i)t[r++]=n[i];else t[r++]=n}},t.reset=function(t){r=t||0},t.numComponents=e,Object.defineProperty(t,"numElements",{get:function(){return this.length/this.numComponents|0}}),t}function d(t,e,r){return l(new(r||Float32Array)(t*e),t)}function h(t){return"indices"!==t}function p(t,e,r){for(var n=t.length,i=new Float32Array(3),o=0;o<n;o+=3)r(e,[t[o],t[o+1],t[o+2]],i),t[o]=i[0],t[o+1]=i[1],t[o+2]=i[2]}function m(t,e,r){r=r||u.create();var n=e[0],i=e[1],o=e[2];return r[0]=n*t[0]+i*t[1]+o*t[2],r[1]=n*t[4]+i*t[5]+o*t[6],r[2]=n*t[8]+i*t[9]+o*t[10],r}function v(t,e){return p(t,e,a.transformDirection),t}function b(t,e){return p(t,a.inverse(e),m),t}function y(t,e){return p(t,e,a.transformPoint),t}function g(t,e){return Object.keys(t).forEach(function(r){var n=t[r];r.indexOf("pos")>=0?y(n,e):r.indexOf("tan")>=0||r.indexOf("binorm")>=0?v(n,e):r.indexOf("norm")>=0&&b(n,e)}),t}function x(t,e,r){return t=t||2,{position:{numComponents:2,data:[(e=e||0)+-1*(t*=.5),(r=r||0)+-1*t,e+1*t,r+-1*t,e+-1*t,r+1*t,e+1*t,r+1*t]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function E(t,e,r,n,i){t=t||1,e=e||1,r=r||1,n=n||1,i=i||a.identity();for(var o=(r+1)*(n+1),u=d(3,o),f=d(3,o),c=d(2,o),s=0;s<=n;s++)for(var l=0;l<=r;l++){var h=l/r,p=s/n;u.push(t*h-.5*t,0,e*p-.5*e),f.push(0,1,0),c.push(h,p)}for(var m=r+1,v=d(3,r*n*2,Uint16Array),b=0;b<n;b++)for(var y=0;y<r;y++)v.push((b+0)*m+y,(b+1)*m+y,(b+0)*m+y+1),v.push((b+1)*m+y,(b+1)*m+y+1,(b+0)*m+y+1);return g({position:u,normal:f,texcoord:c,indices:v},i)}function _(t,e,r,n,i,o,a){if(e<=0||r<=0)throw Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,i=i||Math.PI,o=o||0;for(var u=i-n,f=(a=a||2*Math.PI)-o,c=(e+1)*(r+1),s=d(3,c),l=d(3,c),h=d(2,c),p=0;p<=r;p++)for(var m=0;m<=e;m++){var v=m/e,b=p/r,y=f*v,g=u*b,x=Math.sin(y),E=Math.cos(y),_=Math.sin(g),M=E*_,A=Math.cos(g),T=x*_;s.push(t*M,t*A,t*T),l.push(M,A,T),h.push(1-v,b)}for(var w=e+1,R=d(3,e*r*2,Uint16Array),F=0;F<e;F++)for(var P=0;P<r;P++)R.push((P+0)*w+F,(P+0)*w+F+1,(P+1)*w+F),R.push((P+1)*w+F,(P+0)*w+F+1,(P+1)*w+F+1);return{position:s,normal:l,texcoord:h,indices:R}}var M=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function A(t){for(var e=(t=t||1)/2,r=[[-e,-e,-e],[+e,-e,-e],[-e,+e,-e],[+e,+e,-e],[-e,-e,+e],[+e,-e,+e],[-e,+e,+e],[+e,+e,+e]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],i=[[1,0],[0,0],[0,1],[1,1]],o=d(3,24),a=d(3,24),u=d(2,24),f=d(3,12,Uint16Array),c=0;c<6;++c){for(var s=M[c],l=0;l<4;++l){var h=r[s[l]],p=n[c],m=i[l];o.push(h),a.push(p),u.push(m)}var v=4*c;f.push(v+0,v+1,v+2),f.push(v+0,v+2,v+3)}return{position:o,normal:a,texcoord:u,indices:f}}function T(t,e,r,n,i,o,a){if(n<3)throw Error("radialSubdivisions must be 3 or greater");if(i<1)throw Error("verticalSubdivisions must be 1 or greater");for(var u=void 0===o||o,f=void 0===a||a,c=(u?2:0)+(f?2:0),s=(n+1)*(i+1+c),l=d(3,s),h=d(3,s),p=d(2,s),m=d(3,n*(i+c)*2,Uint16Array),v=n+1,b=Math.atan2(t-e,r),y=Math.cos(b),g=Math.sin(b),x=i+(f?2:0),E=u?-2:0;E<=x;++E){var _=E/i,M=r*_,A=void 0;E<0?(M=0,_=1,A=t):E>i?(M=r,_=1,A=e):A=t+E/i*(e-t),-2!==E&&E!==i+2||(A=0,_=0),M-=r/2;for(var T=0;T<v;++T){var w=Math.sin(T*Math.PI*2/n),R=Math.cos(T*Math.PI*2/n);l.push(w*A,M,R*A),h.push(E<0||E>i?0:w*y,E<0?-1:E>i?1:g,E<0||E>i?0:R*y),p.push(T/n,1-_)}}for(var F=0;F<i+c;++F)for(var P=0;P<n;++P)m.push(v*(F+0)+0+P,v*(F+0)+1+P,v*(F+1)+1+P),m.push(v*(F+0)+0+P,v*(F+1)+1+P,v*(F+1)+0+P);return{position:l,normal:h,texcoord:p,indices:m}}function w(t,e){e=e||[];for(var r=[],n=0;n<t.length;n+=4){var i=t[n],o=t.slice(n+1,n+4);o.push.apply(o,e);for(var a=0;a<i;++a)r.push.apply(r,o)}return r}function R(){var t=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],e=w([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=w([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=t.length/3,i={position:d(3,n),texcoord:d(2,n),normal:d(3,n),color:d(4,n,Uint8Array),indices:d(3,n/3,Uint16Array)};i.position.push(t),i.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),i.normal.push(e),i.color.push(r);for(var o=0;o<n;++o)i.indices.push(o);return i}function F(t,e,r,n,i,o,a){if(i<=0)throw Error("subdivisionDown must be > 0");o=o||0;var f=2,c=(a=a||1)-o,s=2*(i+1)*(2+f),l=d(3,s),h=d(3,s),p=d(2,s);function m(t,e,r){return t+(e-t)*r}function v(e,r,a,s,d,v){for(var b=0;b<=i;b++){var y=r/(f-1),g=b/i,x=2*(y-.5),E=(o+g*c)*Math.PI,_=Math.sin(E),M=Math.cos(E),A=m(t,e,_),T=x*n,w=M*t,R=_*A;l.push(T,w,R);var F=u.add(u.multiply([0,_,M],a),s);h.push(F),p.push(y*d+v,g)}}for(var b=0;b<f;b++){var y=2*(b/(f-1)-.5);v(e,b,[1,1,1],[0,0,0],1,0),v(e,b,[0,0,0],[y,0,0],0,0),v(r,b,[1,1,1],[0,0,0],1,0),v(r,b,[0,0,0],[y,0,0],0,1)}var g=d(3,2*i*(2+f),Uint16Array);function x(t,e){for(var r=0;r<i;++r)g.push(t+r+0,t+r+1,e+r+0),g.push(t+r+1,e+r+1,e+r+0)}var E=i+1;return x(0*E,4*E),x(5*E,7*E),x(6*E,2*E),x(3*E,1*E),{position:l,normal:h,texcoord:p,indices:g}}function P(t,e,r,n,i,o){return T(t,t,e,r,n,i,o)}function I(t,e,r,n,i,o){if(r<3)throw Error("radialSubdivisions must be 3 or greater");if(n<3)throw Error("verticalSubdivisions must be 3 or greater");i=i||0;for(var a=(o=o||2*Math.PI)-i,u=r+1,f=n+1,c=u*f,s=d(3,c),l=d(3,c),h=d(2,c),p=d(3,r*n*2,Uint16Array),m=0;m<f;++m)for(var v=m/n,b=v*Math.PI*2,y=Math.sin(b),g=t+y*e,x=Math.cos(b),E=x*e,_=0;_<u;++_){var M=_/r,A=i+M*a,T=Math.sin(A),w=Math.cos(A),R=T*g,F=w*g,P=T*y,I=w*y;s.push(R,E,F),l.push(P,x,I),h.push(M,1-v)}for(var S=0;S<n;++S)for(var O=0;O<r;++O){var B=1+O,C=1+S;p.push(u*S+O,u*C+O,u*S+B),p.push(u*C+O,u*C+B,u*S+B)}return{position:s,normal:l,texcoord:h,indices:p}}function S(t,e,r,n,i){if(e<3)throw Error("divisions must be at least 3");r=r||1,i=i||1,n=n||0;for(var o=(e+1)*(r+1),a=d(3,o),u=d(3,o),f=d(2,o),c=d(3,r*e*2,Uint16Array),s=0,l=t-n,h=e+1,p=0;p<=r;++p){for(var m=n+l*Math.pow(p/r,i),v=0;v<=e;++v){var b=2*Math.PI*v/e,y=m*Math.cos(b),g=m*Math.sin(b);if(a.push(y,0,g),u.push(0,1,0),f.push(1-v/e,p/r),p>0&&v!==e){var x=s+(v+1),E=s+v,_=s+v-h,M=s+(v+1)-h;c.push(x,E,_),c.push(x,_,M)}}s+=e+1}return{position:a,normal:u,texcoord:f,indices:c}}function O(t){return function(e){var r=t.apply(this,Array.prototype.slice.call(arguments,1));return n.createBuffersFromArrays(e,r)}}function B(t){return function(e){var r=t.apply(null,Array.prototype.slice.call(arguments,1));return n.createBufferInfoFromArrays(e,r)}}var C=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function U(t,e,r,n){n=n||0;for(var i=t.length,o=0;o<i;++o)e[r+o]=t[o]+n}function D(t,e){var r=c(t),n=new r.constructor(e),o=n;return r.numComponents&&r.numElements&&l(n,r.numComponents),t.data&&(o={data:n},i.copyNamedProperties(C,t,o)),o}var L=B(R);e.create3DFBufferInfo=L;var k=O(R);e.create3DFBuffers=k;var j=B(A);e.createCubeBufferInfo=j;var N=O(A);e.createCubeBuffers=N;var G=B(E);e.createPlaneBufferInfo=G;var W=O(E);e.createPlaneBuffers=W;var z=B(_);e.createSphereBufferInfo=z;var X=O(_);e.createSphereBuffers=X;var q=B(T);e.createTruncatedConeBufferInfo=q;var Y=O(T);e.createTruncatedConeBuffers=Y;var K=B(x);e.createXYQuadBufferInfo=K;var V=O(x);e.createXYQuadBuffers=V;var H=B(F);e.createCresentBufferInfo=H;var Q=O(F);e.createCresentBuffers=Q;var Z=B(P);e.createCylinderBufferInfo=Z;var $=O(P);e.createCylinderBuffers=$;var J=B(I);e.createTorusBufferInfo=J;var tt=O(I);e.createTorusBuffers=tt;var et=B(S);e.createDiscBufferInfo=et;var rt=O(S);e.createDiscBuffers=rt},function(t,e,r){"use strict";e.__esModule=!0;var n={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0};e.addExtensionsToContext=y,e.getContext=function(t,e){return function(t,e){for(var r=["webgl2","webgl","experimental-webgl"],n=null,i=0;i<r.length;++i)if(n=t.getContext(r[i],e)){p.addExtensionsToContext&&y(n);break}return n}(t,e)},e.getWebGLContext=function(t,e){return function(t,e){for(var r=["webgl","experimental-webgl"],n=null,i=0;i<r.length;++i)if(n=t.getContext(r[i],e)){p.addExtensionsToContext&&y(n);break}return n}(t,e)},e.resizeCanvasToDisplaySize=function(t,e){e=e||1,e=Math.max(0,e);var r=t.clientWidth*e|0,n=t.clientHeight*e|0;if(t.width!==r||t.height!==n)return t.width=r,t.height=n,!0;return!1},e.setDefaults=function(t){a.copyExistingProperties(t,p),i.setAttributeDefaults_(t),o.setTextureDefaults_(t)};var i=h(r(7));Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=i[t]))});var o=h(r(8));Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=o[t]))});var a=h(r(0)),u=h(r(4));Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=u[t]))});var f=r(12);Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=f[t]))});var c=r(13);Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=c[t]))});var s=r(5);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=s[t]))});var l=r(1);Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=l[t]))});var d=r(14);function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}Object.keys(d).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=d[t]))});var p={addExtensionsToContext:!0};var m=/^(.*?)_/;function v(t,e){u.glEnumToString(t,0);var r=t.getExtension(e);if(r){var n={},i=m.exec(e)[1],o="_"+i;for(var f in r){var c=r[f],s="function"==typeof c,l=s?i:o,d=f;f.endsWith(l)&&(d=f.substring(0,f.length-l.length)),void 0!==t[d]?s||t[d]===c||a.warn(d,t[d],c,f):s?t[d]=function(t){return function(){return t.apply(r,arguments)}}(c):(t[d]=c,n[d]=c)}n.constructor={name:r.constructor.name},u.glEnumToString(n,0)}return r}var b=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function y(t){for(var e=0;e<b.length;++e)v(t,b[e])}},function(t,e,r){"use strict";e.__esModule=!0,e.drawBufferInfo=i,e.drawObjectList=function(t,e){var r=null,o=null;e.forEach(function(e){if(!1!==e.active){var a=e.programInfo,u=e.vertexArrayInfo||e.bufferInfo,f=!1,c=void 0===e.type?t.TRIANGLES:e.type;a!==r&&(r=a,t.useProgram(a.program),f=!0),(f||u!==o)&&(o&&o.vertexArrayObject&&!u.vertexArrayObject&&t.bindVertexArray(null),o=u,n.setBuffersAndAttributes(t,a,u)),n.setUniforms(a,e.uniforms),i(t,u,c,e.count,e.offset,e.instanceCount)}}),o.vertexArrayObject&&t.bindVertexArray(null)};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(r(5));function i(t,e,r,n,i,o){r=void 0===r?t.TRIANGLES:r;var a=e.indices,u=e.elementType,f=void 0===n?e.numElements:n;i=void 0===i?0:i,u||a?void 0!==o?t.drawElementsInstanced(r,f,void 0===u?t.UNSIGNED_SHORT:e.elementType,i,o):t.drawElements(r,f,void 0===u?t.UNSIGNED_SHORT:e.elementType,i):void 0!==o?t.drawArraysInstanced(r,i,f,o):t.drawArrays(r,i,f)}},function(t,e,r){"use strict";e.__esModule=!0,e.bindFramebufferInfo=function(t,e,r){r=r||t.FRAMEBUFFER,e?(t.bindFramebuffer(r,e.framebuffer),t.viewport(0,0,e.width,e.height)):(t.bindFramebuffer(r,null),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight))},e.createFramebufferInfo=function(t,e,r,o){var s=t.FRAMEBUFFER,l=t.createFramebuffer();t.bindFramebuffer(s,l),r=r||t.drawingBufferWidth,o=o||t.drawingBufferHeight;var d=0,h={framebuffer:l,attachments:[],width:r,height:o};return(e=e||u).forEach(function(e){var u=e.attachment,l=e.format,p=function(t){return f[t]}(l);if(p||(p=a+d++),!u)if(function(t){return c[t]}(l))u=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,u),t.renderbufferStorage(t.RENDERBUFFER,l,r,o);else{var m=Object.assign({},e);m.width=r,m.height=o,void 0===m.auto&&(m.auto=!1,m.min=m.min||m.minMag||t.LINEAR,m.mag=m.mag||m.minMag||t.LINEAR,m.wrapS=m.wrapS||m.wrap||t.CLAMP_TO_EDGE,m.wrapT=m.wrapT||m.wrap||t.CLAMP_TO_EDGE),u=n.createTexture(t,m)}if(i.isRenderbuffer(t,u))t.framebufferRenderbuffer(s,p,t.RENDERBUFFER,u);else{if(!i.isTexture(t,u))throw"unknown attachment type";t.framebufferTexture2D(s,p,e.texTarget||t.TEXTURE_2D,u,e.level||0)}h.attachments.push(u)}),h},e.resizeFramebufferInfo=function(t,e,r,o,a){o=o||t.drawingBufferWidth,a=a||t.drawingBufferHeight,e.width=o,e.height=a,(r=r||u).forEach(function(r,u){var f=e.attachments[u],c=r.format;if(i.isRenderbuffer(t,f))t.bindRenderbuffer(t.RENDERBUFFER,f),t.renderbufferStorage(t.RENDERBUFFER,c,o,a);else{if(!i.isTexture(t,f))throw"unknown attachment type";n.resizeTexture(t,f,r,o,a)}})};var n=o(r(8)),i=o(r(0));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}var a=36064,u=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],f={};f[34041]=33306,f[6401]=36128,f[36168]=36128,f[6402]=36096,f[33189]=36096;var c={};c[32854]=!0,c[32855]=!0,c[36194]=!0,c[34041]=!0,c[33189]=!0,c[6401]=!0,c[36168]=!0},function(t,e,r){"use strict";e.__esModule=!0,e.createVertexArrayInfo=function(t,e,r){var i=t.createVertexArray();t.bindVertexArray(i),e.length||(e=[e]);return e.forEach(function(e){n.setBuffersAndAttributes(t,e,r)}),t.bindVertexArray(null),{numElements:r.numElements,elementType:r.elementType,vertexArrayObject:i}},e.createVAOAndSetAttributes=i,e.createVAOFromBufferInfo=function(t,e,r){return i(t,e.attribSetters||e,r.attribs,r.indices)};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(r(5));function i(t,e,r,i){var o=t.createVertexArray();return t.bindVertexArray(o),n.setAttributes(e,r),i&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i),t.bindVertexArray(null),o}}])})},37:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},38:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Loader=void 0;var n=r(27),i=function(t){return t&&t.__esModule?t:{default:t}}(r(5)),o=r(1);function a(){var t=f(["No texture value for key ",""]);return a=function(){return t},t}function u(){var t=f(["No value for key ",""]);return u=function(){return t},t}function f(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function c(t,e,r,n,i,o,a){try{var u=t[o](a),f=u.value}catch(t){return void r(t)}u.done?e(f):Promise.resolve(f).then(n,i)}function s(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(t){c(o,n,i,a,u,"next",t)}function u(t){c(o,n,i,a,u,"throw",t)}a(void 0)})}}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t){return new Promise(function(e,r){i.default.createTextures(o.gl,t,function(t,r,n){e({errors:t,textures:r,images:n})})})}o.gl;var p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cache=new Map,this.textureCache=new Map,this.programCache=new Map,this.errors={programs:new Map,textures:new Map,paths:new Map},this.loading=null,this.load(e)}return function(t,e,r){e&&d(t.prototype,e),r&&d(t,r)}(t,[{key:"load",value:function(t){var e=this,r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){l(t,e,r[e])})}return t}({basePath:"",raiseOnFailure:!0},t),a=r.basePath,u=r.raiseOnFailure,f=r.paths,c=r.textures,d=r.programs;a=a.replace(/\/+$/,"");var p=new Promise(function(){var t=s(regeneratorRuntime.mark(function t(r,s){var l,p,m,v,b,y,g,x,E,_,M,A,T,w;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!f){t.next=3;break}return t.next=3,e.loadPaths(f,a,u);case 3:if(!c){t.next=12;break}return t.next=6,h(c);case 6:l=t.sent,p=l.errors,m=l.textures,l.images,p&&console.log(p),Object.keys(m).forEach(function(t){e.textureCache.set(t,m[t])});case 12:if(!d){t.next=49;break}v=!0,b=!1,y=void 0,t.prev=16,g=d[Symbol.iterator]();case 18:if(v=(x=g.next()).done){t.next=35;break}if(E=x.value,_=E,M=void 0,n._.isObject(E)&&(_=E.name,M=E.opts),!e.programCache.has(_)){t.next=26;break}return console.log("Warning: attempted to load already loaded program '".concat(_,"'")),t.abrupt("continue",32);case 26:return A=n._.compact([a,_.split(".").join("/")]).join("/"),T="".concat(A,".vert"),w="".concat(A,".frag"),t.next=31,e.loadPaths([T,w],"",u);case 31:e.programCache.set(_,i.default.createProgramInfo(o.gl,[e.get(T),e.get(w)],M));case 32:v=!0,t.next=18;break;case 35:t.next=41;break;case 37:t.prev=37,t.t0=t.catch(16),b=!0,y=t.t0;case 41:t.prev=41,t.prev=42,v||null==g.return||g.return();case 44:if(t.prev=44,!b){t.next=47;break}throw y;case 47:return t.finish(44);case 48:return t.finish(41);case 49:r(e);case 50:case"end":return t.stop()}},t,this,[[16,37,41,49],[42,,44,48]])}));return function(e,r){return t.apply(this,arguments)}}());return this.loading=this.loading?this.loading.then(function(t){return p}):p,this.loading}},{key:"get",value:function(t){var e=this.cache.get(t);return void 0===e&&raise(u(),t),e}},{key:"getTexture",value:function(t){var e=this.textureCache.get(t);return void 0===e&&raise(a(),path),e}},{key:"getProgram",value:function(t){return this.programCache.get(t)}},{key:"loadPaths",value:function(){var t=s(regeneratorRuntime.mark(function t(e,r){var n,i,o,a,u,f,c,s,l=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=!(l.length>2&&void 0!==l[2])||l[2],i=!0,o=!1,a=void 0,t.prev=4,u=e[Symbol.iterator]();case 6:if(i=(f=u.next()).done){t.next=18;break}if(c=f.value,!this.cache.has(r+c)){t.next=11;break}return console.log("Warning: attempted to load already loaded path '".concat(r+c,"'")),t.abrupt("continue",15);case 11:return t.next=13,this.fetch(r+c,n);case 13:(s=t.sent)&&this.cache.set(r+c,s);case 15:i=!0,t.next=6;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(4),o=!0,a=t.t0;case 24:t.prev=24,t.prev=25,i||null==u.return||u.return();case 27:if(t.prev=27,!o){t.next=30;break}throw a;case 30:return t.finish(27);case 31:return t.finish(24);case 32:case"end":return t.stop()}},t,this,[[4,20,24,32],[25,,27,31]])}));return function(e,r){return t.apply(this,arguments)}}()},{key:"fetch",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=s(regeneratorRuntime.mark(function t(e){var r,n,i=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=!(i.length>1&&void 0!==i[1])||i[1],t.next=3,fetch(e);case 3:if(!(n=t.sent).ok){t.next=10;break}return t.next=7,n.text();case 7:return t.abrupt("return",t.sent);case 10:if(!r){t.next=14;break}throw"failed to fetch resource '".concat(e,"'; got status ").concat(n.status," '").concat(n.statusText,"'");case 14:return this.errors.paths.set(e,n.statusText),t.abrupt("return",!1);case 16:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}]),t}();e.Loader=p},39:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initCanvas=e.App=e.default=void 0;var n=r(38),i=r(26),o=r(2),a=r(1),u=r(15);r(35);var f=r(17),c=r(18),s=r(29);function l(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e){console.log("gl."+t+"("+WebGLDebugUtils.glFunctionArgsToString(t,e)+")")}e.initCanvas=function(t,e){if(!t)throw new Error("argument containerId, id of containing element required");var r=document.getElementById(t),n=document.createElement("canvas");return e&&n.classList.add(e),r.appendChild(n),n};var m=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clearColor=e.clearColor||[.4,.4,.4,1],this.resolution=e.resolution||{width:352,height:224},this.pixelMultiplier=e.pixelMultiplier||2,this.debug=e.debug,"string"==typeof e.el?this.canvas=document.getElementById(e.el):this.canvas=e.el,this.gl=this.canvas.getContext("webgl2"),this.debug&&(WebGLDebugUtils.init(this.gl),this.gl=WebGLDebugUtils.makeDebugContext(this.gl,void 0,p)),(0,a.registerContext)(this.gl),a.gl.blendFunc(a.gl.SRC_ALPHA,a.gl.ONE_MINUS_SRC_ALPHA),a.gl.enable(a.gl.BLEND),this.framebuffer=(0,u.attachFramebuffer)(a.gl,this.resolution.width,this.resolution.height),this.framebufferRenderer=new c.SpriteRenderer({game:this,textureInfo:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){d(t,e,r[e])})}return t}({texture:this.framebuffer.texture},this.resolution)}),this.loader=new n.Loader,this.projection=o.mat4.ortho(o.mat4.create(),0,this.resolution.width,0,this.resolution.height,-1,1),this.camera=new s.Camera(this.resolution),this.cameraEnabled=!0,this.updateCanvasSize(),this.adjustViewport()}return function(t,e,r){e&&h(t.prototype,e),r&&h(t,r)}(t,[{key:"updateCanvasSize",value:function(){var t=this.resolution.width*this.pixelMultiplier,e=this.resolution.height*this.pixelMultiplier;this.canvas.style.width="".concat(t,"px"),this.canvas.style.height="".concat(e,"px"),this.canvas.width=t*(window.devicePixelRatio||1),this.canvas.height=e*(window.devicePixelRatio||1)}},{key:"adjustViewport",value:function(){var t=this.canvas.width,e=this.canvas.height;this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this._canvasToWorld=i.CoordinateConversions.canvasToWorldMatrix(this.camera.matrix,{width:t,height:e},this.resolution)}},{key:"clear",value:function(){var t;(t=this.gl).clearColor.apply(t,l(this.clearColor)),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}},{key:"load",value:function(t){return this.loader.load(t)}},{key:"getProgram",value:function(t){var e=this.loader.getProgram(t);if(!e)throw"No program loaded for key '".concat(t,"'");return e}},{key:"enableCamera",value:function(){this.cameraEnabled=!0}},{key:"disableCamera",value:function(){this.cameraEnabled=!1}},{key:"beginRenderToTexture",value:function(){this.framebuffer.attach(),this.clear()}},{key:"endRenderToTexture",value:function(){this.framebuffer.detach(),this.adjustViewport()}},{key:"start",value:function(){var t,e=this;this.running||(requestAnimationFrame(function r(n){t||(t=n);var i=n-t;t=n,e.stage&&(e.stage.prerender(i),e.beginRenderToTexture(),e.stage.render(i),e.stage.postrender(i),e.endRenderToTexture(),e.clear(),e.framebufferRenderer.render([new f.Sprite({position:[0,0],size:[e.resolution.width,e.resolution.height]})],e.projection)),e.running&&requestAnimationFrame(r)}),this.running=!0)}},{key:"setStage",value:function(t){this.stage=t,t.app=this,t.init(this)}},{key:"canvasToWorld",get:function(){return this._canvasToWorld}},{key:"viewMatrix",get:function(){var t=o.mat4.create();return this.cameraEnabled&&(t=this.camera.matrix),o.mat4.multiply(o.mat4.create(),this.projection,t)}}]),t}();e.App=m;var v=m;e.default=v},5:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.twgl=e.default=void 0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(r(36));e.twgl=n;var i=n;e.default=i},51:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Grid=void 0;var n=u(r(5)),i=r(1),o=u(r(58)),a=u(r(57));function u(t){return t&&t.__esModule?t:{default:t}}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=new Float32Array([0,0,1,0,0,1,1,1]);var s=null,l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolution=e.resolution,s||(s=n.default.createProgramInfo(i.gl,[o.default,a.default])),this.programInfo=s,this.bufferInfo=n.default.createBufferInfoFromArrays(i.gl,{vertex:{data:c,numComponents:2,divisor:0,drawType:i.gl.STATIC_DRAW},position:{numComponents:2,divisor:1,drawType:i.gl.DYNAMIC_DRAW},size:{numComponents:2,divisor:1,drawType:i.gl.DYNAMIC_DRAW},indices:{data:[0,1,2,3]}}),this.vao=n.default.createVertexArrayInfo(i.gl,this.programInfo,this.bufferInfo),this.grids=[]}return function(t,e,r){e&&f(t.prototype,e),r&&f(t,r)}(t,[{key:"addGrid",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1,1,1],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=Math.ceil(this.resolution.width/t)+1,o=Math.ceil(this.resolution.height/e)+1,a=i+o,u=function(t,e,r){for(var n=t.xcells,i=t.ycells,o=e.w,a=e.h,u=r.lineWidth,f=new Float32Array(2*(n+i)),c=new Float32Array(2*(n+i)),s=o*(n+1),l=a*(i+1),d=0;d<i;++d)f[2*d]=0,f[2*d+1]=d*a,c[2*d]=s,c[2*d+1]=u;for(var h=0;h<n;++h)f[2*i+2*h]=h*o,f[2*i+2*h+1]=0,c[2*i+2*h]=u,c[2*i+2*h+1]=l;return{position:f,size:c}}({xcells:i,ycells:o},{w:t,h:e},{lineWidth:n}),f=u.position,c=u.size;this.grids.push({position:f,size:c,instanceCount:a,lineColor:r,sx:t,sy:e})}},{key:"render",value:function(t,e,r){var o=this;i.gl.useProgram(this.programInfo.program),n.default.setBuffersAndAttributes(i.gl,this.programInfo,this.vao);var a=[t,e];this.grids.forEach(function(t){var e=t.position,u=t.size,f=t.instanceCount,c=t.lineColor,s=t.sx,l=t.sy,d=[a[0]%s,a[1]%l];d[0]>0&&(d[0]=d[0]-s),d[1]>0&&(d[1]=d[1]-l),n.default.setAttribInfoBufferFromArray(i.gl,o.bufferInfo.attribs.position,e),n.default.setAttribInfoBufferFromArray(i.gl,o.bufferInfo.attribs.size,u),n.default.setUniforms(o.programInfo,{line_color:c,projection:r,offset:d}),n.default.drawBufferInfo(i.gl,o.vao,i.gl.TRIANGLE_STRIP,void 0,void 0,f)})}}]),t}();e.Grid=l},57:function(t,e){t.exports="#version 300 es\n\nprecision mediump float;\n\nuniform vec4 line_color;\n\nout vec4 out_color;\n\nvoid main() {\n    out_color = line_color;\n}\n"},58:function(t,e){t.exports="#version 300 es\n\nlayout(location = 0) in vec2 vertex;\nlayout(location = 1) in vec2 position;\nlayout(location = 2) in vec2 size;\n\nuniform mat4 projection;\nuniform vec2 offset;\n\nvoid main() {\n    vec4 transformed_position = projection * vec4(position + size * vertex + offset, 0, 1);\n    gl_Position = transformed_position;\n}\n"}});
//# sourceMappingURL=tilemap.bundle.js.map
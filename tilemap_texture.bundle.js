!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=270)}({1:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContext=function(t){e.gl=n=t},e.gl=void 0;var n={};e.gl=n},10:function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},15:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arraySetter=function(t){var e=0;return function(r){if(!r.length&&e+(r=[r]).length>t.length)throw new Error("attempting to append beyond buffer length");t.set(r,e),e+=r.length}},e.hsl2rgb=function(t,e,r){var n,a,o,i,u,f;isFinite(t)||(t=0);isFinite(e)||(e=0);isFinite(r)||(r=0);(t/=60)<0&&(t=6- -t%6);t%=6,e=Math.max(0,Math.min(1,e/100)),r=Math.max(0,Math.min(1,r/100)),u=(1-Math.abs(2*r-1))*e,f=u*(1-Math.abs(t%2-1)),t<1?(n=u,a=f,o=0):t<2?(n=f,a=u,o=0):t<3?(n=0,a=u,o=f):t<4?(n=0,a=f,o=u):t<5?(n=f,a=0,o=u):(n=u,a=0,o=f);return i=r-u/2,n=Math.round(255*(n+i)),a=Math.round(255*(a+i)),o=Math.round(255*(o+i)),[n,a,o]},e.attachFramebuffer=function(t,e,r){var n=t.createFramebuffer(),a=t.createTexture();return t.bindTexture(t.TEXTURE_2D,a),t.texStorage2D(t.TEXTURE_2D,1,t.RGBA8,e,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,a,0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null),{width:e,height:r,attach:function(){t.viewport(0,0,e,r),t.bindFramebuffer(t.FRAMEBUFFER,n)},detach:function(){t.bindFramebuffer(t.FRAMEBUFFER,null)},texture:a,framebuffer:n}},e.loadImage=function(t){return new Promise(function(e,r){var n=new Image;function a(){n.removeEventListener("load",null),n.removeEventListener("error",null)}n.addEventListener("load",function(){a(),e(n)}),n.addEventListener("error",function(t){a(),r(t)}),n.src=t})}},17:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=void 0;e.Sprite=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=e.position||[0,0],this.size=e.size,this.angle=0,this.offset=e.offset||[0,0],this.backgroundColor=e.backgroundColor||[0,0,0,0],this.textureName=e.textureName||null}},18:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpriteRenderer=void 0;var n=i(r(5)),a=i(r(34)),o=i(r(33));function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var f=new Float32Array([0,0,1,0,0,1,1,1]),c=function(){function t(e){var r=e.game,n=e.textureInfo;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=r.gl,this.loader=r.loader,this.game=r,this.textureInfo=n,this.setup()}return function(t,e,r){e&&u(t.prototype,e),r&&u(t,r)}(t,[{key:"setup",value:function(){this.programInfo=n.default.createProgramInfo(this.gl,[a.default,o.default]),this._arrays={vertex:{data:f,numComponents:2,divisor:0,drawType:this.gl.STATIC_DRAW},position:{numComponents:2,divisor:1,drawType:this.gl.DYNAMIC_DRAW},offset:{numComponents:2,divisor:1,drawType:this.gl.DYNAMIC_DRAW},size:{numComponents:2,divisor:1,drawType:this.gl.DYNAMIC_DRAW},texcoord:{data:[0,0,1,0,0,1,1,1],numComponents:2,divisor:0,type:Int16Array},indices:{data:[0,1,2,3]}},this.bufferInfo=n.default.createBufferInfoFromArrays(this.gl,this._arrays),this.vao=n.default.createVertexArrayInfo(this.gl,this.programInfo,this.bufferInfo)}},{key:"render",value:function(t,e){var r=new Float32Array(2*t.length),a=new Float32Array(2*t.length),o=new Float32Array(2*t.length);t.forEach(function(t,e){t.position.forEach(function(t,n){r[2*e+n]=t}),t.size.forEach(function(t,r){a[2*e+r]=t}),t.offset.forEach(function(t,r){o[2*e+r]=t})}),n.default.setAttribInfoBufferFromArray(this.gl,this.bufferInfo.attribs.position,r),n.default.setAttribInfoBufferFromArray(this.gl,this.bufferInfo.attribs.size,a),n.default.setAttribInfoBufferFromArray(this.gl,this.bufferInfo.attribs.offset,o),this.gl.useProgram(this.programInfo.program),n.default.setUniforms(this.programInfo,{projection:e,texture:this.textureInfo.texture}),n.default.setBuffersAndAttributes(this.gl,this.programInfo,this.vao),n.default.drawBufferInfo(this.gl,this.vao,this.gl.TRIANGLE_STRIP,void 0,void 0,t.length)}}]),t}();e.SpriteRenderer=c},2:function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"EPSILON",function(){return h}),r.d(n,"ARRAY_TYPE",function(){return p}),r.d(n,"RANDOM",function(){return m}),r.d(n,"setMatrixArrayType",function(){return b}),r.d(n,"toRadian",function(){return y}),r.d(n,"equals",function(){return g});var a={};r.r(a),r.d(a,"create",function(){return E}),r.d(a,"clone",function(){return M}),r.d(a,"copy",function(){return x}),r.d(a,"identity",function(){return _}),r.d(a,"fromValues",function(){return A}),r.d(a,"set",function(){return T}),r.d(a,"transpose",function(){return R}),r.d(a,"invert",function(){return w}),r.d(a,"adjoint",function(){return P}),r.d(a,"determinant",function(){return F}),r.d(a,"multiply",function(){return S}),r.d(a,"rotate",function(){return O}),r.d(a,"scale",function(){return I}),r.d(a,"fromRotation",function(){return B}),r.d(a,"fromScaling",function(){return U}),r.d(a,"str",function(){return C}),r.d(a,"frob",function(){return D}),r.d(a,"LDU",function(){return L}),r.d(a,"add",function(){return N}),r.d(a,"subtract",function(){return k}),r.d(a,"exactEquals",function(){return j}),r.d(a,"equals",function(){return G}),r.d(a,"multiplyScalar",function(){return X}),r.d(a,"multiplyScalarAndAdd",function(){return z}),r.d(a,"mul",function(){return W}),r.d(a,"sub",function(){return q});var o={};r.r(o),r.d(o,"create",function(){return V}),r.d(o,"clone",function(){return Y}),r.d(o,"copy",function(){return K}),r.d(o,"identity",function(){return H}),r.d(o,"fromValues",function(){return Q}),r.d(o,"set",function(){return Z}),r.d(o,"invert",function(){return $}),r.d(o,"determinant",function(){return J}),r.d(o,"multiply",function(){return tt}),r.d(o,"rotate",function(){return et}),r.d(o,"scale",function(){return rt}),r.d(o,"translate",function(){return nt}),r.d(o,"fromRotation",function(){return at}),r.d(o,"fromScaling",function(){return ot}),r.d(o,"fromTranslation",function(){return it}),r.d(o,"str",function(){return ut}),r.d(o,"frob",function(){return ft}),r.d(o,"add",function(){return ct}),r.d(o,"subtract",function(){return st}),r.d(o,"multiplyScalar",function(){return lt}),r.d(o,"multiplyScalarAndAdd",function(){return dt}),r.d(o,"exactEquals",function(){return ht}),r.d(o,"equals",function(){return pt}),r.d(o,"mul",function(){return mt}),r.d(o,"sub",function(){return bt});var i={};r.r(i),r.d(i,"create",function(){return vt}),r.d(i,"fromMat4",function(){return yt}),r.d(i,"clone",function(){return gt}),r.d(i,"copy",function(){return Et}),r.d(i,"fromValues",function(){return Mt}),r.d(i,"set",function(){return xt}),r.d(i,"identity",function(){return _t}),r.d(i,"transpose",function(){return At}),r.d(i,"invert",function(){return Tt}),r.d(i,"adjoint",function(){return Rt}),r.d(i,"determinant",function(){return wt}),r.d(i,"multiply",function(){return Pt}),r.d(i,"translate",function(){return Ft}),r.d(i,"rotate",function(){return St}),r.d(i,"scale",function(){return Ot}),r.d(i,"fromTranslation",function(){return It}),r.d(i,"fromRotation",function(){return Bt}),r.d(i,"fromScaling",function(){return Ut}),r.d(i,"fromMat2d",function(){return Ct}),r.d(i,"fromQuat",function(){return Dt}),r.d(i,"normalFromMat4",function(){return Lt}),r.d(i,"projection",function(){return Nt}),r.d(i,"str",function(){return kt}),r.d(i,"frob",function(){return jt}),r.d(i,"add",function(){return Gt}),r.d(i,"subtract",function(){return Xt}),r.d(i,"multiplyScalar",function(){return zt}),r.d(i,"multiplyScalarAndAdd",function(){return Wt}),r.d(i,"exactEquals",function(){return qt}),r.d(i,"equals",function(){return Vt}),r.d(i,"mul",function(){return Yt}),r.d(i,"sub",function(){return Kt});var u={};r.r(u),r.d(u,"create",function(){return Ht}),r.d(u,"clone",function(){return Qt}),r.d(u,"copy",function(){return Zt}),r.d(u,"fromValues",function(){return $t}),r.d(u,"set",function(){return Jt}),r.d(u,"identity",function(){return te}),r.d(u,"transpose",function(){return ee}),r.d(u,"invert",function(){return re}),r.d(u,"adjoint",function(){return ne}),r.d(u,"determinant",function(){return ae}),r.d(u,"multiply",function(){return oe}),r.d(u,"translate",function(){return ie}),r.d(u,"scale",function(){return ue}),r.d(u,"rotate",function(){return fe}),r.d(u,"rotateX",function(){return ce}),r.d(u,"rotateY",function(){return se}),r.d(u,"rotateZ",function(){return le}),r.d(u,"fromTranslation",function(){return de}),r.d(u,"fromScaling",function(){return he}),r.d(u,"fromRotation",function(){return pe}),r.d(u,"fromXRotation",function(){return me}),r.d(u,"fromYRotation",function(){return be}),r.d(u,"fromZRotation",function(){return ve}),r.d(u,"fromRotationTranslation",function(){return ye}),r.d(u,"fromQuat2",function(){return ge}),r.d(u,"getTranslation",function(){return Ee}),r.d(u,"getScaling",function(){return Me}),r.d(u,"getRotation",function(){return xe}),r.d(u,"fromRotationTranslationScale",function(){return _e}),r.d(u,"fromRotationTranslationScaleOrigin",function(){return Ae}),r.d(u,"fromQuat",function(){return Te}),r.d(u,"frustum",function(){return Re}),r.d(u,"perspective",function(){return we}),r.d(u,"perspectiveFromFieldOfView",function(){return Pe}),r.d(u,"ortho",function(){return Fe}),r.d(u,"lookAt",function(){return Se}),r.d(u,"targetTo",function(){return Oe}),r.d(u,"str",function(){return Ie}),r.d(u,"frob",function(){return Be}),r.d(u,"add",function(){return Ue}),r.d(u,"subtract",function(){return Ce}),r.d(u,"multiplyScalar",function(){return De}),r.d(u,"multiplyScalarAndAdd",function(){return Le}),r.d(u,"exactEquals",function(){return Ne}),r.d(u,"equals",function(){return ke}),r.d(u,"mul",function(){return je}),r.d(u,"sub",function(){return Ge});var f={};r.r(f),r.d(f,"create",function(){return Xe}),r.d(f,"clone",function(){return ze}),r.d(f,"length",function(){return We}),r.d(f,"fromValues",function(){return qe}),r.d(f,"copy",function(){return Ve}),r.d(f,"set",function(){return Ye}),r.d(f,"add",function(){return Ke}),r.d(f,"subtract",function(){return He}),r.d(f,"multiply",function(){return Qe}),r.d(f,"divide",function(){return Ze}),r.d(f,"ceil",function(){return $e}),r.d(f,"floor",function(){return Je}),r.d(f,"min",function(){return tr}),r.d(f,"max",function(){return er}),r.d(f,"round",function(){return rr}),r.d(f,"scale",function(){return nr}),r.d(f,"scaleAndAdd",function(){return ar}),r.d(f,"distance",function(){return or}),r.d(f,"squaredDistance",function(){return ir}),r.d(f,"squaredLength",function(){return ur}),r.d(f,"negate",function(){return fr}),r.d(f,"inverse",function(){return cr}),r.d(f,"normalize",function(){return sr}),r.d(f,"dot",function(){return lr}),r.d(f,"cross",function(){return dr}),r.d(f,"lerp",function(){return hr}),r.d(f,"hermite",function(){return pr}),r.d(f,"bezier",function(){return mr}),r.d(f,"random",function(){return br}),r.d(f,"transformMat4",function(){return vr}),r.d(f,"transformMat3",function(){return yr}),r.d(f,"transformQuat",function(){return gr}),r.d(f,"rotateX",function(){return Er}),r.d(f,"rotateY",function(){return Mr}),r.d(f,"rotateZ",function(){return xr}),r.d(f,"angle",function(){return _r}),r.d(f,"str",function(){return Ar}),r.d(f,"exactEquals",function(){return Tr}),r.d(f,"equals",function(){return Rr}),r.d(f,"sub",function(){return wr}),r.d(f,"mul",function(){return Pr}),r.d(f,"div",function(){return Fr}),r.d(f,"dist",function(){return Sr}),r.d(f,"sqrDist",function(){return Or}),r.d(f,"len",function(){return Ir}),r.d(f,"sqrLen",function(){return Br}),r.d(f,"forEach",function(){return Ur});var c={};r.r(c),r.d(c,"create",function(){return Cr}),r.d(c,"clone",function(){return Dr}),r.d(c,"fromValues",function(){return Lr}),r.d(c,"copy",function(){return Nr}),r.d(c,"set",function(){return kr}),r.d(c,"add",function(){return jr}),r.d(c,"subtract",function(){return Gr}),r.d(c,"multiply",function(){return Xr}),r.d(c,"divide",function(){return zr}),r.d(c,"ceil",function(){return Wr}),r.d(c,"floor",function(){return qr}),r.d(c,"min",function(){return Vr}),r.d(c,"max",function(){return Yr}),r.d(c,"round",function(){return Kr}),r.d(c,"scale",function(){return Hr}),r.d(c,"scaleAndAdd",function(){return Qr}),r.d(c,"distance",function(){return Zr}),r.d(c,"squaredDistance",function(){return $r}),r.d(c,"length",function(){return Jr}),r.d(c,"squaredLength",function(){return tn}),r.d(c,"negate",function(){return en}),r.d(c,"inverse",function(){return rn}),r.d(c,"normalize",function(){return nn}),r.d(c,"dot",function(){return an}),r.d(c,"lerp",function(){return on}),r.d(c,"random",function(){return un}),r.d(c,"transformMat4",function(){return fn}),r.d(c,"transformQuat",function(){return cn}),r.d(c,"str",function(){return sn}),r.d(c,"exactEquals",function(){return ln}),r.d(c,"equals",function(){return dn}),r.d(c,"sub",function(){return hn}),r.d(c,"mul",function(){return pn}),r.d(c,"div",function(){return mn}),r.d(c,"dist",function(){return bn}),r.d(c,"sqrDist",function(){return vn}),r.d(c,"len",function(){return yn}),r.d(c,"sqrLen",function(){return gn}),r.d(c,"forEach",function(){return En});var s={};r.r(s),r.d(s,"create",function(){return Mn}),r.d(s,"identity",function(){return xn}),r.d(s,"setAxisAngle",function(){return _n}),r.d(s,"getAxisAngle",function(){return An}),r.d(s,"multiply",function(){return Tn}),r.d(s,"rotateX",function(){return Rn}),r.d(s,"rotateY",function(){return wn}),r.d(s,"rotateZ",function(){return Pn}),r.d(s,"calculateW",function(){return Fn}),r.d(s,"slerp",function(){return Sn}),r.d(s,"invert",function(){return On}),r.d(s,"conjugate",function(){return In}),r.d(s,"fromMat3",function(){return Bn}),r.d(s,"fromEuler",function(){return Un}),r.d(s,"str",function(){return Cn}),r.d(s,"clone",function(){return Dn}),r.d(s,"fromValues",function(){return Ln}),r.d(s,"copy",function(){return Nn}),r.d(s,"set",function(){return kn}),r.d(s,"add",function(){return jn}),r.d(s,"mul",function(){return Gn}),r.d(s,"scale",function(){return Xn}),r.d(s,"dot",function(){return zn}),r.d(s,"lerp",function(){return Wn}),r.d(s,"length",function(){return qn}),r.d(s,"len",function(){return Vn}),r.d(s,"squaredLength",function(){return Yn}),r.d(s,"sqrLen",function(){return Kn}),r.d(s,"normalize",function(){return Hn}),r.d(s,"exactEquals",function(){return Qn}),r.d(s,"equals",function(){return Zn}),r.d(s,"rotationTo",function(){return $n}),r.d(s,"sqlerp",function(){return Jn}),r.d(s,"setAxes",function(){return ta});var l={};r.r(l),r.d(l,"create",function(){return ea}),r.d(l,"clone",function(){return ra}),r.d(l,"fromValues",function(){return na}),r.d(l,"fromRotationTranslationValues",function(){return aa}),r.d(l,"fromRotationTranslation",function(){return oa}),r.d(l,"fromTranslation",function(){return ia}),r.d(l,"fromRotation",function(){return ua}),r.d(l,"fromMat4",function(){return fa}),r.d(l,"copy",function(){return ca}),r.d(l,"identity",function(){return sa}),r.d(l,"set",function(){return la}),r.d(l,"getReal",function(){return da}),r.d(l,"getDual",function(){return ha}),r.d(l,"setReal",function(){return pa}),r.d(l,"setDual",function(){return ma}),r.d(l,"getTranslation",function(){return ba}),r.d(l,"translate",function(){return va}),r.d(l,"rotateX",function(){return ya}),r.d(l,"rotateY",function(){return ga}),r.d(l,"rotateZ",function(){return Ea}),r.d(l,"rotateByQuatAppend",function(){return Ma}),r.d(l,"rotateByQuatPrepend",function(){return xa}),r.d(l,"rotateAroundAxis",function(){return _a}),r.d(l,"add",function(){return Aa}),r.d(l,"multiply",function(){return Ta}),r.d(l,"mul",function(){return Ra}),r.d(l,"scale",function(){return wa}),r.d(l,"dot",function(){return Pa}),r.d(l,"lerp",function(){return Fa}),r.d(l,"invert",function(){return Sa}),r.d(l,"conjugate",function(){return Oa}),r.d(l,"length",function(){return Ia}),r.d(l,"len",function(){return Ba}),r.d(l,"squaredLength",function(){return Ua}),r.d(l,"sqrLen",function(){return Ca}),r.d(l,"normalize",function(){return Da}),r.d(l,"str",function(){return La}),r.d(l,"exactEquals",function(){return Na}),r.d(l,"equals",function(){return ka});var d={};r.r(d),r.d(d,"create",function(){return ja}),r.d(d,"clone",function(){return Ga}),r.d(d,"fromValues",function(){return Xa}),r.d(d,"copy",function(){return za}),r.d(d,"set",function(){return Wa}),r.d(d,"add",function(){return qa}),r.d(d,"subtract",function(){return Va}),r.d(d,"multiply",function(){return Ya}),r.d(d,"divide",function(){return Ka}),r.d(d,"ceil",function(){return Ha}),r.d(d,"floor",function(){return Qa}),r.d(d,"min",function(){return Za}),r.d(d,"max",function(){return $a}),r.d(d,"round",function(){return Ja}),r.d(d,"scale",function(){return to}),r.d(d,"scaleAndAdd",function(){return eo}),r.d(d,"distance",function(){return ro}),r.d(d,"squaredDistance",function(){return no}),r.d(d,"length",function(){return ao}),r.d(d,"squaredLength",function(){return oo}),r.d(d,"negate",function(){return io}),r.d(d,"inverse",function(){return uo}),r.d(d,"normalize",function(){return fo}),r.d(d,"dot",function(){return co}),r.d(d,"cross",function(){return so}),r.d(d,"lerp",function(){return lo}),r.d(d,"random",function(){return ho}),r.d(d,"transformMat2",function(){return po}),r.d(d,"transformMat2d",function(){return mo}),r.d(d,"transformMat3",function(){return bo}),r.d(d,"transformMat4",function(){return vo}),r.d(d,"rotate",function(){return yo}),r.d(d,"angle",function(){return go}),r.d(d,"str",function(){return Eo}),r.d(d,"exactEquals",function(){return Mo}),r.d(d,"equals",function(){return xo}),r.d(d,"len",function(){return _o}),r.d(d,"sub",function(){return Ao}),r.d(d,"mul",function(){return To}),r.d(d,"div",function(){return Ro}),r.d(d,"dist",function(){return wo}),r.d(d,"sqrDist",function(){return Po}),r.d(d,"sqrLen",function(){return Fo}),r.d(d,"forEach",function(){return So});const h=1e-6;let p="undefined"!=typeof Float32Array?Float32Array:Array;const m=Math.random;function b(t){p=t}const v=Math.PI/180;function y(t){return t*v}function g(t,e){return Math.abs(t-e)<=h*Math.max(1,Math.abs(t),Math.abs(e))}function E(){let t=new p(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function M(t){let e=new p(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function x(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function _(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function A(t,e,r,n){let a=new p(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a}function T(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t}function R(t,e){if(t===e){let r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function w(t,e){let r=e[0],n=e[1],a=e[2],o=e[3],i=r*o-a*n;return i?(i=1/i,t[0]=o*i,t[1]=-n*i,t[2]=-a*i,t[3]=r*i,t):null}function P(t,e){let r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function F(t){return t[0]*t[3]-t[2]*t[1]}function S(t,e,r){let n=e[0],a=e[1],o=e[2],i=e[3],u=r[0],f=r[1],c=r[2],s=r[3];return t[0]=n*u+o*f,t[1]=a*u+i*f,t[2]=n*c+o*s,t[3]=a*c+i*s,t}function O(t,e,r){let n=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(r),f=Math.cos(r);return t[0]=n*f+o*u,t[1]=a*f+i*u,t[2]=n*-u+o*f,t[3]=a*-u+i*f,t}function I(t,e,r){let n=e[0],a=e[1],o=e[2],i=e[3],u=r[0],f=r[1];return t[0]=n*u,t[1]=a*u,t[2]=o*f,t[3]=i*f,t}function B(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function U(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function C(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function D(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function L(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function N(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function k(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function j(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function G(t,e){let r=t[0],n=t[1],a=t[2],o=t[3],i=e[0],u=e[1],f=e[2],c=e[3];return Math.abs(r-i)<=h*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-u)<=h*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-f)<=h*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-c)<=h*Math.max(1,Math.abs(o),Math.abs(c))}function X(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function z(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}const W=S,q=k;function V(){let t=new p(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Y(t){let e=new p(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function K(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function H(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Q(t,e,r,n,a,o){let i=new p(6);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i[4]=a,i[5]=o,i}function Z(t,e,r,n,a,o,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t}function $(t,e){let r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],u=e[5],f=r*o-n*a;return f?(f=1/f,t[0]=o*f,t[1]=-n*f,t[2]=-a*f,t[3]=r*f,t[4]=(a*u-o*i)*f,t[5]=(n*i-r*u)*f,t):null}function J(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,r){let n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],f=e[5],c=r[0],s=r[1],l=r[2],d=r[3],h=r[4],p=r[5];return t[0]=n*c+o*s,t[1]=a*c+i*s,t[2]=n*l+o*d,t[3]=a*l+i*d,t[4]=n*h+o*p+u,t[5]=a*h+i*p+f,t}function et(t,e,r){let n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],f=e[5],c=Math.sin(r),s=Math.cos(r);return t[0]=n*s+o*c,t[1]=a*s+i*c,t[2]=n*-c+o*s,t[3]=a*-c+i*s,t[4]=u,t[5]=f,t}function rt(t,e,r){let n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],f=e[5],c=r[0],s=r[1];return t[0]=n*c,t[1]=a*c,t[2]=o*s,t[3]=i*s,t[4]=u,t[5]=f,t}function nt(t,e,r){let n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],f=e[5],c=r[0],s=r[1];return t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=n*c+o*s+u,t[5]=a*c+i*s+f,t}function at(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function ot(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function it(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function ut(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ft(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function ct(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function st(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function lt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function dt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function ht(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function pt(t,e){let r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],u=t[5],f=e[0],c=e[1],s=e[2],l=e[3],d=e[4],p=e[5];return Math.abs(r-f)<=h*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-c)<=h*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-s)<=h*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-l)<=h*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-d)<=h*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(u-p)<=h*Math.max(1,Math.abs(u),Math.abs(p))}const mt=tt,bt=st;function vt(){let t=new p(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function yt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function gt(t){let e=new p(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Et(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Mt(t,e,r,n,a,o,i,u,f){let c=new p(9);return c[0]=t,c[1]=e,c[2]=r,c[3]=n,c[4]=a,c[5]=o,c[6]=i,c[7]=u,c[8]=f,c}function xt(t,e,r,n,a,o,i,u,f,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=f,t[8]=c,t}function _t(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function At(t,e){if(t===e){let r=e[1],n=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Tt(t,e){let r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],u=e[5],f=e[6],c=e[7],s=e[8],l=s*i-u*c,d=-s*o+u*f,h=c*o-i*f,p=r*l+n*d+a*h;return p?(p=1/p,t[0]=l*p,t[1]=(-s*n+a*c)*p,t[2]=(u*n-a*i)*p,t[3]=d*p,t[4]=(s*r-a*f)*p,t[5]=(-u*r+a*o)*p,t[6]=h*p,t[7]=(-c*r+n*f)*p,t[8]=(i*r-n*o)*p,t):null}function Rt(t,e){let r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],u=e[5],f=e[6],c=e[7],s=e[8];return t[0]=i*s-u*c,t[1]=a*c-n*s,t[2]=n*u-a*i,t[3]=u*f-o*s,t[4]=r*s-a*f,t[5]=a*o-r*u,t[6]=o*c-i*f,t[7]=n*f-r*c,t[8]=r*i-n*o,t}function wt(t){let e=t[0],r=t[1],n=t[2],a=t[3],o=t[4],i=t[5],u=t[6],f=t[7],c=t[8];return e*(c*o-i*f)+r*(-c*a+i*u)+n*(f*a-o*u)}function Pt(t,e,r){let n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=e[8],d=r[0],h=r[1],p=r[2],m=r[3],b=r[4],v=r[5],y=r[6],g=r[7],E=r[8];return t[0]=d*n+h*i+p*c,t[1]=d*a+h*u+p*s,t[2]=d*o+h*f+p*l,t[3]=m*n+b*i+v*c,t[4]=m*a+b*u+v*s,t[5]=m*o+b*f+v*l,t[6]=y*n+g*i+E*c,t[7]=y*a+g*u+E*s,t[8]=y*o+g*f+E*l,t}function Ft(t,e,r){let n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=e[8],d=r[0],h=r[1];return t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=f,t[6]=d*n+h*i+c,t[7]=d*a+h*u+s,t[8]=d*o+h*f+l,t}function St(t,e,r){let n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=e[8],d=Math.sin(r),h=Math.cos(r);return t[0]=h*n+d*i,t[1]=h*a+d*u,t[2]=h*o+d*f,t[3]=h*i-d*n,t[4]=h*u-d*a,t[5]=h*f-d*o,t[6]=c,t[7]=s,t[8]=l,t}function Ot(t,e,r){let n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function It(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Bt(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ut(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ct(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Dt(t,e){let r=e[0],n=e[1],a=e[2],o=e[3],i=r+r,u=n+n,f=a+a,c=r*i,s=n*i,l=n*u,d=a*i,h=a*u,p=a*f,m=o*i,b=o*u,v=o*f;return t[0]=1-l-p,t[3]=s-v,t[6]=d+b,t[1]=s+v,t[4]=1-c-p,t[7]=h-m,t[2]=d-b,t[5]=h+m,t[8]=1-c-l,t}function Lt(t,e){let r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],u=e[5],f=e[6],c=e[7],s=e[8],l=e[9],d=e[10],h=e[11],p=e[12],m=e[13],b=e[14],v=e[15],y=r*u-n*i,g=r*f-a*i,E=r*c-o*i,M=n*f-a*u,x=n*c-o*u,_=a*c-o*f,A=s*m-l*p,T=s*b-d*p,R=s*v-h*p,w=l*b-d*m,P=l*v-h*m,F=d*v-h*b,S=y*F-g*P+E*w+M*R-x*T+_*A;return S?(S=1/S,t[0]=(u*F-f*P+c*w)*S,t[1]=(f*R-i*F-c*T)*S,t[2]=(i*P-u*R+c*A)*S,t[3]=(a*P-n*F-o*w)*S,t[4]=(r*F-a*R+o*T)*S,t[5]=(n*R-r*P-o*A)*S,t[6]=(m*_-b*x+v*M)*S,t[7]=(b*E-p*_-v*g)*S,t[8]=(p*x-m*E+v*y)*S,t):null}function Nt(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function kt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function jt(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function Gt(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function Xt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function zt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function Wt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function qt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Vt(t,e){let r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],u=t[5],f=t[6],c=t[7],s=t[8],l=e[0],d=e[1],p=e[2],m=e[3],b=e[4],v=e[5],y=e[6],g=e[7],E=e[8];return Math.abs(r-l)<=h*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-d)<=h*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-p)<=h*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-m)<=h*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(i-b)<=h*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(u-v)<=h*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(f-y)<=h*Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(c-g)<=h*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(s-E)<=h*Math.max(1,Math.abs(s),Math.abs(E))}const Yt=Pt,Kt=Xt;function Ht(){let t=new p(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Qt(t){let e=new p(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Zt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $t(t,e,r,n,a,o,i,u,f,c,s,l,d,h,m,b){let v=new p(16);return v[0]=t,v[1]=e,v[2]=r,v[3]=n,v[4]=a,v[5]=o,v[6]=i,v[7]=u,v[8]=f,v[9]=c,v[10]=s,v[11]=l,v[12]=d,v[13]=h,v[14]=m,v[15]=b,v}function Jt(t,e,r,n,a,o,i,u,f,c,s,l,d,h,p,m,b){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=f,t[8]=c,t[9]=s,t[10]=l,t[11]=d,t[12]=h,t[13]=p,t[14]=m,t[15]=b,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){let r=e[1],n=e[2],a=e[3],o=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function re(t,e){let r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],u=e[5],f=e[6],c=e[7],s=e[8],l=e[9],d=e[10],h=e[11],p=e[12],m=e[13],b=e[14],v=e[15],y=r*u-n*i,g=r*f-a*i,E=r*c-o*i,M=n*f-a*u,x=n*c-o*u,_=a*c-o*f,A=s*m-l*p,T=s*b-d*p,R=s*v-h*p,w=l*b-d*m,P=l*v-h*m,F=d*v-h*b,S=y*F-g*P+E*w+M*R-x*T+_*A;return S?(S=1/S,t[0]=(u*F-f*P+c*w)*S,t[1]=(a*P-n*F-o*w)*S,t[2]=(m*_-b*x+v*M)*S,t[3]=(d*x-l*_-h*M)*S,t[4]=(f*R-i*F-c*T)*S,t[5]=(r*F-a*R+o*T)*S,t[6]=(b*E-p*_-v*g)*S,t[7]=(s*_-d*E+h*g)*S,t[8]=(i*P-u*R+c*A)*S,t[9]=(n*R-r*P-o*A)*S,t[10]=(p*x-m*E+v*y)*S,t[11]=(l*E-s*x-h*y)*S,t[12]=(u*T-i*w-f*A)*S,t[13]=(r*w-n*T+a*A)*S,t[14]=(m*g-p*M-b*y)*S,t[15]=(s*M-l*g+d*y)*S,t):null}function ne(t,e){let r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],u=e[5],f=e[6],c=e[7],s=e[8],l=e[9],d=e[10],h=e[11],p=e[12],m=e[13],b=e[14],v=e[15];return t[0]=u*(d*v-h*b)-l*(f*v-c*b)+m*(f*h-c*d),t[1]=-(n*(d*v-h*b)-l*(a*v-o*b)+m*(a*h-o*d)),t[2]=n*(f*v-c*b)-u*(a*v-o*b)+m*(a*c-o*f),t[3]=-(n*(f*h-c*d)-u*(a*h-o*d)+l*(a*c-o*f)),t[4]=-(i*(d*v-h*b)-s*(f*v-c*b)+p*(f*h-c*d)),t[5]=r*(d*v-h*b)-s*(a*v-o*b)+p*(a*h-o*d),t[6]=-(r*(f*v-c*b)-i*(a*v-o*b)+p*(a*c-o*f)),t[7]=r*(f*h-c*d)-i*(a*h-o*d)+s*(a*c-o*f),t[8]=i*(l*v-h*m)-s*(u*v-c*m)+p*(u*h-c*l),t[9]=-(r*(l*v-h*m)-s*(n*v-o*m)+p*(n*h-o*l)),t[10]=r*(u*v-c*m)-i*(n*v-o*m)+p*(n*c-o*u),t[11]=-(r*(u*h-c*l)-i*(n*h-o*l)+s*(n*c-o*u)),t[12]=-(i*(l*b-d*m)-s*(u*b-f*m)+p*(u*d-f*l)),t[13]=r*(l*b-d*m)-s*(n*b-a*m)+p*(n*d-a*l),t[14]=-(r*(u*b-f*m)-i*(n*b-a*m)+p*(n*f-a*u)),t[15]=r*(u*d-f*l)-i*(n*d-a*l)+s*(n*f-a*u),t}function ae(t){let e=t[0],r=t[1],n=t[2],a=t[3],o=t[4],i=t[5],u=t[6],f=t[7],c=t[8],s=t[9],l=t[10],d=t[11],h=t[12],p=t[13],m=t[14],b=t[15];return(e*i-r*o)*(l*b-d*m)-(e*u-n*o)*(s*b-d*p)+(e*f-a*o)*(s*m-l*p)+(r*u-n*i)*(c*b-d*h)-(r*f-a*i)*(c*m-l*h)+(n*f-a*u)*(c*p-s*h)}function oe(t,e,r){let n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=e[8],d=e[9],h=e[10],p=e[11],m=e[12],b=e[13],v=e[14],y=e[15],g=r[0],E=r[1],M=r[2],x=r[3];return t[0]=g*n+E*u+M*l+x*m,t[1]=g*a+E*f+M*d+x*b,t[2]=g*o+E*c+M*h+x*v,t[3]=g*i+E*s+M*p+x*y,g=r[4],E=r[5],M=r[6],x=r[7],t[4]=g*n+E*u+M*l+x*m,t[5]=g*a+E*f+M*d+x*b,t[6]=g*o+E*c+M*h+x*v,t[7]=g*i+E*s+M*p+x*y,g=r[8],E=r[9],M=r[10],x=r[11],t[8]=g*n+E*u+M*l+x*m,t[9]=g*a+E*f+M*d+x*b,t[10]=g*o+E*c+M*h+x*v,t[11]=g*i+E*s+M*p+x*y,g=r[12],E=r[13],M=r[14],x=r[15],t[12]=g*n+E*u+M*l+x*m,t[13]=g*a+E*f+M*d+x*b,t[14]=g*o+E*c+M*h+x*v,t[15]=g*i+E*s+M*p+x*y,t}function ie(t,e,r){let n,a,o,i,u,f,c,s,l,d,h,p,m=r[0],b=r[1],v=r[2];return e===t?(t[12]=e[0]*m+e[4]*b+e[8]*v+e[12],t[13]=e[1]*m+e[5]*b+e[9]*v+e[13],t[14]=e[2]*m+e[6]*b+e[10]*v+e[14],t[15]=e[3]*m+e[7]*b+e[11]*v+e[15]):(n=e[0],a=e[1],o=e[2],i=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=e[8],d=e[9],h=e[10],p=e[11],t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=f,t[6]=c,t[7]=s,t[8]=l,t[9]=d,t[10]=h,t[11]=p,t[12]=n*m+u*b+l*v+e[12],t[13]=a*m+f*b+d*v+e[13],t[14]=o*m+c*b+h*v+e[14],t[15]=i*m+s*b+p*v+e[15]),t}function ue(t,e,r){let n=r[0],a=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function fe(t,e,r,n){let a,o,i,u,f,c,s,l,d,p,m,b,v,y,g,E,M,x,_,A,T,R,w,P,F=n[0],S=n[1],O=n[2],I=Math.sqrt(F*F+S*S+O*O);return I<h?null:(F*=I=1/I,S*=I,O*=I,a=Math.sin(r),i=1-(o=Math.cos(r)),u=e[0],f=e[1],c=e[2],s=e[3],l=e[4],d=e[5],p=e[6],m=e[7],b=e[8],v=e[9],y=e[10],g=e[11],E=F*F*i+o,M=S*F*i+O*a,x=O*F*i-S*a,_=F*S*i-O*a,A=S*S*i+o,T=O*S*i+F*a,R=F*O*i+S*a,w=S*O*i-F*a,P=O*O*i+o,t[0]=u*E+l*M+b*x,t[1]=f*E+d*M+v*x,t[2]=c*E+p*M+y*x,t[3]=s*E+m*M+g*x,t[4]=u*_+l*A+b*T,t[5]=f*_+d*A+v*T,t[6]=c*_+p*A+y*T,t[7]=s*_+m*A+g*T,t[8]=u*R+l*w+b*P,t[9]=f*R+d*w+v*P,t[10]=c*R+p*w+y*P,t[11]=s*R+m*w+g*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,r){let n=Math.sin(r),a=Math.cos(r),o=e[4],i=e[5],u=e[6],f=e[7],c=e[8],s=e[9],l=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+c*n,t[5]=i*a+s*n,t[6]=u*a+l*n,t[7]=f*a+d*n,t[8]=c*a-o*n,t[9]=s*a-i*n,t[10]=l*a-u*n,t[11]=d*a-f*n,t}function se(t,e,r){let n=Math.sin(r),a=Math.cos(r),o=e[0],i=e[1],u=e[2],f=e[3],c=e[8],s=e[9],l=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a-c*n,t[1]=i*a-s*n,t[2]=u*a-l*n,t[3]=f*a-d*n,t[8]=o*n+c*a,t[9]=i*n+s*a,t[10]=u*n+l*a,t[11]=f*n+d*a,t}function le(t,e,r){let n=Math.sin(r),a=Math.cos(r),o=e[0],i=e[1],u=e[2],f=e[3],c=e[4],s=e[5],l=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+c*n,t[1]=i*a+s*n,t[2]=u*a+l*n,t[3]=f*a+d*n,t[4]=c*a-o*n,t[5]=s*a-i*n,t[6]=l*a-u*n,t[7]=d*a-f*n,t}function de(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function he(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pe(t,e,r){let n,a,o,i=r[0],u=r[1],f=r[2],c=Math.sqrt(i*i+u*u+f*f);return c<h?null:(i*=c=1/c,u*=c,f*=c,n=Math.sin(e),o=1-(a=Math.cos(e)),t[0]=i*i*o+a,t[1]=u*i*o+f*n,t[2]=f*i*o-u*n,t[3]=0,t[4]=i*u*o-f*n,t[5]=u*u*o+a,t[6]=f*u*o+i*n,t[7]=0,t[8]=i*f*o+u*n,t[9]=u*f*o-i*n,t[10]=f*f*o+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function me(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function be(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ye(t,e,r){let n=e[0],a=e[1],o=e[2],i=e[3],u=n+n,f=a+a,c=o+o,s=n*u,l=n*f,d=n*c,h=a*f,p=a*c,m=o*c,b=i*u,v=i*f,y=i*c;return t[0]=1-(h+m),t[1]=l+y,t[2]=d-v,t[3]=0,t[4]=l-y,t[5]=1-(s+m),t[6]=p+b,t[7]=0,t[8]=d+v,t[9]=p-b,t[10]=1-(s+h),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function ge(t,e){let r=new p(3),n=-e[0],a=-e[1],o=-e[2],i=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=n*n+a*a+o*o+i*i;return l>0?(r[0]=2*(u*i+s*n+f*o-c*a)/l,r[1]=2*(f*i+s*a+c*n-u*o)/l,r[2]=2*(c*i+s*o+u*a-f*n)/l):(r[0]=2*(u*i+s*n+f*o-c*a),r[1]=2*(f*i+s*a+c*n-u*o),r[2]=2*(c*i+s*o+u*a-f*n)),ye(t,e,r),t}function Ee(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Me(t,e){let r=e[0],n=e[1],a=e[2],o=e[4],i=e[5],u=e[6],f=e[8],c=e[9],s=e[10];return t[0]=Math.sqrt(r*r+n*n+a*a),t[1]=Math.sqrt(o*o+i*i+u*u),t[2]=Math.sqrt(f*f+c*c+s*s),t}function xe(t,e){let r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t}function _e(t,e,r,n){let a=e[0],o=e[1],i=e[2],u=e[3],f=a+a,c=o+o,s=i+i,l=a*f,d=a*c,h=a*s,p=o*c,m=o*s,b=i*s,v=u*f,y=u*c,g=u*s,E=n[0],M=n[1],x=n[2];return t[0]=(1-(p+b))*E,t[1]=(d+g)*E,t[2]=(h-y)*E,t[3]=0,t[4]=(d-g)*M,t[5]=(1-(l+b))*M,t[6]=(m+v)*M,t[7]=0,t[8]=(h+y)*x,t[9]=(m-v)*x,t[10]=(1-(l+p))*x,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function Ae(t,e,r,n,a){let o=e[0],i=e[1],u=e[2],f=e[3],c=o+o,s=i+i,l=u+u,d=o*c,h=o*s,p=o*l,m=i*s,b=i*l,v=u*l,y=f*c,g=f*s,E=f*l,M=n[0],x=n[1],_=n[2],A=a[0],T=a[1],R=a[2],w=(1-(m+v))*M,P=(h+E)*M,F=(p-g)*M,S=(h-E)*x,O=(1-(d+v))*x,I=(b+y)*x,B=(p+g)*_,U=(b-y)*_,C=(1-(d+m))*_;return t[0]=w,t[1]=P,t[2]=F,t[3]=0,t[4]=S,t[5]=O,t[6]=I,t[7]=0,t[8]=B,t[9]=U,t[10]=C,t[11]=0,t[12]=r[0]+A-(w*A+S*T+B*R),t[13]=r[1]+T-(P*A+O*T+U*R),t[14]=r[2]+R-(F*A+I*T+C*R),t[15]=1,t}function Te(t,e){let r=e[0],n=e[1],a=e[2],o=e[3],i=r+r,u=n+n,f=a+a,c=r*i,s=n*i,l=n*u,d=a*i,h=a*u,p=a*f,m=o*i,b=o*u,v=o*f;return t[0]=1-l-p,t[1]=s+v,t[2]=d-b,t[3]=0,t[4]=s-v,t[5]=1-c-p,t[6]=h+m,t[7]=0,t[8]=d+b,t[9]=h-m,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Re(t,e,r,n,a,o,i){let u=1/(r-e),f=1/(a-n),c=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*f,t[6]=0,t[7]=0,t[8]=(r+e)*u,t[9]=(a+n)*f,t[10]=(i+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*c,t[15]=0,t}function we(t,e,r,n,a){let o=1/Math.tan(e/2),i=1/(n-a);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+n)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*n*i,t[15]=0,t}function Pe(t,e,r,n){let a=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),f=2/(i+u),c=2/(a+o);return t[0]=f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-u)*f*.5,t[9]=(a-o)*c*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function Fe(t,e,r,n,a,o,i){let u=1/(e-r),f=1/(n-a),c=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*f,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*u,t[13]=(a+n)*f,t[14]=(i+o)*c,t[15]=1,t}function Se(t,e,r,n){let a,o,i,u,f,c,s,l,d,p,m=e[0],b=e[1],v=e[2],y=n[0],g=n[1],E=n[2],M=r[0],x=r[1],_=r[2];return Math.abs(m-M)<h&&Math.abs(b-x)<h&&Math.abs(v-_)<h?te(t):(s=m-M,l=b-x,d=v-_,a=g*(d*=p=1/Math.sqrt(s*s+l*l+d*d))-E*(l*=p),o=E*(s*=p)-y*d,i=y*l-g*s,(p=Math.sqrt(a*a+o*o+i*i))?(a*=p=1/p,o*=p,i*=p):(a=0,o=0,i=0),u=l*i-d*o,f=d*a-s*i,c=s*o-l*a,(p=Math.sqrt(u*u+f*f+c*c))?(u*=p=1/p,f*=p,c*=p):(u=0,f=0,c=0),t[0]=a,t[1]=u,t[2]=s,t[3]=0,t[4]=o,t[5]=f,t[6]=l,t[7]=0,t[8]=i,t[9]=c,t[10]=d,t[11]=0,t[12]=-(a*m+o*b+i*v),t[13]=-(u*m+f*b+c*v),t[14]=-(s*m+l*b+d*v),t[15]=1,t)}function Oe(t,e,r,n){let a=e[0],o=e[1],i=e[2],u=n[0],f=n[1],c=n[2],s=a-r[0],l=o-r[1],d=i-r[2],h=s*s+l*l+d*d;h>0&&(s*=h=1/Math.sqrt(h),l*=h,d*=h);let p=f*d-c*l,m=c*s-u*d,b=u*l-f*s;return(h=p*p+m*m+b*b)>0&&(p*=h=1/Math.sqrt(h),m*=h,b*=h),t[0]=p,t[1]=m,t[2]=b,t[3]=0,t[4]=l*b-d*m,t[5]=d*p-s*b,t[6]=s*m-l*p,t[7]=0,t[8]=s,t[9]=l,t[10]=d,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t}function Ie(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Be(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function Ue(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function Ce(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function De(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function Le(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function Ne(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function ke(t,e){let r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],u=t[5],f=t[6],c=t[7],s=t[8],l=t[9],d=t[10],p=t[11],m=t[12],b=t[13],v=t[14],y=t[15],g=e[0],E=e[1],M=e[2],x=e[3],_=e[4],A=e[5],T=e[6],R=e[7],w=e[8],P=e[9],F=e[10],S=e[11],O=e[12],I=e[13],B=e[14],U=e[15];return Math.abs(r-g)<=h*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(n-E)<=h*Math.max(1,Math.abs(n),Math.abs(E))&&Math.abs(a-M)<=h*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(o-x)<=h*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(i-_)<=h*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(u-A)<=h*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(f-T)<=h*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(c-R)<=h*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(s-w)<=h*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(l-P)<=h*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(d-F)<=h*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(p-S)<=h*Math.max(1,Math.abs(p),Math.abs(S))&&Math.abs(m-O)<=h*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(b-I)<=h*Math.max(1,Math.abs(b),Math.abs(I))&&Math.abs(v-B)<=h*Math.max(1,Math.abs(v),Math.abs(B))&&Math.abs(y-U)<=h*Math.max(1,Math.abs(y),Math.abs(U))}const je=oe,Ge=Ce;function Xe(){let t=new p(3);return t[0]=0,t[1]=0,t[2]=0,t}function ze(t){var e=new p(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function We(t){let e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function qe(t,e,r){let n=new p(3);return n[0]=t,n[1]=e,n[2]=r,n}function Ve(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ye(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function Ke(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function He(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function Qe(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function Ze(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function $e(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Je(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function tr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function er(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function rr(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function nr(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function ar(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function or(t,e){let r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(r*r+n*n+a*a)}function ir(t,e){let r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return r*r+n*n+a*a}function ur(t){let e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function fr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function cr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function sr(t,e){let r=e[0],n=e[1],a=e[2],o=r*r+n*n+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function lr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function dr(t,e,r){let n=e[0],a=e[1],o=e[2],i=r[0],u=r[1],f=r[2];return t[0]=a*f-o*u,t[1]=o*i-n*f,t[2]=n*u-a*i,t}function hr(t,e,r,n){let a=e[0],o=e[1],i=e[2];return t[0]=a+n*(r[0]-a),t[1]=o+n*(r[1]-o),t[2]=i+n*(r[2]-i),t}function pr(t,e,r,n,a,o){let i=o*o,u=i*(2*o-3)+1,f=i*(o-2)+o,c=i*(o-1),s=i*(3-2*o);return t[0]=e[0]*u+r[0]*f+n[0]*c+a[0]*s,t[1]=e[1]*u+r[1]*f+n[1]*c+a[1]*s,t[2]=e[2]*u+r[2]*f+n[2]*c+a[2]*s,t}function mr(t,e,r,n,a,o){let i=1-o,u=i*i,f=o*o,c=u*i,s=3*o*u,l=3*f*i,d=f*o;return t[0]=e[0]*c+r[0]*s+n[0]*l+a[0]*d,t[1]=e[1]*c+r[1]*s+n[1]*l+a[1]*d,t[2]=e[2]*c+r[2]*s+n[2]*l+a[2]*d,t}function br(t,e){e=e||1;let r=2*m()*Math.PI,n=2*m()-1,a=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t[2]=n*e,t}function vr(t,e,r){let n=e[0],a=e[1],o=e[2],i=r[3]*n+r[7]*a+r[11]*o+r[15];return i=i||1,t[0]=(r[0]*n+r[4]*a+r[8]*o+r[12])/i,t[1]=(r[1]*n+r[5]*a+r[9]*o+r[13])/i,t[2]=(r[2]*n+r[6]*a+r[10]*o+r[14])/i,t}function yr(t,e,r){let n=e[0],a=e[1],o=e[2];return t[0]=n*r[0]+a*r[3]+o*r[6],t[1]=n*r[1]+a*r[4]+o*r[7],t[2]=n*r[2]+a*r[5]+o*r[8],t}function gr(t,e,r){let n=r[0],a=r[1],o=r[2],i=r[3],u=e[0],f=e[1],c=e[2],s=a*c-o*f,l=o*u-n*c,d=n*f-a*u,h=a*d-o*l,p=o*s-n*d,m=n*l-a*s,b=2*i;return s*=b,l*=b,d*=b,h*=2,p*=2,m*=2,t[0]=u+s+h,t[1]=f+l+p,t[2]=c+d+m,t}function Er(t,e,r,n){let a=[],o=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],o[0]=a[0],o[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),o[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function Mr(t,e,r,n){let a=[],o=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],o[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),o[1]=a[1],o[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function xr(t,e,r,n){let a=[],o=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],o[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),o[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),o[2]=a[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function _r(t,e){let r=qe(t[0],t[1],t[2]),n=qe(e[0],e[1],e[2]);sr(r,r),sr(n,n);let a=lr(r,n);return a>1?0:a<-1?Math.PI:Math.acos(a)}function Ar(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Tr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Rr(t,e){let r=t[0],n=t[1],a=t[2],o=e[0],i=e[1],u=e[2];return Math.abs(r-o)<=h*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-i)<=h*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-u)<=h*Math.max(1,Math.abs(a),Math.abs(u))}const wr=He,Pr=Qe,Fr=Ze,Sr=or,Or=ir,Ir=We,Br=ur,Ur=function(){let t=Xe();return function(e,r,n,a,o,i){let u,f;for(r||(r=3),n||(n=0),f=a?Math.min(a*r+n,e.length):e.length,u=n;u<f;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}();function Cr(){let t=new p(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function Dr(t){let e=new p(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Lr(t,e,r,n){let a=new p(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a}function Nr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function kr(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t}function jr(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function Gr(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function Xr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function zr(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function Wr(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function qr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Vr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function Yr(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function Kr(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Hr(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function Qr(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function Zr(t,e){let r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+n*n+a*a+o*o)}function $r(t,e){let r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+a*a+o*o}function Jr(t){let e=t[0],r=t[1],n=t[2],a=t[3];return Math.sqrt(e*e+r*r+n*n+a*a)}function tn(t){let e=t[0],r=t[1],n=t[2],a=t[3];return e*e+r*r+n*n+a*a}function en(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function rn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function nn(t,e){let r=e[0],n=e[1],a=e[2],o=e[3],i=r*r+n*n+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=r*i,t[1]=n*i,t[2]=a*i,t[3]=o*i),t}function an(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function on(t,e,r,n){let a=e[0],o=e[1],i=e[2],u=e[3];return t[0]=a+n*(r[0]-a),t[1]=o+n*(r[1]-o),t[2]=i+n*(r[2]-i),t[3]=u+n*(r[3]-u),t}function un(t,e){var r,n,a,o,i,u;e=e||1;do{i=(r=2*m()-1)*r+(n=2*m()-1)*n}while(i>=1);do{u=(a=2*m()-1)*a+(o=2*m()-1)*o}while(u>=1);var f=Math.sqrt((1-i)/u);return t[0]=Hr*r,t[1]=Hr*n,t[2]=Hr*a*f,t[3]=Hr*o*f,t}function fn(t,e,r){let n=e[0],a=e[1],o=e[2],i=e[3];return t[0]=r[0]*n+r[4]*a+r[8]*o+r[12]*i,t[1]=r[1]*n+r[5]*a+r[9]*o+r[13]*i,t[2]=r[2]*n+r[6]*a+r[10]*o+r[14]*i,t[3]=r[3]*n+r[7]*a+r[11]*o+r[15]*i,t}function cn(t,e,r){let n=e[0],a=e[1],o=e[2],i=r[0],u=r[1],f=r[2],c=r[3],s=c*n+u*o-f*a,l=c*a+f*n-i*o,d=c*o+i*a-u*n,h=-i*n-u*a-f*o;return t[0]=s*c+h*-i+l*-f-d*-u,t[1]=l*c+h*-u+d*-i-s*-f,t[2]=d*c+h*-f+s*-u-l*-i,t[3]=e[3],t}function sn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function ln(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function dn(t,e){let r=t[0],n=t[1],a=t[2],o=t[3],i=e[0],u=e[1],f=e[2],c=e[3];return Math.abs(r-i)<=h*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-u)<=h*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-f)<=h*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-c)<=h*Math.max(1,Math.abs(o),Math.abs(c))}const hn=Gr,pn=Xr,mn=zr,bn=Zr,vn=$r,yn=Jr,gn=tn,En=function(){let t=Cr();return function(e,r,n,a,o,i){let u,f;for(r||(r=4),n||(n=0),f=a?Math.min(a*r+n,e.length):e.length,u=n;u<f;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();function Mn(){let t=new p(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function xn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function _n(t,e,r){r*=.5;let n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function An(t,e){let r=2*Math.acos(e[3]),n=Math.sin(r/2);return 0!=n?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function Tn(t,e,r){let n=e[0],a=e[1],o=e[2],i=e[3],u=r[0],f=r[1],c=r[2],s=r[3];return t[0]=n*s+i*u+a*c-o*f,t[1]=a*s+i*f+o*u-n*c,t[2]=o*s+i*c+n*f-a*u,t[3]=i*s-n*u-a*f-o*c,t}function Rn(t,e,r){r*=.5;let n=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(r),f=Math.cos(r);return t[0]=n*f+i*u,t[1]=a*f+o*u,t[2]=o*f-a*u,t[3]=i*f-n*u,t}function wn(t,e,r){r*=.5;let n=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(r),f=Math.cos(r);return t[0]=n*f-o*u,t[1]=a*f+i*u,t[2]=o*f+n*u,t[3]=i*f-a*u,t}function Pn(t,e,r){r*=.5;let n=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(r),f=Math.cos(r);return t[0]=n*f+a*u,t[1]=a*f-n*u,t[2]=o*f+i*u,t[3]=i*f-o*u,t}function Fn(t,e){let r=e[0],n=e[1],a=e[2];return t[0]=r,t[1]=n,t[2]=a,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-a*a)),t}function Sn(t,e,r,n){let a,o,i,u,f,c=e[0],s=e[1],l=e[2],d=e[3],h=r[0],p=r[1],m=r[2],b=r[3];return(o=c*h+s*p+l*m+d*b)<0&&(o=-o,h=-h,p=-p,m=-m,b=-b),1-o>1e-6?(a=Math.acos(o),i=Math.sin(a),u=Math.sin((1-n)*a)/i,f=Math.sin(n*a)/i):(u=1-n,f=n),t[0]=u*c+f*h,t[1]=u*s+f*p,t[2]=u*l+f*m,t[3]=u*d+f*b,t}function On(t,e){let r=e[0],n=e[1],a=e[2],o=e[3],i=r*r+n*n+a*a+o*o,u=i?1/i:0;return t[0]=-r*u,t[1]=-n*u,t[2]=-a*u,t[3]=o*u,t}function In(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Bn(t,e){let r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);let a=(n+1)%3,o=(n+2)%3;r=Math.sqrt(e[3*n+n]-e[3*a+a]-e[3*o+o]+1),t[n]=.5*r,r=.5/r,t[3]=(e[3*a+o]-e[3*o+a])*r,t[a]=(e[3*a+n]+e[3*n+a])*r,t[o]=(e[3*o+n]+e[3*n+o])*r}return t}function Un(t,e,r,n){let a=.5*Math.PI/180;e*=a,r*=a,n*=a;let o=Math.sin(e),i=Math.cos(e),u=Math.sin(r),f=Math.cos(r),c=Math.sin(n),s=Math.cos(n);return t[0]=o*f*s-i*u*c,t[1]=i*u*s+o*f*c,t[2]=i*f*c-o*u*s,t[3]=i*f*s+o*u*c,t}function Cn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const Dn=Dr,Ln=Lr,Nn=Nr,kn=kr,jn=jr,Gn=Tn,Xn=Hr,zn=an,Wn=on,qn=Jr,Vn=qn,Yn=tn,Kn=Yn,Hn=nn,Qn=ln,Zn=dn,$n=function(){let t=Xe(),e=qe(1,0,0),r=qe(0,1,0);return function(n,a,o){let i=lr(a,o);return i<-.999999?(dr(t,e,a),Ir(t)<1e-6&&dr(t,r,a),sr(t,t),_n(n,t,Math.PI),n):i>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(dr(t,a,o),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+i,Hn(n,n))}}(),Jn=function(){let t=Mn(),e=Mn();return function(r,n,a,o,i,u){return Sn(t,n,i,u),Sn(e,a,o,u),Sn(r,t,e,2*u*(1-u)),r}}(),ta=function(){let t=vt();return function(e,r,n,a){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],Hn(e,Bn(e,t))}}();function ea(){let t=new p(8);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function ra(t){let e=new p(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function na(t,e,r,n,a,o,i,u){let f=new p(8);return f[0]=t,f[1]=e,f[2]=r,f[3]=n,f[4]=a,f[5]=o,f[6]=i,f[7]=u,f}function aa(t,e,r,n,a,o,i){let u=new p(8);u[0]=t,u[1]=e,u[2]=r,u[3]=n;let f=.5*a,c=.5*o,s=.5*i;return u[4]=f*n+c*r-s*e,u[5]=c*n+s*t-f*r,u[6]=s*n+f*e-c*t,u[7]=-f*t-c*e-s*r,u}function oa(t,e,r){let n=.5*r[0],a=.5*r[1],o=.5*r[2],i=e[0],u=e[1],f=e[2],c=e[3];return t[0]=i,t[1]=u,t[2]=f,t[3]=c,t[4]=n*c+a*f-o*u,t[5]=a*c+o*i-n*f,t[6]=o*c+n*u-a*i,t[7]=-n*i-a*u-o*f,t}function ia(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function ua(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function fa(t,e){let r=Mn();xe(r,e);let n=new p(3);return Ee(n,e),oa(t,r,n),t}function ca(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function sa(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function la(t,e,r,n,a,o,i,u,f){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=f,t}const da=Nn;function ha(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}const pa=Nn;function ma(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function ba(t,e){let r=e[4],n=e[5],a=e[6],o=e[7],i=-e[0],u=-e[1],f=-e[2],c=e[3];return t[0]=2*(r*c+o*i+n*f-a*u),t[1]=2*(n*c+o*u+a*i-r*f),t[2]=2*(a*c+o*f+r*u-n*i),t}function va(t,e,r){let n=e[0],a=e[1],o=e[2],i=e[3],u=.5*r[0],f=.5*r[1],c=.5*r[2],s=e[4],l=e[5],d=e[6],h=e[7];return t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=i*u+a*c-o*f+s,t[5]=i*f+o*u-n*c+l,t[6]=i*c+n*f-a*u+d,t[7]=-n*u-a*f-o*c+h,t}function ya(t,e,r){let n=-e[0],a=-e[1],o=-e[2],i=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=u*i+s*n+f*o-c*a,d=f*i+s*a+c*n-u*o,h=c*i+s*o+u*a-f*n,p=s*i-u*n-f*a-c*o;return Rn(t,e,r),n=t[0],a=t[1],o=t[2],i=t[3],t[4]=l*i+p*n+d*o-h*a,t[5]=d*i+p*a+h*n-l*o,t[6]=h*i+p*o+l*a-d*n,t[7]=p*i-l*n-d*a-h*o,t}function ga(t,e,r){let n=-e[0],a=-e[1],o=-e[2],i=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=u*i+s*n+f*o-c*a,d=f*i+s*a+c*n-u*o,h=c*i+s*o+u*a-f*n,p=s*i-u*n-f*a-c*o;return wn(t,e,r),n=t[0],a=t[1],o=t[2],i=t[3],t[4]=l*i+p*n+d*o-h*a,t[5]=d*i+p*a+h*n-l*o,t[6]=h*i+p*o+l*a-d*n,t[7]=p*i-l*n-d*a-h*o,t}function Ea(t,e,r){let n=-e[0],a=-e[1],o=-e[2],i=e[3],u=e[4],f=e[5],c=e[6],s=e[7],l=u*i+s*n+f*o-c*a,d=f*i+s*a+c*n-u*o,h=c*i+s*o+u*a-f*n,p=s*i-u*n-f*a-c*o;return Pn(t,e,r),n=t[0],a=t[1],o=t[2],i=t[3],t[4]=l*i+p*n+d*o-h*a,t[5]=d*i+p*a+h*n-l*o,t[6]=h*i+p*o+l*a-d*n,t[7]=p*i-l*n-d*a-h*o,t}function Ma(t,e,r){let n=r[0],a=r[1],o=r[2],i=r[3],u=e[0],f=e[1],c=e[2],s=e[3];return t[0]=u*i+s*n+f*o-c*a,t[1]=f*i+s*a+c*n-u*o,t[2]=c*i+s*o+u*a-f*n,t[3]=s*i-u*n-f*a-c*o,u=e[4],f=e[5],c=e[6],s=e[7],t[4]=u*i+s*n+f*o-c*a,t[5]=f*i+s*a+c*n-u*o,t[6]=c*i+s*o+u*a-f*n,t[7]=s*i-u*n-f*a-c*o,t}function xa(t,e,r){let n=e[0],a=e[1],o=e[2],i=e[3],u=r[0],f=r[1],c=r[2],s=r[3];return t[0]=n*s+i*u+a*c-o*f,t[1]=a*s+i*f+o*u-n*c,t[2]=o*s+i*c+n*f-a*u,t[3]=i*s-n*u-a*f-o*c,u=r[4],f=r[5],c=r[6],s=r[7],t[4]=n*s+i*u+a*c-o*f,t[5]=a*s+i*f+o*u-n*c,t[6]=o*s+i*c+n*f-a*u,t[7]=i*s-n*u-a*f-o*c,t}function _a(t,e,r,n){if(Math.abs(n)<h)return ca(t,e);let a=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);n*=.5;let o=Math.sin(n),i=o*r[0]/a,u=o*r[1]/a,f=o*r[2]/a,c=Math.cos(n),s=e[0],l=e[1],d=e[2],p=e[3];t[0]=s*c+p*i+l*f-d*u,t[1]=l*c+p*u+d*i-s*f,t[2]=d*c+p*f+s*u-l*i,t[3]=p*c-s*i-l*u-d*f;let m=e[4],b=e[5],v=e[6],y=e[7];return t[4]=m*c+y*i+b*f-v*u,t[5]=b*c+y*u+v*i-m*f,t[6]=v*c+y*f+m*u-b*i,t[7]=y*c-m*i-b*u-v*f,t}function Aa(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t}function Ta(t,e,r){let n=e[0],a=e[1],o=e[2],i=e[3],u=r[4],f=r[5],c=r[6],s=r[7],l=e[4],d=e[5],h=e[6],p=e[7],m=r[0],b=r[1],v=r[2],y=r[3];return t[0]=n*y+i*m+a*v-o*b,t[1]=a*y+i*b+o*m-n*v,t[2]=o*y+i*v+n*b-a*m,t[3]=i*y-n*m-a*b-o*v,t[4]=n*s+i*u+a*c-o*f+l*y+p*m+d*v-h*b,t[5]=a*s+i*f+o*u-n*c+d*y+p*b+h*m-l*v,t[6]=o*s+i*c+n*f-a*u+h*y+p*v+l*b-d*m,t[7]=i*s-n*u-a*f-o*c+p*y-l*m-d*b-h*v,t}const Ra=Ta;function wa(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t}const Pa=zn;function Fa(t,e,r,n){let a=1-n;return Pa(e,r)<0&&(n=-n),t[0]=e[0]*a+r[0]*n,t[1]=e[1]*a+r[1]*n,t[2]=e[2]*a+r[2]*n,t[3]=e[3]*a+r[3]*n,t[4]=e[4]*a+r[4]*n,t[5]=e[5]*a+r[5]*n,t[6]=e[6]*a+r[6]*n,t[7]=e[7]*a+r[7]*n,t}function Sa(t,e){let r=Ua(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t}function Oa(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}const Ia=qn,Ba=Ia,Ua=Yn,Ca=Ua;function Da(t,e){let r=Ua(e);return r>0&&(r=Math.sqrt(r),t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r,t[3]=e[3]/r,t[4]=e[4]/r,t[5]=e[5]/r,t[6]=e[6]/r,t[7]=e[7]/r),t}function La(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Na(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function ka(t,e){let r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],u=t[5],f=t[6],c=t[7],s=e[0],l=e[1],d=e[2],p=e[3],m=e[4],b=e[5],v=e[6],y=e[7];return Math.abs(r-s)<=h*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-l)<=h*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-d)<=h*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-p)<=h*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(i-m)<=h*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(u-b)<=h*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(f-v)<=h*Math.max(1,Math.abs(f),Math.abs(v))&&Math.abs(c-y)<=h*Math.max(1,Math.abs(c),Math.abs(y))}function ja(){let t=new p(2);return t[0]=0,t[1]=0,t}function Ga(t){let e=new p(2);return e[0]=t[0],e[1]=t[1],e}function Xa(t,e){let r=new p(2);return r[0]=t,r[1]=e,r}function za(t,e){return t[0]=e[0],t[1]=e[1],t}function Wa(t,e,r){return t[0]=e,t[1]=r,t}function qa(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function Va(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function Ya(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function Ka(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function Ha(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function Qa(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Za(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function $a(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function Ja(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function to(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function eo(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function ro(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function no(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function ao(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function oo(t){var e=t[0],r=t[1];return e*e+r*r}function io(t,e){return t[0]=-e[0],t[1]=-e[1],t}function uo(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function fo(t,e){var r=e[0],n=e[1],a=r*r+n*n;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t}function co(t,e){return t[0]*e[0]+t[1]*e[1]}function so(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function lo(t,e,r,n){var a=e[0],o=e[1];return t[0]=a+n*(r[0]-a),t[1]=o+n*(r[1]-o),t}function ho(t,e){e=e||1;var r=2*m()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function po(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a,t[1]=r[1]*n+r[3]*a,t}function mo(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a+r[4],t[1]=r[1]*n+r[3]*a+r[5],t}function bo(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[3]*a+r[6],t[1]=r[1]*n+r[4]*a+r[7],t}function vo(t,e,r){let n=e[0],a=e[1];return t[0]=r[0]*n+r[4]*a+r[12],t[1]=r[1]*n+r[5]*a+r[13],t}function yo(t,e,r,n){let a=e[0]-r[0],o=e[1]-r[1],i=Math.sin(n),u=Math.cos(n);return t[0]=a*u-o*i+r[0],t[1]=a*i+o*u+r[1],t}function go(t,e){let r=t[0],n=t[1],a=e[0],o=e[1],i=r*r+n*n;i>0&&(i=1/Math.sqrt(i));let u=a*a+o*o;u>0&&(u=1/Math.sqrt(u));let f=(r*a+n*o)*i*u;return f>1?0:f<-1?Math.PI:Math.acos(f)}function Eo(t){return"vec2("+t[0]+", "+t[1]+")"}function Mo(t,e){return t[0]===e[0]&&t[1]===e[1]}function xo(t,e){let r=t[0],n=t[1],a=e[0],o=e[1];return Math.abs(r-a)<=h*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=h*Math.max(1,Math.abs(n),Math.abs(o))}const _o=ao,Ao=Va,To=Ya,Ro=Ka,wo=ro,Po=no,Fo=oo,So=function(){let t=ja();return function(e,r,n,a,o,i){let u,f;for(r||(r=2),n||(n=0),f=a?Math.min(a*r+n,e.length):e.length,u=n;u<f;u+=r)t[0]=e[u],t[1]=e[u+1],o(t,t,i),e[u]=t[0],e[u+1]=t[1];return e}}();r.d(e,"glMatrix",function(){return n}),r.d(e,"mat2",function(){return a}),r.d(e,"mat2d",function(){return o}),r.d(e,"mat3",function(){return i}),r.d(e,"mat4",function(){return u}),r.d(e,"quat",function(){return s}),r.d(e,"quat2",function(){return l}),r.d(e,"vec2",function(){return d}),r.d(e,"vec3",function(){return f}),r.d(e,"vec4",function(){return c})},23:function(t,e,r){var n={},a=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),o=function(t){var e={};return function(t){if(void 0===e[t]){var r=function(t){return document.querySelector(t)}.call(this,t);if(r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}}(),i=null,u=0,f=[],c=r(25);function s(t,e){for(var r=0;r<t.length;r++){var a=t[r],o=n[a.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](a.parts[i]);for(;i<a.parts.length;i++)o.parts.push(b(a.parts[i],e))}else{var u=[];for(i=0;i<a.parts.length;i++)u.push(b(a.parts[i],e));n[a.id]={id:a.id,refs:1,parts:u}}}}function l(t,e){for(var r=[],n={},a=0;a<t.length;a++){var o=t[a],i=e.base?o[0]+e.base:o[0],u={css:o[1],media:o[2],sourceMap:o[3]};n[i]?n[i].parts.push(u):r.push(n[i]={id:i,parts:[u]})}return r}function d(t,e){var r=o(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=f[f.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),f.push(e);else if("bottom"===t.insertAt)r.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var a=o(t.insertInto+" "+t.insertAt.before);r.insertBefore(e,a)}}function h(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=f.indexOf(t);e>=0&&f.splice(e,1)}function p(t){var e=document.createElement("style");return t.attrs.type="text/css",m(e,t.attrs),d(t,e),e}function m(t,e){Object.keys(e).forEach(function(r){t.setAttribute(r,e[r])})}function b(t,e){var r,n,a,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var f=u++;r=i||(i=p(e)),n=y.bind(null,r,f,!1),a=y.bind(null,r,f,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",m(e,t.attrs),d(t,e),e}(e),n=function(t,e,r){var n=r.css,a=r.sourceMap,o=void 0===e.convertToAbsoluteUrls&&a;(e.convertToAbsoluteUrls||o)&&(n=c(n));a&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var i=new Blob([n],{type:"text/css"}),u=t.href;t.href=URL.createObjectURL(i),u&&URL.revokeObjectURL(u)}.bind(null,r,e),a=function(){h(r),r.href&&URL.revokeObjectURL(r.href)}):(r=p(e),n=function(t,e){var r=e.css,n=e.media;n&&t.setAttribute("media",n);if(t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,r),a=function(){h(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else a()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var r=l(t,e);return s(r,e),function(t){for(var a=[],o=0;o<r.length;o++){var i=r[o];(u=n[i.id]).refs--,a.push(u)}t&&s(l(t,e),e);for(o=0;o<a.length;o++){var u;if(0===(u=a[o]).refs){for(var f=0;f<u.parts.length;f++)u.parts[f]();delete n[u.id]}}}};var v=function(){var t=[];return function(e,r){return t[e]=r,t.filter(Boolean).join("\n")}}();function y(t,e,r,n){var a=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=v(e,a);else{var o=document.createTextNode(a),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(o,i[e]):t.appendChild(o)}}},24:function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var a=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(n),o=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[r].concat(o).concat([a]).join("\n")}return[r].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r}).join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},a=0;a<this.length;a++){var o=this[a][0];"number"==typeof o&&(n[o]=!0)}for(a=0;a<t.length;a++){var i=t[a];"number"==typeof i[0]&&n[i[0]]||(r&&!i[2]?i[2]=r:r&&(i[2]="("+i[2]+") and ("+r+")"),e.push(i))}},e}},25:function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,n=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var a,o=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o)?t:(a=0===o.indexOf("//")?o:0===o.indexOf("/")?r+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(a)+")")})}},26:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoordinateConversions=e.TilemapTextureBuilder=void 0;var n=r(2),a=r(1);function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.assign(this,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){o(t,e,r[e])})}return t}({tileWidth:8,tileHeight:8,width:256,height:1,layers:2},e)),this.copyIndex=0,this.texture=a.gl.createTexture(),a.gl.bindTexture(a.gl.TEXTURE_2D_ARRAY,this.texture),a.gl.texStorage3D(a.gl.TEXTURE_2D_ARRAY,1,a.gl.RGBA8,this.width*this.tileWidth,this.height*this.tileHeight,this.layers),a.gl.texParameteri(a.gl.TEXTURE_2D_ARRAY,a.gl.TEXTURE_MIN_FILTER,a.gl.NEAREST),a.gl.bindTexture(a.gl.TEXTURE_2D_ARRAY,null)}return function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(t,[{key:"tileCoordinates",value:function(){return{x:this.copyIndex%this.width,y:Math.floor(this.copyIndex/this.width)%this.height,z:Math.floor(this.copyIndex/(this.width*this.height))%this.layers}}},{key:"addTiles",value:function(t){var e=this,r=this.detectWidthInTiles(t),n=this.detectHeightInTiles(t),o=document.createElement("canvas"),i=o.getContext("2d");o.width=t.width,o.height=t.height,i.drawImage(t,0,0);var u=function(t,r){var n=i.getImageData(t*e.tileWidth,r*e.tileHeight,e.tileWidth,e.tileHeight),o=e.tileCoordinates(),u=o.x,f=o.y,c=o.z;a.gl.texSubImage3D(a.gl.TEXTURE_2D_ARRAY,0,u*e.tileWidth,f*e.tileHeight,c,e.tileWidth,e.tileHeight,1,a.gl.RGBA,a.gl.UNSIGNED_BYTE,n),e.copyIndex++};a.gl.bindTexture(a.gl.TEXTURE_2D_ARRAY,this.texture),a.gl.pixelStorei(a.gl.UNPACK_FLIP_Y_WEBGL,1);for(var f=0;f<n;f++)for(var c=0;c<r&&!this.isFull();c++)u(c,f);a.gl.pixelStorei(a.gl.UNPACK_FLIP_Y_WEBGL,0),a.gl.bindTexture(a.gl.TEXTURE_2D_ARRAY,null)}},{key:"detectWidthInTiles",value:function(t){return Math.floor(t.width/this.tileWidth)}},{key:"detectHeightInTiles",value:function(t){return Math.floor(t.height/this.tileHeight)}},{key:"isFull",value:function(){return this.copyIndex>=this.maxIndex}},{key:"readback",value:function(){var t=new Uint8Array(this.layerWidth*this.layerHeight*4),e=a.gl.createFramebuffer(),r=[];a.gl.bindFramebuffer(a.gl.READ_FRAMEBUFFER,e);for(var n=0;n<this.layers;n++)a.gl.framebufferTextureLayer(a.gl.READ_FRAMEBUFFER,a.gl.COLOR_ATTACHMENT0,this.texture,0,n),a.gl.readPixels(0,0,this.layerWidth,this.layerHeight,a.gl.RGBA,a.gl.UNSIGNED_BYTE,t),r.push(new ImageData(new Uint8ClampedArray(t),this.layerWidth,this.layerHeight));return a.gl.bindFramebuffer(a.gl.READ_FRAMEBUFFER,null),r}},{key:"layerWidth",get:function(){return this.tileWidth*this.width}},{key:"layerHeight",get:function(){return this.tileHeight*this.height}},{key:"maxIndex",get:function(){return this.width*this.height*this.layers}}]),t}();e.TilemapTextureBuilder=u;var f={canvasToWorldMatrix:function(t,e,r){var a=n.mat4.create(),o=n.mat4.create();return n.mat4.multiply(a,n.mat4.fromValues(1,0,0,0,0,-1,0,0,0,0,1,0,0,e.height,1,1),a),n.mat4.fromScaling(o,[r.width/e.width,r.height/e.height,1]),n.mat4.multiply(a,o,a),n.mat4.invert(o,t),n.mat4.multiply(a,o,a),a}};e.CoordinateConversions=f},27:function(t,e,r){(function(t,r){var n;!function(){var a="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this||{},o=a._,i=Array.prototype,u=Object.prototype,f="undefined"!=typeof Symbol?Symbol.prototype:null,c=i.push,s=i.slice,l=u.toString,d=u.hasOwnProperty,h=Array.isArray,p=Object.keys,m=Object.create,b=function(){},v=function(t){return t instanceof v?t:this instanceof v?void(this._wrapped=t):new v(t)};void 0===e||e.nodeType?a._=v:(void 0!==r&&!r.nodeType&&r.exports&&(e=r.exports=v),e._=v),v.VERSION="1.9.1";var y,g=function(t,e,r){if(void 0===e)return t;switch(null==r?3:r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,a){return t.call(e,r,n,a)};case 4:return function(r,n,a,o){return t.call(e,r,n,a,o)}}return function(){return t.apply(e,arguments)}},E=function(t,e,r){return v.iteratee!==y?v.iteratee(t,e):null==t?v.identity:v.isFunction(t)?g(t,e,r):v.isObject(t)&&!v.isArray(t)?v.matcher(t):v.property(t)};v.iteratee=y=function(t,e){return E(t,e,1/0)};var M=function(t,e){return e=null==e?t.length-1:+e,function(){for(var r=Math.max(arguments.length-e,0),n=Array(r),a=0;a<r;a++)n[a]=arguments[a+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n);case 2:return t.call(this,arguments[0],arguments[1],n)}var o=Array(e+1);for(a=0;a<e;a++)o[a]=arguments[a];return o[e]=n,t.apply(this,o)}},x=function(t){if(!v.isObject(t))return{};if(m)return m(t);b.prototype=t;var e=new b;return b.prototype=null,e},_=function(t){return function(e){return null==e?void 0:e[t]}},A=function(t,e){return null!=t&&d.call(t,e)},T=function(t,e){for(var r=e.length,n=0;n<r;n++){if(null==t)return;t=t[e[n]]}return r?t:void 0},R=Math.pow(2,53)-1,w=_("length"),P=function(t){var e=w(t);return"number"==typeof e&&e>=0&&e<=R};v.each=v.forEach=function(t,e,r){var n,a;if(e=g(e,r),P(t))for(n=0,a=t.length;n<a;n++)e(t[n],n,t);else{var o=v.keys(t);for(n=0,a=o.length;n<a;n++)e(t[o[n]],o[n],t)}return t},v.map=v.collect=function(t,e,r){e=E(e,r);for(var n=!P(t)&&v.keys(t),a=(n||t).length,o=Array(a),i=0;i<a;i++){var u=n?n[i]:i;o[i]=e(t[u],u,t)}return o};var F=function(t){return function(e,r,n,a){var o=arguments.length>=3;return function(e,r,n,a){var o=!P(e)&&v.keys(e),i=(o||e).length,u=t>0?0:i-1;for(a||(n=e[o?o[u]:u],u+=t);u>=0&&u<i;u+=t){var f=o?o[u]:u;n=r(n,e[f],f,e)}return n}(e,g(r,a,4),n,o)}};v.reduce=v.foldl=v.inject=F(1),v.reduceRight=v.foldr=F(-1),v.find=v.detect=function(t,e,r){var n=(P(t)?v.findIndex:v.findKey)(t,e,r);if(void 0!==n&&-1!==n)return t[n]},v.filter=v.select=function(t,e,r){var n=[];return e=E(e,r),v.each(t,function(t,r,a){e(t,r,a)&&n.push(t)}),n},v.reject=function(t,e,r){return v.filter(t,v.negate(E(e)),r)},v.every=v.all=function(t,e,r){e=E(e,r);for(var n=!P(t)&&v.keys(t),a=(n||t).length,o=0;o<a;o++){var i=n?n[o]:o;if(!e(t[i],i,t))return!1}return!0},v.some=v.any=function(t,e,r){e=E(e,r);for(var n=!P(t)&&v.keys(t),a=(n||t).length,o=0;o<a;o++){var i=n?n[o]:o;if(e(t[i],i,t))return!0}return!1},v.contains=v.includes=v.include=function(t,e,r,n){return P(t)||(t=v.values(t)),("number"!=typeof r||n)&&(r=0),v.indexOf(t,e,r)>=0},v.invoke=M(function(t,e,r){var n,a;return v.isFunction(e)?a=e:v.isArray(e)&&(n=e.slice(0,-1),e=e[e.length-1]),v.map(t,function(t){var o=a;if(!o){if(n&&n.length&&(t=T(t,n)),null==t)return;o=t[e]}return null==o?o:o.apply(t,r)})}),v.pluck=function(t,e){return v.map(t,v.property(e))},v.where=function(t,e){return v.filter(t,v.matcher(e))},v.findWhere=function(t,e){return v.find(t,v.matcher(e))},v.max=function(t,e,r){var n,a,o=-1/0,i=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var u=0,f=(t=P(t)?t:v.values(t)).length;u<f;u++)null!=(n=t[u])&&n>o&&(o=n);else e=E(e,r),v.each(t,function(t,r,n){((a=e(t,r,n))>i||a===-1/0&&o===-1/0)&&(o=t,i=a)});return o},v.min=function(t,e,r){var n,a,o=1/0,i=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var u=0,f=(t=P(t)?t:v.values(t)).length;u<f;u++)null!=(n=t[u])&&n<o&&(o=n);else e=E(e,r),v.each(t,function(t,r,n){((a=e(t,r,n))<i||a===1/0&&o===1/0)&&(o=t,i=a)});return o},v.shuffle=function(t){return v.sample(t,1/0)},v.sample=function(t,e,r){if(null==e||r)return P(t)||(t=v.values(t)),t[v.random(t.length-1)];var n=P(t)?v.clone(t):v.values(t),a=w(n);e=Math.max(Math.min(e,a),0);for(var o=a-1,i=0;i<e;i++){var u=v.random(i,o),f=n[i];n[i]=n[u],n[u]=f}return n.slice(0,e)},v.sortBy=function(t,e,r){var n=0;return e=E(e,r),v.pluck(v.map(t,function(t,r,a){return{value:t,index:n++,criteria:e(t,r,a)}}).sort(function(t,e){var r=t.criteria,n=e.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return t.index-e.index}),"value")};var S=function(t,e){return function(r,n,a){var o=e?[[],[]]:{};return n=E(n,a),v.each(r,function(e,a){var i=n(e,a,r);t(o,e,i)}),o}};v.groupBy=S(function(t,e,r){A(t,r)?t[r].push(e):t[r]=[e]}),v.indexBy=S(function(t,e,r){t[r]=e}),v.countBy=S(function(t,e,r){A(t,r)?t[r]++:t[r]=1});var O=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;v.toArray=function(t){return t?v.isArray(t)?s.call(t):v.isString(t)?t.match(O):P(t)?v.map(t,v.identity):v.values(t):[]},v.size=function(t){return null==t?0:P(t)?t.length:v.keys(t).length},v.partition=S(function(t,e,r){t[r?0:1].push(e)},!0),v.first=v.head=v.take=function(t,e,r){return null==t||t.length<1?null==e?void 0:[]:null==e||r?t[0]:v.initial(t,t.length-e)},v.initial=function(t,e,r){return s.call(t,0,Math.max(0,t.length-(null==e||r?1:e)))},v.last=function(t,e,r){return null==t||t.length<1?null==e?void 0:[]:null==e||r?t[t.length-1]:v.rest(t,Math.max(0,t.length-e))},v.rest=v.tail=v.drop=function(t,e,r){return s.call(t,null==e||r?1:e)},v.compact=function(t){return v.filter(t,Boolean)};var I=function(t,e,r,n){for(var a=(n=n||[]).length,o=0,i=w(t);o<i;o++){var u=t[o];if(P(u)&&(v.isArray(u)||v.isArguments(u)))if(e)for(var f=0,c=u.length;f<c;)n[a++]=u[f++];else I(u,e,r,n),a=n.length;else r||(n[a++]=u)}return n};v.flatten=function(t,e){return I(t,e,!1)},v.without=M(function(t,e){return v.difference(t,e)}),v.uniq=v.unique=function(t,e,r,n){v.isBoolean(e)||(n=r,r=e,e=!1),null!=r&&(r=E(r,n));for(var a=[],o=[],i=0,u=w(t);i<u;i++){var f=t[i],c=r?r(f,i,t):f;e&&!r?(i&&o===c||a.push(f),o=c):r?v.contains(o,c)||(o.push(c),a.push(f)):v.contains(a,f)||a.push(f)}return a},v.union=M(function(t){return v.uniq(I(t,!0,!0))}),v.intersection=function(t){for(var e=[],r=arguments.length,n=0,a=w(t);n<a;n++){var o=t[n];if(!v.contains(e,o)){var i;for(i=1;i<r&&v.contains(arguments[i],o);i++);i===r&&e.push(o)}}return e},v.difference=M(function(t,e){return e=I(e,!0,!0),v.filter(t,function(t){return!v.contains(e,t)})}),v.unzip=function(t){for(var e=t&&v.max(t,w).length||0,r=Array(e),n=0;n<e;n++)r[n]=v.pluck(t,n);return r},v.zip=M(v.unzip),v.object=function(t,e){for(var r={},n=0,a=w(t);n<a;n++)e?r[t[n]]=e[n]:r[t[n][0]]=t[n][1];return r};var B=function(t){return function(e,r,n){r=E(r,n);for(var a=w(e),o=t>0?0:a-1;o>=0&&o<a;o+=t)if(r(e[o],o,e))return o;return-1}};v.findIndex=B(1),v.findLastIndex=B(-1),v.sortedIndex=function(t,e,r,n){for(var a=(r=E(r,n,1))(e),o=0,i=w(t);o<i;){var u=Math.floor((o+i)/2);r(t[u])<a?o=u+1:i=u}return o};var U=function(t,e,r){return function(n,a,o){var i=0,u=w(n);if("number"==typeof o)t>0?i=o>=0?o:Math.max(o+u,i):u=o>=0?Math.min(o+1,u):o+u+1;else if(r&&o&&u)return n[o=r(n,a)]===a?o:-1;if(a!=a)return(o=e(s.call(n,i,u),v.isNaN))>=0?o+i:-1;for(o=t>0?i:u-1;o>=0&&o<u;o+=t)if(n[o]===a)return o;return-1}};v.indexOf=U(1,v.findIndex,v.sortedIndex),v.lastIndexOf=U(-1,v.findLastIndex),v.range=function(t,e,r){null==e&&(e=t||0,t=0),r||(r=e<t?-1:1);for(var n=Math.max(Math.ceil((e-t)/r),0),a=Array(n),o=0;o<n;o++,t+=r)a[o]=t;return a},v.chunk=function(t,e){if(null==e||e<1)return[];for(var r=[],n=0,a=t.length;n<a;)r.push(s.call(t,n,n+=e));return r};var C=function(t,e,r,n,a){if(!(n instanceof e))return t.apply(r,a);var o=x(t.prototype),i=t.apply(o,a);return v.isObject(i)?i:o};v.bind=M(function(t,e,r){if(!v.isFunction(t))throw new TypeError("Bind must be called on a function");var n=M(function(a){return C(t,n,e,this,r.concat(a))});return n}),v.partial=M(function(t,e){var r=v.partial.placeholder,n=function(){for(var a=0,o=e.length,i=Array(o),u=0;u<o;u++)i[u]=e[u]===r?arguments[a++]:e[u];for(;a<arguments.length;)i.push(arguments[a++]);return C(t,n,this,this,i)};return n}),v.partial.placeholder=v,v.bindAll=M(function(t,e){var r=(e=I(e,!1,!1)).length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=e[r];t[n]=v.bind(t[n],t)}}),v.memoize=function(t,e){var r=function(n){var a=r.cache,o=""+(e?e.apply(this,arguments):n);return A(a,o)||(a[o]=t.apply(this,arguments)),a[o]};return r.cache={},r},v.delay=M(function(t,e,r){return setTimeout(function(){return t.apply(null,r)},e)}),v.defer=v.partial(v.delay,v,1),v.throttle=function(t,e,r){var n,a,o,i,u=0;r||(r={});var f=function(){u=!1===r.leading?0:v.now(),n=null,i=t.apply(a,o),n||(a=o=null)},c=function(){var c=v.now();u||!1!==r.leading||(u=c);var s=e-(c-u);return a=this,o=arguments,s<=0||s>e?(n&&(clearTimeout(n),n=null),u=c,i=t.apply(a,o),n||(a=o=null)):n||!1===r.trailing||(n=setTimeout(f,s)),i};return c.cancel=function(){clearTimeout(n),u=0,n=a=o=null},c},v.debounce=function(t,e,r){var n,a,o=function(e,r){n=null,r&&(a=t.apply(e,r))},i=M(function(i){if(n&&clearTimeout(n),r){var u=!n;n=setTimeout(o,e),u&&(a=t.apply(this,i))}else n=v.delay(o,e,this,i);return a});return i.cancel=function(){clearTimeout(n),n=null},i},v.wrap=function(t,e){return v.partial(e,t)},v.negate=function(t){return function(){return!t.apply(this,arguments)}},v.compose=function(){var t=arguments,e=t.length-1;return function(){for(var r=e,n=t[e].apply(this,arguments);r--;)n=t[r].call(this,n);return n}},v.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},v.before=function(t,e){var r;return function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=null),r}},v.once=v.partial(v.before,2),v.restArguments=M;var D=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],N=function(t,e){var r=L.length,n=t.constructor,a=v.isFunction(n)&&n.prototype||u,o="constructor";for(A(t,o)&&!v.contains(e,o)&&e.push(o);r--;)(o=L[r])in t&&t[o]!==a[o]&&!v.contains(e,o)&&e.push(o)};v.keys=function(t){if(!v.isObject(t))return[];if(p)return p(t);var e=[];for(var r in t)A(t,r)&&e.push(r);return D&&N(t,e),e},v.allKeys=function(t){if(!v.isObject(t))return[];var e=[];for(var r in t)e.push(r);return D&&N(t,e),e},v.values=function(t){for(var e=v.keys(t),r=e.length,n=Array(r),a=0;a<r;a++)n[a]=t[e[a]];return n},v.mapObject=function(t,e,r){e=E(e,r);for(var n=v.keys(t),a=n.length,o={},i=0;i<a;i++){var u=n[i];o[u]=e(t[u],u,t)}return o},v.pairs=function(t){for(var e=v.keys(t),r=e.length,n=Array(r),a=0;a<r;a++)n[a]=[e[a],t[e[a]]];return n},v.invert=function(t){for(var e={},r=v.keys(t),n=0,a=r.length;n<a;n++)e[t[r[n]]]=r[n];return e},v.functions=v.methods=function(t){var e=[];for(var r in t)v.isFunction(t[r])&&e.push(r);return e.sort()};var k=function(t,e){return function(r){var n=arguments.length;if(e&&(r=Object(r)),n<2||null==r)return r;for(var a=1;a<n;a++)for(var o=arguments[a],i=t(o),u=i.length,f=0;f<u;f++){var c=i[f];e&&void 0!==r[c]||(r[c]=o[c])}return r}};v.extend=k(v.allKeys),v.extendOwn=v.assign=k(v.keys),v.findKey=function(t,e,r){e=E(e,r);for(var n,a=v.keys(t),o=0,i=a.length;o<i;o++)if(e(t[n=a[o]],n,t))return n};var j,G,X=function(t,e,r){return e in r};v.pick=M(function(t,e){var r={},n=e[0];if(null==t)return r;v.isFunction(n)?(e.length>1&&(n=g(n,e[1])),e=v.allKeys(t)):(n=X,e=I(e,!1,!1),t=Object(t));for(var a=0,o=e.length;a<o;a++){var i=e[a],u=t[i];n(u,i,t)&&(r[i]=u)}return r}),v.omit=M(function(t,e){var r,n=e[0];return v.isFunction(n)?(n=v.negate(n),e.length>1&&(r=e[1])):(e=v.map(I(e,!1,!1),String),n=function(t,r){return!v.contains(e,r)}),v.pick(t,n,r)}),v.defaults=k(v.allKeys,!0),v.create=function(t,e){var r=x(t);return e&&v.extendOwn(r,e),r},v.clone=function(t){return v.isObject(t)?v.isArray(t)?t.slice():v.extend({},t):t},v.tap=function(t,e){return e(t),t},v.isMatch=function(t,e){var r=v.keys(e),n=r.length;if(null==t)return!n;for(var a=Object(t),o=0;o<n;o++){var i=r[o];if(e[i]!==a[i]||!(i in a))return!1}return!0},j=function(t,e,r,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var a=typeof t;return("function"===a||"object"===a||"object"==typeof e)&&G(t,e,r,n)},G=function(t,e,r,n){t instanceof v&&(t=t._wrapped),e instanceof v&&(e=e._wrapped);var a=l.call(t);if(a!==l.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return f.valueOf.call(t)===f.valueOf.call(e)}var o="[object Array]"===a;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var i=t.constructor,u=e.constructor;if(i!==u&&!(v.isFunction(i)&&i instanceof i&&v.isFunction(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}r=r||[],n=n||[];for(var c=r.length;c--;)if(r[c]===t)return n[c]===e;if(r.push(t),n.push(e),o){if((c=t.length)!==e.length)return!1;for(;c--;)if(!j(t[c],e[c],r,n))return!1}else{var s,d=v.keys(t);if(c=d.length,v.keys(e).length!==c)return!1;for(;c--;)if(s=d[c],!A(e,s)||!j(t[s],e[s],r,n))return!1}return r.pop(),n.pop(),!0},v.isEqual=function(t,e){return j(t,e)},v.isEmpty=function(t){return null==t||(P(t)&&(v.isArray(t)||v.isString(t)||v.isArguments(t))?0===t.length:0===v.keys(t).length)},v.isElement=function(t){return!(!t||1!==t.nodeType)},v.isArray=h||function(t){return"[object Array]"===l.call(t)},v.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},v.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(t){v["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}}),v.isArguments(arguments)||(v.isArguments=function(t){return A(t,"callee")});var z=a.document&&a.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof z&&(v.isFunction=function(t){return"function"==typeof t||!1}),v.isFinite=function(t){return!v.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},v.isNaN=function(t){return v.isNumber(t)&&isNaN(t)},v.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===l.call(t)},v.isNull=function(t){return null===t},v.isUndefined=function(t){return void 0===t},v.has=function(t,e){if(!v.isArray(e))return A(t,e);for(var r=e.length,n=0;n<r;n++){var a=e[n];if(null==t||!d.call(t,a))return!1;t=t[a]}return!!r},v.noConflict=function(){return a._=o,this},v.identity=function(t){return t},v.constant=function(t){return function(){return t}},v.noop=function(){},v.property=function(t){return v.isArray(t)?function(e){return T(e,t)}:_(t)},v.propertyOf=function(t){return null==t?function(){}:function(e){return v.isArray(e)?T(t,e):t[e]}},v.matcher=v.matches=function(t){return t=v.extendOwn({},t),function(e){return v.isMatch(e,t)}},v.times=function(t,e,r){var n=Array(Math.max(0,t));e=g(e,r,1);for(var a=0;a<t;a++)n[a]=e(a);return n},v.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},v.now=Date.now||function(){return(new Date).getTime()};var W={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},q=v.invert(W),V=function(t){var e=function(e){return t[e]},r="(?:"+v.keys(t).join("|")+")",n=RegExp(r),a=RegExp(r,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(a,e):t}};v.escape=V(W),v.unescape=V(q),v.result=function(t,e,r){v.isArray(e)||(e=[e]);var n=e.length;if(!n)return v.isFunction(r)?r.call(t):r;for(var a=0;a<n;a++){var o=null==t?void 0:t[e[a]];void 0===o&&(o=r,a=n),t=v.isFunction(o)?o.call(t):o}return t};var Y=0;v.uniqueId=function(t){var e=++Y+"";return t?t+e:e},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Q=/\\|'|\r|\n|\u2028|\u2029/g,Z=function(t){return"\\"+H[t]};v.template=function(t,e,r){!e&&r&&(e=r),e=v.defaults({},e,v.templateSettings);var n,a=RegExp([(e.escape||K).source,(e.interpolate||K).source,(e.evaluate||K).source].join("|")+"|$","g"),o=0,i="__p+='";t.replace(a,function(e,r,n,a,u){return i+=t.slice(o,u).replace(Q,Z),o=u+e.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?i+="'+\n((__t=("+n+"))==null?'':__t)+\n'":a&&(i+="';\n"+a+"\n__p+='"),e}),i+="';\n",e.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{n=new Function(e.variable||"obj","_",i)}catch(t){throw t.source=i,t}var u=function(t){return n.call(this,t,v)},f=e.variable||"obj";return u.source="function("+f+"){\n"+i+"}",u},v.chain=function(t){var e=v(t);return e._chain=!0,e};var $=function(t,e){return t._chain?v(e).chain():e};v.mixin=function(t){return v.each(v.functions(t),function(e){var r=v[e]=t[e];v.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),$(this,r.apply(v,t))}}),v},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];v.prototype[t]=function(){var r=this._wrapped;return e.apply(r,arguments),"shift"!==t&&"splice"!==t||0!==r.length||delete r[0],$(this,r)}}),v.each(["concat","join","slice"],function(t){var e=i[t];v.prototype[t]=function(){return $(this,e.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return String(this._wrapped)},void 0===(n=function(){return v}.apply(e,[]))||(r.exports=n)}()}).call(this,r(10),r(37)(t))},270:function(t,e,r){"use strict";var n=r(26),a=r(15);r(32);var o=function(t){return t&&t.__esModule?t:{default:t}}(r(39));var i=document.getElementById("content");i.style.display="none";var u=document.createElement("canvas");u.classList.add("game"),i.appendChild(u);new o.default({el:u});var f=new n.TilemapTextureBuilder({tileWidth:16,tileHeight:16,width:16,height:16,layers:4});(0,a.loadImage)("img/mario.png").then(function(t){f.addTiles(t);var e=f.readback(),r=document.createElement("canvas");document.body.prepend(r),r.width=f.width*f.tileWidth,r.height=f.height*f.tileHeight*e.length;for(var n=r.getContext("2d"),a=0;a<e.length;a++)n.putImageData(e[a],0,a*f.layerHeight)})},29:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=void 0;var n=r(2);function a(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._translation=n.vec2.create(),this._bounds=e}return function(t,e,r){e&&o(t.prototype,e),r&&o(t,r)}(t,[{key:"centerAt",value:function(t,e){return this._translation.set([-(t-this._bounds.width/2),-(e-this._bounds.height/2)]),this}},{key:"translate",value:function(t,e){return n.vec2.sub(this._translation,this._translation,[t,e]),this}},{key:"position",get:function(){return n.vec2.clone(this._translation)}},{key:"translation",get:function(){return this.position}},{key:"matrix",get:function(){return n.mat4.fromTranslation(n.mat4.create(),n.vec4.fromValues.apply(n.vec4,a(this._translation).concat([0,1])))}}]),t}();e.Camera=i},31:function(t,e,r){(t.exports=r(24)(!1)).push([t.i,"html {\n    height: 100%;\n    background-color: #555;\n    color: #eee;\n    font-family: monospace;\n}\n\nbody {\n    padding: 0;\n    margin: 0;\n    height: 100%;\n}\n\n#content {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n}\n\ncanvas.game {\n    width: 100vw;\n    height: 100vh;\n}\n",""])},32:function(t,e,r){var n=r(31);"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0};r(23)(n,a);n.locals&&(t.exports=n.locals)},33:function(t,e){t.exports="#version 300 es\n\nprecision mediump float;\n\nout vec4 out_color;\n\nin vec2 v_tex_coord;\n\nuniform sampler2D texture;\n\nvoid main() {\n    float line = v_tex_coord.y - floor(v_tex_coord.y);\n\n    vec4 texel = texelFetch(texture, ivec2(v_tex_coord), 0).xyzw;\n    out_color = texel; //vec4(texel.xyz * (line >= 0.5 ? 1. : .25), texel.w);\n}\n"},34:function(t,e){t.exports="#version 300 es\n\nlayout(location = 0) in vec2 vertex;\nlayout(location = 1) in vec2 position;\nlayout(location = 2) in vec2 size;\nlayout(location = 3) in ivec2 texcoord;\nlayout(location = 4) in vec2 offset;\n\nout vec2 v_tex_coord;\n\nuniform mat4 projection;\n\n/*\n\nConvert coordinates from world space to clip space\n\n 1. Scale [0, dim] -> [-1, 1] where dim is screen width or height\n    dim pixels = 2 clip\n    clip / pixels = 2 / dim\n    x' = 2 * x / width - 1\n    y' = 2 * y / height - 1\n\n    2/w  0   0   -1\n     0  2/h  0   -1\n     0   0   1    0\n     0   0   0    1\n*/\n\nvoid main() {\n    vec4 transformed_position = projection * vec4(position + size * (vertex - offset), 0, 1);\n    gl_Position = transformed_position;\n    v_tex_coord = vec2(texcoord * ivec2(size));\n}\n"},35:function(t,e){WebGLDebugUtils=function(){var t=function(t){window.console&&window.console.error?window.console.error(t):function(t){window.console&&window.console.log&&window.console.log(t)}(t)},e={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},bindBuffer:{2:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}},bufferData:{3:{0:!0,2:!0},4:{0:!0,2:!0},5:{0:!0,2:!0}},bufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},copyBufferSubData:{5:{0:!0,1:!0}},getBufferSubData:{3:{0:!0},4:{0:!0},5:{0:!0}},blitFramebuffer:{10:{8:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]},9:!0}},framebufferTextureLayer:{5:{0:!0,1:!0}},invalidateFramebuffer:{2:{0:!0}},invalidateSubFramebuffer:{6:{0:!0}},readBuffer:{1:{0:!0}},getInternalformatParameter:{3:{0:!0,1:!0,2:!0}},renderbufferStorageMultisample:{5:{0:!0,2:!0}},texStorage2D:{5:{0:!0,2:!0}},texStorage3D:{6:{0:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0},10:{0:!0,2:!0,6:!0,7:!0}},texImage3D:{10:{0:!0,2:!0,7:!0,8:!0},11:{0:!0,2:!0,7:!0,8:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0},10:{0:!0,6:!0,7:!0}},texSubImage3D:{11:{0:!0,8:!0,9:!0},12:{0:!0,8:!0,9:!0}},copyTexSubImage3D:{9:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0},8:{0:!0,2:!0},9:{0:!0,2:!0}},compressedTexImage3D:{8:{0:!0,2:!0},9:{0:!0,2:!0},10:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0},9:{0:!0,6:!0},10:{0:!0,6:!0}},compressedTexSubImage3D:{10:{0:!0,8:!0},11:{0:!0,8:!0},12:{0:!0,8:!0}},vertexAttribIPointer:{5:{2:!0}},drawArraysInstanced:{4:{0:!0}},drawElementsInstanced:{5:{0:!0,2:!0}},drawRangeElements:{6:{0:!0,4:!0}},readPixels:{7:{4:!0,5:!0},8:{4:!0,5:!0}},clearBufferfv:{3:{0:!0},4:{0:!0}},clearBufferiv:{3:{0:!0},4:{0:!0}},clearBufferuiv:{3:{0:!0},4:{0:!0}},clearBufferfi:{4:{0:!0}},beginQuery:{2:{0:!0}},endQuery:{1:{0:!0}},getQuery:{2:{0:!0,1:!0}},getQueryParameter:{2:{1:!0}},samplerParameteri:{3:{1:!0,2:!0}},samplerParameterf:{3:{1:!0}},getSamplerParameter:{2:{1:!0}},fenceSync:{2:{0:!0,1:{enumBitwiseOr:[]}}},clientWaitSync:{3:{1:{enumBitwiseOr:["SYNC_FLUSH_COMMANDS_BIT"]}}},waitSync:{3:{1:{enumBitwiseOr:[]}}},getSyncParameter:{2:{1:!0}},bindTransformFeedback:{2:{0:!0}},beginTransformFeedback:{1:{0:!0}},transformFeedbackVaryings:{3:{2:!0}},bindBufferBase:{3:{0:!0}},bindBufferRange:{5:{0:!0}},getIndexedParameter:{2:{0:!0}},getActiveUniforms:{3:{2:!0}},getActiveUniformBlockParameter:{3:{2:!0}}},r=null,n=null;function a(t){if(null==r)for(var e in r={},n={},t)"number"==typeof t[e]&&(r[t[e]]=e,n[e]=t[e])}function o(){if(null==r)throw"WebGLDebugUtils.init(ctx) not called"}function i(t){o();var e=r[t];return void 0!==e?"gl."+e:"/*UNKNOWN WebGL ENUM*/ 0x"+t.toString(16)}function u(t,r,a,o){var u;if(void 0!==(u=e[t])&&(void 0!==(u=u[r])&&u[a])){if("object"==typeof u[a]&&void 0!==u[a].enumBitwiseOr){for(var f=u[a].enumBitwiseOr,c=0,s=[],l=0;l<f.length;++l){var d=n[f[l]];0!=(o&d)&&(c|=d,s.push(i(d)))}return c===o?s.join(" | "):i(o)}return i(o)}return null===o?"null":void 0===o?"undefined":o.toString()}function f(t,e,r){t.__defineGetter__(r,function(){return e[r]}),t.__defineSetter__(r,function(t){e[r]=t})}function c(t){var e=!!t.createTransformFeedback;e&&t.bindVertexArray(null);var r=t.getParameter(t.MAX_VERTEX_ATTRIBS),n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n);for(var a=0;a<r;++a)t.disableVertexAttribArray(a),t.vertexAttribPointer(a,4,t.FLOAT,!1,0,0),t.vertexAttrib1f(a,0),e&&t.vertexAttribDivisor(a,0);t.deleteBuffer(n);var o=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);for(a=0;a<o;++a)t.activeTexture(t.TEXTURE0+a),t.bindTexture(t.TEXTURE_CUBE_MAP,null),t.bindTexture(t.TEXTURE_2D,null),e&&(t.bindTexture(t.TEXTURE_2D_ARRAY,null),t.bindTexture(t.TEXTURE_3D,null),t.bindSampler(a,null));if(t.activeTexture(t.TEXTURE0),t.useProgram(null),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.DITHER),t.disable(t.SCISSOR_TEST),t.blendColor(0,0,0,0),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.clearColor(0,0,0,0),t.clearDepth(1),t.clearStencil(-1),t.colorMask(!0,!0,!0,!0),t.cullFace(t.BACK),t.depthFunc(t.LESS),t.depthMask(!0),t.depthRange(0,1),t.frontFace(t.CCW),t.hint(t.GENERATE_MIPMAP_HINT,t.DONT_CARE),t.lineWidth(1),t.pixelStorei(t.PACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.UNPACK_COLORSPACE_CONVERSION_WEBGL&&t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.BROWSER_DEFAULT_WEBGL),t.polygonOffset(0,0),t.sampleCoverage(1,!1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilMask(4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT),e){t.drawBuffers([t.BACK]),t.readBuffer(t.BACK),t.bindBuffer(t.COPY_READ_BUFFER,null),t.bindBuffer(t.COPY_WRITE_BUFFER,null),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindBuffer(t.PIXEL_UNPACK_BUFFER,null);var i=t.getParameter(t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS);for(a=0;a<i;++a)t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,a,null);var u=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);for(a=0;a<u;++a)t.bindBufferBase(t.UNIFORM_BUFFER,a,null);t.disable(t.RASTERIZER_DISCARD),t.pixelStorei(t.UNPACK_IMAGE_HEIGHT,0),t.pixelStorei(t.UNPACK_SKIP_IMAGES,0),t.pixelStorei(t.UNPACK_ROW_LENGTH,0),t.pixelStorei(t.UNPACK_SKIP_ROWS,0),t.pixelStorei(t.UNPACK_SKIP_PIXELS,0),t.pixelStorei(t.PACK_ROW_LENGTH,0),t.pixelStorei(t.PACK_SKIP_ROWS,0),t.pixelStorei(t.PACK_SKIP_PIXELS,0),t.hint(t.FRAGMENT_SHADER_DERIVATIVE_HINT,t.DONT_CARE)}for(;t.getError(););}return{init:a,mightBeEnum:function(t){return o(),void 0!==r[t]},glEnumToString:i,glFunctionArgToString:u,glFunctionArgsToString:function(t,e){for(var r="",n=e.length,a=0;a<n;++a)r+=(0==a?"":", ")+u(t,n,a,e[a]);return r},makeDebugContext:function e(r,n,o,c){c=c||r,a(r),n=n||function(e,r,n){for(var a="",o=n.length,f=0;f<o;++f)a+=(0==f?"":", ")+u(r,o,f,n[f]);t("WebGL error "+i(e)+" in "+r+"("+a+")")};var s={};function l(t,e){return function(){o&&o(e,arguments);var r=t[e].apply(t,arguments),a=c.getError();return 0!=a&&(s[a]=!0,n(a,e,arguments)),r}}var d={};for(var h in r)if("function"==typeof r[h])if("getExtension"!=h)d[h]=l(r,h);else{var p=l(r,h);d[h]=function(){var t=p.apply(r,arguments);return t?e(t,n,o,c):null}}else f(d,r,h);return d.getError=function(){for(var t in s)if(s.hasOwnProperty(t)&&s[t])return s[t]=!1,t;return r.NO_ERROR},d},makeLostContextSimulatingCanvas:function(t){var e,r,n=[],a=[],o={},i=1,u=!1,s=[],l=0,d=0,h=!1,p=0,m={};function b(t){return"function"==typeof t?t:function(e){t.handleEvent(e)}}t.getContext=function(n){return function(){var a=n.apply(t,arguments);if(a instanceof WebGLRenderingContext||window.WebGL2RenderingContext&&a instanceof WebGL2RenderingContext){if(a!=e){if(e)throw"got different context";r=window.WebGL2RenderingContext&&a instanceof WebGL2RenderingContext,o=function(t){for(var n in t)"function"==typeof t[n]?o[n]=E(t,n):f(o,t,n);o.getError=function(){if(g(),!u)for(;t=e.getError();)m[t]=!0;for(var t in m)if(m[t])return delete m[t],t;return o.NO_ERROR};var a=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"];r&&a.push("createQuery","createSampler","fenceSync","createTransformFeedback","createVertexArray");for(var c=0;c<a.length;++c){var l=a[c];o[l]=function(e){return function(){if(g(),u)return null;var r=e.apply(t,arguments);return r.__webglDebugContextLostId__=i,s.push(r),r}}(t[l])}var d=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"];r&&d.push("getInternalformatParameter","getQuery","getQueryParameter","getSamplerParameter","getSyncParameter","getTransformFeedbackVarying","getIndexedParameter","getUniformIndices","getActiveUniforms","getActiveUniformBlockParameter","getActiveUniformBlockName");for(var c=0;c<d.length;++c){var l=d[c];o[l]=function(e){return function(){return g(),u?null:e.apply(t,arguments)}}(o[l])}var h=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"];r&&h.push("isQuery","isSampler","isSync","isTransformFeedback","isVertexArray");for(var c=0;c<h.length;++c){var l=h[c];o[l]=function(e){return function(){return g(),!u&&e.apply(t,arguments)}}(o[l])}return o.checkFramebufferStatus=function(e){return function(){return g(),u?o.FRAMEBUFFER_UNSUPPORTED:e.apply(t,arguments)}}(o.checkFramebufferStatus),o.getAttribLocation=function(e){return function(){return g(),u?-1:e.apply(t,arguments)}}(o.getAttribLocation),o.getVertexAttribOffset=function(e){return function(){return g(),u?0:e.apply(t,arguments)}}(o.getVertexAttribOffset),o.isContextLost=function(){return u},r&&(o.getFragDataLocation=function(e){return function(){return g(),u?-1:e.apply(t,arguments)}}(o.getFragDataLocation),o.clientWaitSync=function(e){return function(){return g(),u?o.WAIT_FAILED:e.apply(t,arguments)}}(o.clientWaitSync),o.getUniformBlockIndex=function(e){return function(){return g(),u?o.INVALID_INDEX:e.apply(t,arguments)}}(o.getUniformBlockIndex)),o}(e=a)}return o}return a}}(t.getContext);var v=function(t){n.push(b(t))},y=function(t){a.push(b(t))};function g(){++d,u||l==d&&t.loseContext()}function E(t,e){var r=t[e];return function(){if(g(),!u)return r.apply(t,arguments)}}function M(t){return{statusMessage:t,preventDefault:function(){h=!0}}}return function(t){var e=t.addEventListener;t.addEventListener=function(r,n,a){switch(r){case"webglcontextlost":v(n);break;case"webglcontextrestored":y(n);break;default:e.apply(t,arguments)}}}(t),t.loseContext=function(){if(!u){for(u=!0,l=0,++i;e.getError(););!function(){for(var t=Object.keys(m),e=0;e<t.length;++e)delete m[t[e]]}(),m[e.CONTEXT_LOST_WEBGL]=!0;var r=M("context lost"),a=n.slice();setTimeout(function(){for(var e=0;e<a.length;++e)a[e](r);p>=0&&setTimeout(function(){t.restoreContext()},p)},0)}},t.restoreContext=function(){u&&a.length&&setTimeout(function(){if(!h)throw"can not restore. webglcontestlost listener did not call event.preventDefault";!function(){for(var t=0;t<s.length;++t){var n=s[t];n instanceof WebGLBuffer?e.deleteBuffer(n):n instanceof WebGLFramebuffer?e.deleteFramebuffer(n):n instanceof WebGLProgram?e.deleteProgram(n):n instanceof WebGLRenderbuffer?e.deleteRenderbuffer(n):n instanceof WebGLShader?e.deleteShader(n):n instanceof WebGLTexture?e.deleteTexture(n):r&&(n instanceof WebGLQuery?e.deleteQuery(n):n instanceof WebGLSampler?e.deleteSampler(n):n instanceof WebGLSync?e.deleteSync(n):n instanceof WebGLTransformFeedback?e.deleteTransformFeedback(n):n instanceof WebGLVertexArrayObject&&e.deleteVertexArray(n))}}(),c(e),u=!1,d=0,h=!1;for(var t=a.slice(),n=M("context restored"),o=0;o<t.length;++o)t[o](n)},0)},t.loseContextInNCalls=function(t){if(u)throw"You can not ask a lost contet to be lost";l=d+t},t.getNumCalls=function(){return d},t.setRestoreTimeout=function(t){p=t},t},resetToInitialState:c}}()},36:function(t,e,r){
/*!
 * @license twgl.js 4.4.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */
!function(e,r){t.exports=r()}("undefined"!=typeof self&&self,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=9)}([function(t,e,r){"use strict";e.__esModule=!0,e.copyExistingProperties=function(t,e){Object.keys(e).forEach(function(r){e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&(e[r]=t[r])})},e.copyNamedProperties=function(t,e,r){t.forEach(function(t){var n=e[t];void 0!==n&&(r[t]=n)})},e.isBuffer=function(t,e){o||(o=t.createBuffer());return e instanceof o.constructor},e.isRenderbuffer=function(t,e){i||(i=t.createRenderbuffer());return e instanceof i.constructor},e.isShader=function(t,e){u||(u=t.createShader(t.VERTEX_SHADER));return e instanceof u.constructor},e.isTexture=function(t,e){f||(f=t.createTexture());return e instanceof f.constructor},e.isSampler=function(t,e){if(!c){if(!t.createSampler)return!1;c=t.createSampler()}return e instanceof c.constructor},e.warn=e.error=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(2));var a=n.default.console&&n.default.console.error&&"function"==typeof n.default.console.error?n.default.console.error.bind(n.default.console):function(){};e.error=a;var o,i,u,f,c,s=n.default.console&&n.default.console.warn&&"function"==typeof n.default.console.warn?n.default.console.warn.bind(n.default.console):function(){};e.warn=s},function(t,e,r){"use strict";e.__esModule=!0,e.getGLTypeForTypedArray=function(t){if(t instanceof Int8Array)return a;if(t instanceof Uint8Array)return o;if(t instanceof Uint8ClampedArray)return o;if(t instanceof Int16Array)return i;if(t instanceof Uint16Array)return u;if(t instanceof Int32Array)return f;if(t instanceof Uint32Array)return c;if(t instanceof Float32Array)return s;throw"unsupported typed array type"},e.getGLTypeForTypedArrayType=function(t){if(t===Int8Array)return a;if(t===Uint8Array)return o;if(t===Uint8ClampedArray)return o;if(t===Int16Array)return i;if(t===Uint16Array)return u;if(t===Int32Array)return f;if(t===Uint32Array)return c;if(t===Float32Array)return s;throw"unsupported typed array type"},e.getTypedArrayTypeForGLType=function(t){var e=l[t];if(!e)throw"unknown gl type";return e},e.isArrayBuffer=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(r(2));var a=5120,o=5121,i=5122,u=5123,f=5124,c=5125,s=5126,l={},d=l;d[a]=Int8Array,d[o]=Uint8Array,d[i]=Int16Array,d[u]=Uint16Array,d[f]=Int32Array,d[c]=Uint32Array,d[s]=Float32Array,d[32819]=Uint16Array,d[32820]=Uint16Array,d[33635]=Uint16Array,d[5131]=Uint16Array,d[33640]=Uint32Array,d[35899]=Uint32Array,d[35902]=Uint32Array,d[36269]=Uint32Array,d[34042]=Uint32Array;var h=n.default.SharedArrayBuffer?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof n.default.SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};e.isArrayBuffer=h},function(t,e,r){"use strict";e.__esModule=!0,e.default=void 0;var n=void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};e.default=n},function(t,e,r){"use strict";e.__esModule=!0,e.add=function(t,e,r){return(r=r||new n(3))[0]=t[0]+e[0],r[1]=t[1]+e[1],r[2]=t[2]+e[2],r},e.copy=function(t,e){return(e=e||new n(3))[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.create=function(t,e,r){var a=new n(3);t&&(a[0]=t);e&&(a[1]=e);r&&(a[2]=r);return a},e.cross=function(t,e,r){r=r||new n(3);var a=t[2]*e[0]-t[0]*e[2],o=t[0]*e[1]-t[1]*e[0];return r[0]=t[1]*e[2]-t[2]*e[1],r[1]=a,r[2]=o,r},e.distance=function(t,e){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return Math.sqrt(r*r+n*n+a*a)},e.distanceSq=function(t,e){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return r*r+n*n+a*a},e.divide=function(t,e,r){return(r=r||new n(3))[0]=t[0]/e[0],r[1]=t[1]/e[1],r[2]=t[2]/e[2],r},e.divScalar=function(t,e,r){return(r=r||new n(3))[0]=t[0]/e,r[1]=t[1]/e,r[2]=t[2]/e,r},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},e.lerp=function(t,e,r,a){return(a=a||new n(3))[0]=(1-r)*t[0]+r*e[0],a[1]=(1-r)*t[1]+r*e[1],a[2]=(1-r)*t[2]+r*e[2],a},e.length=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])},e.lengthSq=function(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},e.mulScalar=function(t,e,r){return(r=r||new n(3))[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r},e.multiply=function(t,e,r){return(r=r||new n(3))[0]=t[0]*e[0],r[1]=t[1]*e[1],r[2]=t[2]*e[2],r},e.negate=function(t,e){return(e=e||new n(3))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},e.normalize=function(t,e){e=e||new n(3);var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],a=Math.sqrt(r);a>1e-5?(e[0]=t[0]/a,e[1]=t[1]/a,e[2]=t[2]/a):(e[0]=0,e[1]=0,e[2]=0);return e},e.setDefaultType=function(t){var e=n;return n=t,e},e.subtract=function(t,e,r){return(r=r||new n(3))[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r};var n=Float32Array},function(t,e,r){"use strict";e.__esModule=!0,e.isWebGL1=function(t){return!t.texStorage2D},e.isWebGL2=function(t){return!!t.texStorage2D},e.glEnumToString=void 0;var n=function(){var t={},e={};return function(r,n){return function(r){var n=r.constructor.name;if(!t[n]){for(var a in r)if("number"==typeof r[a]){var o=e[r[a]];e[r[a]]=o?"".concat(o," | ").concat(a):a}t[n]=!0}}(r),e[n]||"0x"+n.toString(16)}}();e.glEnumToString=n},function(t,e,r){"use strict";e.__esModule=!0,e.createAttributeSetters=G,e.createProgram=S,e.createProgramFromScripts=function(t,e,r,n,a){for(var o=R(r,n,a),i=[],u=0;u<e.length;++u){var f=O(t,e[u],t[w[u]],o.errorCallback);if(!f)return null;i.push(f)}return S(t,i,o)},e.createProgramFromSources=I,e.createProgramInfo=function(t,e,r,n,a){var o=R(r,n,a),i=!0;if(e=e.map(function(t){if(t.indexOf("\n")<0){var e=c(t);e?t=e.text:(o.errorCallback("no element with id: "+t),i=!1)}return t}),!i)return null;var u=I(t,e,o);if(!u)return null;return z(t,u)},e.createProgramInfoFromProgram=z,e.createUniformSetters=U,e.createUniformBlockSpecFromProgram=L,e.createUniformBlockInfoFromProgram=k,e.createUniformBlockInfo=function(t,e,r){return k(t,e.program,e.uniformBlockSpec,r)},e.createTransformFeedback=function(t,e,r){var n=t.createTransformFeedback();return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,n),t.useProgram(e.program),D(t,e,r),t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),function(t,e,r){for(var n in e.transformFeedbackInfo&&(e=e.transformFeedbackInfo),r.attribs&&(r=r.attribs),r){var a=e[n];a&&t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,a.index,null)}}(t,e,r),n},e.createTransformFeedbackInfo=C,e.bindTransformFeedbackInfo=D,e.setAttributes=X,e.setBuffersAndAttributes=function(t,e,r){r.vertexArrayObject?t.bindVertexArray(r.vertexArrayObject):(X(e.attribSetters||e,r.attribs),r.indices&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.indices))},e.setUniforms=function t(e,r){var n=e.uniformSetters||e;var a=arguments.length;for(var o=1;o<a;++o){var i=arguments[o];if(Array.isArray(i))for(var u=i.length,f=0;f<u;++f)t(n,i[f]);else for(var c in i){var s=n[c];s&&s(i[c])}}},e.setUniformBlock=function(t,e,r){j(t,e,r)&&t.bufferData(t.UNIFORM_BUFFER,r.array,t.DYNAMIC_DRAW)},e.setBlockUniforms=function(t,e){var r=t.uniforms;for(var n in e){var a=r[n];if(a){var o=e[n];o.length?a.set(o):a[0]=o}}},e.bindUniformBlock=j;var n=i(r(4)),a=i(r(0)),o=function(t){return t&&t.__esModule?t:{default:t}}(r(2));function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}var u=a.error,f=a.warn,c=o.default&&o.default.document&&o.default.document.getElementById?o.default.document.getElementById.bind(o.default.document):function(){return null},s={};function l(t,e){return s[e].bindPoint}function d(t,e){return function(r){t.uniform1i(e,r)}}function h(t,e){return function(r){t.uniform1iv(e,r)}}function p(t,e){return function(r){t.uniform2iv(e,r)}}function m(t,e){return function(r){t.uniform3iv(e,r)}}function b(t,e){return function(r){t.uniform4iv(e,r)}}function v(t,e,r,o){var i=l(0,e);return n.isWebGL2(t)?function(e){var n,u;a.isTexture(t,e)?(n=e,u=null):(n=e.texture,u=e.sampler),t.uniform1i(o,r),t.activeTexture(t.TEXTURE0+r),t.bindTexture(i,n),t.bindSampler(r,u)}:function(e){t.uniform1i(o,r),t.activeTexture(t.TEXTURE0+r),t.bindTexture(i,e)}}function y(t,e,r,o,i){for(var u=l(0,e),f=new Int32Array(i),c=0;c<i;++c)f[c]=r+c;return n.isWebGL2(t)?function(e){t.uniform1iv(o,f),e.forEach(function(e,n){var o,i;t.activeTexture(t.TEXTURE0+f[n]),a.isTexture(t,e)?(o=e,i=null):(o=e.texture,i=e.sampler),t.bindSampler(r,i),t.bindTexture(u,o)})}:function(e){t.uniform1iv(o,f),e.forEach(function(e,r){t.activeTexture(t.TEXTURE0+f[r]),t.bindTexture(u,e)})}}function g(t,e){return function(r){t.bindBuffer(t.ARRAY_BUFFER,r.buffer),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,r.numComponents||r.size,r.type||t.FLOAT,r.normalize||!1,r.stride||0,r.offset||0),void 0!==r.divisor&&t.vertexAttribDivisor(e,r.divisor)}}function E(t,e){return function(r){t.bindBuffer(t.ARRAY_BUFFER,r.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,r.numComponents||r.size,r.type||t.INT,r.stride||0,r.offset||0),void 0!==r.divisor&&t.vertexAttribDivisor(e,r.divisor)}}function M(t,e,r){var n=r.size,a=r.count;return function(r){t.bindBuffer(t.ARRAY_BUFFER,r.buffer);for(var o=r.size||r.numComponents||n,i=o/a,u=r.type||t.FLOAT,f=s[u].size*o,c=r.normalize||!1,l=r.offset||0,d=f/a,h=0;h<a;++h)t.enableVertexAttribArray(e+h),t.vertexAttribPointer(e+h,i,u,c,f,l+d*h),void 0!==r.divisor&&t.vertexAttribDivisor(e+h,r.divisor)}}s[5126]={Type:Float32Array,size:4,setter:function(t,e){return function(r){t.uniform1f(e,r)}},arraySetter:function(t,e){return function(r){t.uniform1fv(e,r)}}},s[35664]={Type:Float32Array,size:8,setter:function(t,e){return function(r){t.uniform2fv(e,r)}}},s[35665]={Type:Float32Array,size:12,setter:function(t,e){return function(r){t.uniform3fv(e,r)}}},s[35666]={Type:Float32Array,size:16,setter:function(t,e){return function(r){t.uniform4fv(e,r)}}},s[5124]={Type:Int32Array,size:4,setter:d,arraySetter:h},s[35667]={Type:Int32Array,size:8,setter:p},s[35668]={Type:Int32Array,size:12,setter:m},s[35669]={Type:Int32Array,size:16,setter:b},s[5125]={Type:Uint32Array,size:4,setter:function(t,e){return function(r){t.uniform1ui(e,r)}},arraySetter:function(t,e){return function(r){t.uniform1uiv(e,r)}}},s[36294]={Type:Uint32Array,size:8,setter:function(t,e){return function(r){t.uniform2uiv(e,r)}}},s[36295]={Type:Uint32Array,size:12,setter:function(t,e){return function(r){t.uniform3uiv(e,r)}}},s[36296]={Type:Uint32Array,size:16,setter:function(t,e){return function(r){t.uniform4uiv(e,r)}}},s[35670]={Type:Uint32Array,size:4,setter:d,arraySetter:h},s[35671]={Type:Uint32Array,size:8,setter:p},s[35672]={Type:Uint32Array,size:12,setter:m},s[35673]={Type:Uint32Array,size:16,setter:b},s[35674]={Type:Float32Array,size:16,setter:function(t,e){return function(r){t.uniformMatrix2fv(e,!1,r)}}},s[35675]={Type:Float32Array,size:36,setter:function(t,e){return function(r){t.uniformMatrix3fv(e,!1,r)}}},s[35676]={Type:Float32Array,size:64,setter:function(t,e){return function(r){t.uniformMatrix4fv(e,!1,r)}}},s[35685]={Type:Float32Array,size:24,setter:function(t,e){return function(r){t.uniformMatrix2x3fv(e,!1,r)}}},s[35686]={Type:Float32Array,size:32,setter:function(t,e){return function(r){t.uniformMatrix2x4fv(e,!1,r)}}},s[35687]={Type:Float32Array,size:24,setter:function(t,e){return function(r){t.uniformMatrix3x2fv(e,!1,r)}}},s[35688]={Type:Float32Array,size:48,setter:function(t,e){return function(r){t.uniformMatrix3x4fv(e,!1,r)}}},s[35689]={Type:Float32Array,size:32,setter:function(t,e){return function(r){t.uniformMatrix4x2fv(e,!1,r)}}},s[35690]={Type:Float32Array,size:48,setter:function(t,e){return function(r){t.uniformMatrix4x3fv(e,!1,r)}}},s[35678]={Type:null,size:0,setter:v,arraySetter:y,bindPoint:3553},s[35680]={Type:null,size:0,setter:v,arraySetter:y,bindPoint:34067},s[35679]={Type:null,size:0,setter:v,arraySetter:y,bindPoint:32879},s[35682]={Type:null,size:0,setter:v,arraySetter:y,bindPoint:3553},s[36289]={Type:null,size:0,setter:v,arraySetter:y,bindPoint:35866},s[36292]={Type:null,size:0,setter:v,arraySetter:y,bindPoint:35866},s[36293]={Type:null,size:0,setter:v,arraySetter:y,bindPoint:34067},s[36298]={Type:null,size:0,setter:v,arraySetter:y,bindPoint:3553},s[36299]={Type:null,size:0,setter:v,arraySetter:y,bindPoint:32879},s[36300]={Type:null,size:0,setter:v,arraySetter:y,bindPoint:34067},s[36303]={Type:null,size:0,setter:v,arraySetter:y,bindPoint:35866},s[36306]={Type:null,size:0,setter:v,arraySetter:y,bindPoint:3553},s[36307]={Type:null,size:0,setter:v,arraySetter:y,bindPoint:32879},s[36308]={Type:null,size:0,setter:v,arraySetter:y,bindPoint:34067},s[36311]={Type:null,size:0,setter:v,arraySetter:y,bindPoint:35866};var x={};x[5126]={size:4,setter:g},x[35664]={size:8,setter:g},x[35665]={size:12,setter:g},x[35666]={size:16,setter:g},x[5124]={size:4,setter:E},x[35667]={size:8,setter:E},x[35668]={size:12,setter:E},x[35669]={size:16,setter:E},x[5125]={size:4,setter:E},x[36294]={size:8,setter:E},x[36295]={size:12,setter:E},x[36296]={size:16,setter:E},x[35670]={size:4,setter:E},x[35671]={size:8,setter:E},x[35672]={size:12,setter:E},x[35673]={size:16,setter:E},x[35674]={size:4,setter:M,count:2},x[35675]={size:9,setter:M,count:3},x[35676]={size:16,setter:M,count:4};var _=void 0;var A=/^[ \t]*\n/;function T(t,e,r,n){var a=n||u,o=t.createShader(r),i=0;if(A.test(e)&&(i=1,e=e.replace(A,"")),t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS)){var f=t.getShaderInfoLog(o);return a(function(t,e){return e=e||0,++e,t.split("\n").map(function(t,r){return r+e+": "+t}).join("\n")}(e,i)+"\n*** Error compiling shader: "+f),t.deleteShader(o),null}return o}function R(t,e,r){var n;if("function"==typeof e&&(r=e,e=void 0),"function"==typeof t)r=t,t=void 0;else if(t&&!Array.isArray(t)){if(t.errorCallback)return t;var a=t;r=a.errorCallback,t=a.attribLocations,n=a.transformFeedbackVaryings}var o={errorCallback:r||u,transformFeedbackVaryings:n};if(t){var i={};Array.isArray(t)?t.forEach(function(t,r){i[t]=e?e[r]:r}):i=t,o.attribLocations=i}return o}var w=["VERTEX_SHADER","FRAGMENT_SHADER"];function P(t){return t.indexOf("frag")>=0?_.FRAGMENT_SHADER:t.indexOf("vert")>=0?_.VERTEX_SHADER:void 0}function F(t,e){e.forEach(function(e){t.deleteShader(e)})}function S(t,e,r,n,o){for(var i=R(r,n,o),u=[],f=[],s=0;s<e.length;++s){var l=e[s];if("string"==typeof l){var d=c(l),h=d?d.text:l,p=t[w[s]];d&&d.type&&(p=P(d.type)||p),l=T(t,h,p,i.errorCallback),f.push(l)}a.isShader(t,l)&&u.push(l)}if(u.length!==e.length)return i.errorCallback("not enough shaders for program"),F(t,f),null;var m=t.createProgram();u.forEach(function(e){t.attachShader(m,e)}),i.attribLocations&&Object.keys(i.attribLocations).forEach(function(e){t.bindAttribLocation(m,i.attribLocations[e],e)});var b=i.transformFeedbackVaryings;if(b&&(b.attribs&&(b=b.attribs),Array.isArray(b)||(b=Object.keys(b)),t.transformFeedbackVaryings(m,b,i.transformFeedbackMode||t.SEPARATE_ATTRIBS)),t.linkProgram(m),!t.getProgramParameter(m,t.LINK_STATUS)){var v=t.getProgramInfoLog(m);return i.errorCallback("Error in program linking:"+v),t.deleteProgram(m),F(t,f),null}return m}function O(t,e,r,n){var a,o=c(e);if(!o)throw"*** Error: unknown script element"+e;a=o.text;var i=r||P(o.type);if(!i)throw"*** Error: unknown shader type";return T(t,a,i,n)}function I(t,e,r,n,a){for(var o=R(r,n,a),i=[],u=0;u<e.length;++u){var f=T(t,e[u],t[w[u]],o.errorCallback);if(!f)return null;i.push(f)}return S(t,i,o)}function B(t){var e=t.name;return e.startsWith("gl_")||e.startsWith("webgl_")}function U(t,e){var r=0;function n(e,n){var a,o=t.getUniformLocation(e,n.name),i=n.size>1&&"[0]"===n.name.substr(-3),u=n.type,f=s[u];if(!f)throw"unknown type: 0x"+u.toString(16);if(f.bindPoint){var c=r;r+=n.size,a=i?f.arraySetter(t,u,c,o,n.size):f.setter(t,u,c,o,n.size)}else a=f.arraySetter&&i?f.arraySetter(t,o):f.setter(t,o);return a.location=o,a}for(var a={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<o;++i){var u=t.getActiveUniform(e,i);if(!B(u)){var f=u.name;"[0]"===f.substr(-3)&&(f=f.substr(0,f.length-3));var c=n(e,u);a[f]=c}}return a}function C(t,e){for(var r={},n=t.getProgramParameter(e,t.TRANSFORM_FEEDBACK_VARYINGS),a=0;a<n;++a){var o=t.getTransformFeedbackVarying(e,a);r[o.name]={index:a,type:o.type,size:o.size}}return r}function D(t,e,r){for(var n in e.transformFeedbackInfo&&(e=e.transformFeedbackInfo),r.attribs&&(r=r.attribs),r){var a=e[n];if(a){var o=r[n];o.offset?t.bindBufferRange(t.TRANSFORM_FEEDBACK_BUFFER,a.index,o.buffer,o.offset,o.size):t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,a.index,o.buffer)}}}function L(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=[],a=[],o=0;o<r;++o){a.push(o),n.push({});var i=t.getActiveUniform(e,o);if(B(i))break;n[o].name=i.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(r){var o=r[0],i=r[1];t.getActiveUniforms(e,a,t[o]).forEach(function(t,e){n[e][i]=t})});for(var u={},f=t.getProgramParameter(e,t.ACTIVE_UNIFORM_BLOCKS),c=0;c<f;++c){var s=t.getActiveUniformBlockName(e,c),l={index:c,usedByVertexShader:t.getActiveUniformBlockParameter(e,c,t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:t.getActiveUniformBlockParameter(e,c,t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:t.getActiveUniformBlockParameter(e,c,t.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:t.getActiveUniformBlockParameter(e,c,t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};l.used=l.usedByVertexSahder||l.usedByFragmentShader,u[s]=l}return{blockSpecs:u,uniformData:n}}var N=/\[\d+\]\.$/;function k(t,e,r,n){var a=r.blockSpecs,o=r.uniformData,i=a[n];if(!i)return f("no uniform block object named:",n),{name:n,uniforms:{}};var u=new ArrayBuffer(i.size),c=t.createBuffer(),l=i.index;t.bindBuffer(t.UNIFORM_BUFFER,c),t.uniformBlockBinding(e,i.index,l);var d=n+".";N.test(d)&&(d=d.replace(N,"."));var h={};return i.uniformIndices.forEach(function(t){var e=o[t],r=s[e.type],n=r.Type,a=e.size*r.size,i=e.name;i.substr(0,d.length)===d&&(i=i.substr(d.length)),h[i]=new n(u,e.offset,a/n.BYTES_PER_ELEMENT)}),{name:n,array:u,asFloat:new Float32Array(u),buffer:c,uniforms:h}}function j(t,e,r){var n=(e.uniformBlockSpec||e).blockSpecs[r.name];if(n){var a=n.index;return t.bindBufferRange(t.UNIFORM_BUFFER,a,r.buffer,r.offset||0,r.array.byteLength),!0}return!1}function G(t,e){for(var r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<n;++a){var o=t.getActiveAttrib(e,a);if(!B(o)){var i=t.getAttribLocation(e,o.name),u=x[o.type],f=u.setter(t,i,u);f.location=i,r[o.name]=f}}return r}function X(t,e){for(var r in e){var n=t[r];n&&n(e[r])}}function z(t,e){var r={program:e,uniformSetters:U(t,e),attribSetters:G(t,e)};return n.isWebGL2(t)&&(r.uniformBlockSpec=L(t,e),r.transformFeedbackInfo=C(t,e)),r}},function(t,e,r){"use strict";e.__esModule=!0,e.axisRotate=function(t,e,r,n){n=n||new a(16);var o=e[0],i=e[1],u=e[2],f=Math.sqrt(o*o+i*i+u*u),c=(o/=f)*o,s=(i/=f)*i,l=(u/=f)*u,d=Math.cos(r),h=Math.sin(r),p=1-d,m=c+(1-c)*d,b=o*i*p+u*h,v=o*u*p-i*h,y=o*i*p-u*h,g=s+(1-s)*d,E=i*u*p+o*h,M=o*u*p+i*h,x=i*u*p-o*h,_=l+(1-l)*d,A=t[0],T=t[1],R=t[2],w=t[3],P=t[4],F=t[5],S=t[6],O=t[7],I=t[8],B=t[9],U=t[10],C=t[11];n[0]=m*A+b*P+v*I,n[1]=m*T+b*F+v*B,n[2]=m*R+b*S+v*U,n[3]=m*w+b*O+v*C,n[4]=y*A+g*P+E*I,n[5]=y*T+g*F+E*B,n[6]=y*R+g*S+E*U,n[7]=y*w+g*O+E*C,n[8]=M*A+x*P+_*I,n[9]=M*T+x*F+_*B,n[10]=M*R+x*S+_*U,n[11]=M*w+x*O+_*C,t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]);return n},e.axisRotation=function(t,e,r){r=r||new a(16);var n=t[0],o=t[1],i=t[2],u=Math.sqrt(n*n+o*o+i*i),f=(n/=u)*n,c=(o/=u)*o,s=(i/=u)*i,l=Math.cos(e),d=Math.sin(e),h=1-l;return r[0]=f+(1-f)*l,r[1]=n*o*h+i*d,r[2]=n*i*h-o*d,r[3]=0,r[4]=n*o*h-i*d,r[5]=c+(1-c)*l,r[6]=o*i*h+n*d,r[7]=0,r[8]=n*i*h+o*d,r[9]=o*i*h-n*d,r[10]=s+(1-s)*l,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},e.copy=f,e.frustum=function(t,e,r,n,o,i,u){u=u||new a(16);var f=e-t,c=n-r,s=o-i;return u[0]=2*o/f,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2*o/c,u[6]=0,u[7]=0,u[8]=(t+e)/f,u[9]=(n+r)/c,u[10]=i/s,u[11]=-1,u[12]=0,u[13]=0,u[14]=o*i/s,u[15]=0,u},e.getAxis=function(t,e,r){r=r||n.create();var a=4*e;return r[0]=t[a+0],r[1]=t[a+1],r[2]=t[a+2],r},e.getTranslation=function(t,e){return(e=e||n.create())[0]=t[12],e[1]=t[13],e[2]=t[14],e},e.identity=c,e.inverse=s,e.lookAt=function(t,e,r,f){f=f||new a(16);var c=o,s=i,l=u;return n.normalize(n.subtract(t,e,l),l),n.normalize(n.cross(r,l,c),c),n.normalize(n.cross(l,c,s),s),f[0]=c[0],f[1]=c[1],f[2]=c[2],f[3]=0,f[4]=s[0],f[5]=s[1],f[6]=s[2],f[7]=0,f[8]=l[0],f[9]=l[1],f[10]=l[2],f[11]=0,f[12]=t[0],f[13]=t[1],f[14]=t[2],f[15]=1,f},e.multiply=function(t,e,r){r=r||new a(16);var n=t[0],o=t[1],i=t[2],u=t[3],f=t[4],c=t[5],s=t[6],l=t[7],d=t[8],h=t[9],p=t[10],m=t[11],b=t[12],v=t[13],y=t[14],g=t[15],E=e[0],M=e[1],x=e[2],_=e[3],A=e[4],T=e[5],R=e[6],w=e[7],P=e[8],F=e[9],S=e[10],O=e[11],I=e[12],B=e[13],U=e[14],C=e[15];return r[0]=n*E+f*M+d*x+b*_,r[1]=o*E+c*M+h*x+v*_,r[2]=i*E+s*M+p*x+y*_,r[3]=u*E+l*M+m*x+g*_,r[4]=n*A+f*T+d*R+b*w,r[5]=o*A+c*T+h*R+v*w,r[6]=i*A+s*T+p*R+y*w,r[7]=u*A+l*T+m*R+g*w,r[8]=n*P+f*F+d*S+b*O,r[9]=o*P+c*F+h*S+v*O,r[10]=i*P+s*F+p*S+y*O,r[11]=u*P+l*F+m*S+g*O,r[12]=n*I+f*B+d*U+b*C,r[13]=o*I+c*B+h*U+v*C,r[14]=i*I+s*B+p*U+y*C,r[15]=u*I+l*B+m*U+g*C,r},e.negate=function(t,e){return(e=e||new a(16))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e[11]=-t[11],e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=-t[15],e},e.ortho=function(t,e,r,n,o,i,u){return(u=u||new a(16))[0]=2/(e-t),u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=2/(n-r),u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2/(o-i),u[11]=0,u[12]=(e+t)/(t-e),u[13]=(n+r)/(r-n),u[14]=(i+o)/(o-i),u[15]=1,u},e.perspective=function(t,e,r,n,o){o=o||new a(16);var i=Math.tan(.5*Math.PI-.5*t),u=1/(r-n);return o[0]=i/e,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=i,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(r+n)*u,o[11]=-1,o[12]=0,o[13]=0,o[14]=r*n*u*2,o[15]=0,o},e.rotateX=function(t,e,r){r=r||new a(16);var n=t[4],o=t[5],i=t[6],u=t[7],f=t[8],c=t[9],s=t[10],l=t[11],d=Math.cos(e),h=Math.sin(e);r[4]=d*n+h*f,r[5]=d*o+h*c,r[6]=d*i+h*s,r[7]=d*u+h*l,r[8]=d*f-h*n,r[9]=d*c-h*o,r[10]=d*s-h*i,r[11]=d*l-h*u,t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]);return r},e.rotateY=function(t,e,r){r=r||new a(16);var n=t[0],o=t[1],i=t[2],u=t[3],f=t[8],c=t[9],s=t[10],l=t[11],d=Math.cos(e),h=Math.sin(e);r[0]=d*n-h*f,r[1]=d*o-h*c,r[2]=d*i-h*s,r[3]=d*u-h*l,r[8]=d*f+h*n,r[9]=d*c+h*o,r[10]=d*s+h*i,r[11]=d*l+h*u,t!==r&&(r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]);return r},e.rotateZ=function(t,e,r){r=r||new a(16);var n=t[0],o=t[1],i=t[2],u=t[3],f=t[4],c=t[5],s=t[6],l=t[7],d=Math.cos(e),h=Math.sin(e);r[0]=d*n+h*f,r[1]=d*o+h*c,r[2]=d*i+h*s,r[3]=d*u+h*l,r[4]=d*f-h*n,r[5]=d*c-h*o,r[6]=d*s-h*i,r[7]=d*l-h*u,t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]);return r},e.rotationX=function(t,e){e=e||new a(16);var r=Math.cos(t),n=Math.sin(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.rotationY=function(t,e){e=e||new a(16);var r=Math.cos(t),n=Math.sin(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.rotationZ=function(t,e){e=e||new a(16);var r=Math.cos(t),n=Math.sin(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.scale=function(t,e,r){r=r||new a(16);var n=e[0],o=e[1],i=e[2];r[0]=n*t[0],r[1]=n*t[1],r[2]=n*t[2],r[3]=n*t[3],r[4]=o*t[4],r[5]=o*t[5],r[6]=o*t[6],r[7]=o*t[7],r[8]=i*t[8],r[9]=i*t[9],r[10]=i*t[10],r[11]=i*t[11],t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]);return r},e.scaling=function(t,e){return(e=e||new a(16))[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.setAxis=function(t,e,r,n){n!==t&&(n=f(t,n));var a=4*r;return n[a+0]=e[0],n[a+1]=e[1],n[a+2]=e[2],n},e.setDefaultType=function(t){var e=a;return a=t,e},e.setTranslation=function(t,e,r){r=r||c(),t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11]);return r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r},e.transformDirection=function(t,e,r){r=r||n.create();var a=e[0],o=e[1],i=e[2];return r[0]=a*t[0]+o*t[4]+i*t[8],r[1]=a*t[1]+o*t[5]+i*t[9],r[2]=a*t[2]+o*t[6]+i*t[10],r},e.transformNormal=function(t,e,r){r=r||n.create();var a=s(t),o=e[0],i=e[1],u=e[2];return r[0]=o*a[0]+i*a[1]+u*a[2],r[1]=o*a[4]+i*a[5]+u*a[6],r[2]=o*a[8]+i*a[9]+u*a[10],r},e.transformPoint=function(t,e,r){r=r||n.create();var a=e[0],o=e[1],i=e[2],u=a*t[3]+o*t[7]+i*t[11]+t[15];return r[0]=(a*t[0]+o*t[4]+i*t[8]+t[12])/u,r[1]=(a*t[1]+o*t[5]+i*t[9]+t[13])/u,r[2]=(a*t[2]+o*t[6]+i*t[10]+t[14])/u,r},e.translate=function(t,e,r){r=r||new a(16);var n=e[0],o=e[1],i=e[2],u=t[0],f=t[1],c=t[2],s=t[3],l=t[4],d=t[5],h=t[6],p=t[7],m=t[8],b=t[9],v=t[10],y=t[11],g=t[12],E=t[13],M=t[14],x=t[15];t!==r&&(r[0]=u,r[1]=f,r[2]=c,r[3]=s,r[4]=l,r[5]=d,r[6]=h,r[7]=p,r[8]=m,r[9]=b,r[10]=v,r[11]=y);return r[12]=u*n+l*o+m*i+g,r[13]=f*n+d*o+b*i+E,r[14]=c*n+h*o+v*i+M,r[15]=s*n+p*o+y*i+x,r},e.translation=function(t,e){return(e=e||new a(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},e.transpose=function(t,e){if((e=e||new a(16))===t){var r;return r=t[1],t[1]=t[4],t[4]=r,r=t[2],t[2]=t[8],t[8]=r,r=t[3],t[3]=t[12],t[12]=r,r=t[6],t[6]=t[9],t[9]=r,r=t[7],t[7]=t[13],t[13]=r,r=t[11],t[11]=t[14],t[14]=r,e}var n=t[0],o=t[1],i=t[2],u=t[3],f=t[4],c=t[5],s=t[6],l=t[7],d=t[8],h=t[9],p=t[10],m=t[11],b=t[12],v=t[13],y=t[14],g=t[15];return e[0]=n,e[1]=f,e[2]=d,e[3]=b,e[4]=o,e[5]=c,e[6]=h,e[7]=v,e[8]=i,e[9]=s,e[10]=p,e[11]=y,e[12]=u,e[13]=l,e[14]=m,e[15]=g,e};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(r(3));var a=Float32Array,o=n.create(),i=n.create(),u=n.create();function f(t,e){return(e=e||new a(16))[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function c(t){return(t=t||new a(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function s(t,e){e=e||new a(16);var r=t[0],n=t[1],o=t[2],i=t[3],u=t[4],f=t[5],c=t[6],s=t[7],l=t[8],d=t[9],h=t[10],p=t[11],m=t[12],b=t[13],v=t[14],y=t[15],g=h*y,E=v*p,M=c*y,x=v*s,_=c*p,A=h*s,T=o*y,R=v*i,w=o*p,P=h*i,F=o*s,S=c*i,O=l*b,I=m*d,B=u*b,U=m*f,C=u*d,D=l*f,L=r*b,N=m*n,k=r*d,j=l*n,G=r*f,X=u*n,z=g*f+x*d+_*b-(E*f+M*d+A*b),W=E*n+T*d+P*b-(g*n+R*d+w*b),q=M*n+R*f+F*b-(x*n+T*f+S*b),V=A*n+w*f+S*d-(_*n+P*f+F*d),Y=1/(r*z+u*W+l*q+m*V);return e[0]=Y*z,e[1]=Y*W,e[2]=Y*q,e[3]=Y*V,e[4]=Y*(E*u+M*l+A*m-(g*u+x*l+_*m)),e[5]=Y*(g*r+R*l+w*m-(E*r+T*l+P*m)),e[6]=Y*(x*r+T*u+S*m-(M*r+R*u+F*m)),e[7]=Y*(_*r+P*u+F*l-(A*r+w*u+S*l)),e[8]=Y*(O*s+U*p+C*y-(I*s+B*p+D*y)),e[9]=Y*(I*i+L*p+j*y-(O*i+N*p+k*y)),e[10]=Y*(B*i+N*s+G*y-(U*i+L*s+X*y)),e[11]=Y*(D*i+k*s+X*p-(C*i+j*s+G*p)),e[12]=Y*(B*h+D*v+I*c-(C*v+O*c+U*h)),e[13]=Y*(k*v+O*o+N*h-(L*h+j*v+I*o)),e[14]=Y*(L*c+X*v+U*o-(G*v+B*o+N*c)),e[15]=Y*(G*h+C*o+j*c-(k*c+X*h+D*o)),e}},function(t,e,r){"use strict";e.__esModule=!0,e.createAttribsFromArrays=b,e.createBuffersFromArrays=function(t,e){var r={};Object.keys(e).forEach(function(n){r[n]=y(t,e[n],n)}),e.indices?(r.numElements=e.indices.length,r.elementType=n.getGLTypeForTypedArray(m(e.indices),"indices")):r.numElements=function(t){for(var e,r=0;r<v.length&&!((e=v[r])in t);++r);ii===v.length&&(e=Object.keys(t)[0]);var n=t[e],a=s(n).length,o=p(n,e),i=a/o;if(a%o>0)throw"numComponents "+o+" not correct for length "+a;return i}(e);return r},e.createBufferFromArray=y,e.createBufferFromTypedArray=f,e.createBufferInfoFromArrays=function(t,e){var r={attribs:b(t,e)},a=e.indices;if(a){var o=m(a,"indices");r.indices=f(t,o,t.ELEMENT_ARRAY_BUFFER),r.numElements=o.length,r.elementType=n.getGLTypeForTypedArray(o)}else r.numElements=function(t,e){var r,n;for(n=0;n<v.length&&!((r=v[n])in e)&&!((r=i.attribPrefix+r)in e);++n);n===v.length&&(r=Object.keys(e)[0]);var a=e[r];t.bindBuffer(t.ARRAY_BUFFER,a.buffer);var o=t.getBufferParameter(t.ARRAY_BUFFER,t.BUFFER_SIZE);t.bindBuffer(t.ARRAY_BUFFER,null);var u=function(t,e){return e===t.BYTE?1:e===t.UNSIGNED_BYTE?1:e===t.SHORT?2:e===t.UNSIGNED_SHORT?2:e===t.INT?4:e===t.UNSIGNED_INT?4:e===t.FLOAT?4:0}(t,a.type),f=o/u,c=a.numComponents||a.size,s=f/c;if(s%1!=0)throw"numComponents "+c+" not correct for length "+length;return s}(t,r.attribs);return r},e.setAttribInfoBufferFromArray=function(t,e,r,n){r=m(r),void 0!==n?(t.bindBuffer(t.ARRAY_BUFFER,e.buffer),t.bufferSubData(t.ARRAY_BUFFER,n,r)):u(t,t.ARRAY_BUFFER,e.buffer,r,e.drawType)},e.setAttributePrefix=function(t){i.attribPrefix=t},e.setAttributeDefaults_=function(t){a.copyExistingProperties(t,i)},e.getNumComponents_=p,e.getArray_=s;var n=o(r(1)),a=o(r(0));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}var i={attribPrefix:""};function u(t,e,r,n,a){t.bindBuffer(e,r),t.bufferData(e,n,a||t.STATIC_DRAW)}function f(t,e,r,n){if(a.isBuffer(t,e))return e;r=r||t.ARRAY_BUFFER;var o=t.createBuffer();return u(t,r,o,e,n),o}function c(t){return"indices"===t}function s(t){return t.length?t:t.data}var l=/coord|texture/i,d=/color|colour/i;function h(t,e){var r;if(e%(r=l.test(t)?2:d.test(t)?4:3)>0)throw"Can not guess numComponents for attribute '"+t+"'. Tried "+r+" but "+e+" values is not evenly divisible by "+r+". You should specify it.";return r}function p(t,e){return t.numComponents||t.size||h(e,s(t).length)}function m(t,e){if(n.isArrayBuffer(t))return t;if(n.isArrayBuffer(t.data))return t.data;Array.isArray(t)&&(t={data:t});var r=t.type;return r||(r=c(e)?Uint16Array:Float32Array),new r(t.data)}function b(t,e){var r={};return Object.keys(e).forEach(function(a){if(!c(a)){var o,u,s,l,d,b=e[a],v=b.attrib||b.name||b.attribName||i.attribPrefix+a;if("number"==typeof b||"number"==typeof b.data){d=b.data||b;var y=b.type||Float32Array,g=d*y.BYTES_PER_ELEMENT;u=n.getGLTypeForTypedArrayType(y),s=void 0!==b.normalize?b.normalize:function(t){return t===Int8Array||t===Uint8Array}(y),l=b.numComponents||b.size||h(a,d),o=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,g,b.drawType||t.STATIC_DRAW)}else{var E=m(b,a);o=f(t,E,void 0,b.drawType),u=n.getGLTypeForTypedArray(E),s=void 0!==b.normalize?b.normalize:function(t){return t instanceof Int8Array||t instanceof Uint8Array}(E),l=p(b,a),d=E.length}r[v]={buffer:o,numComponents:l,type:u,normalize:s,stride:b.stride||0,offset:b.offset||0,divisor:void 0===b.divisor?void 0:b.divisor,drawType:b.drawType}}}),t.bindBuffer(t.ARRAY_BUFFER,null),r}var v=["position","positions","a_position"];function y(t,e,r){var n="indices"===r?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER;return f(t,m(e,r),n)}},function(t,e,r){"use strict";e.__esModule=!0,e.setTextureDefaults_=function(t){o.copyExistingProperties(t,f),t.textureColor&&x(t.textureColor)},e.createSampler=O,e.createSamplers=function(t,e){var r={};return Object.keys(e).forEach(function(n){r[n]=O(t,e[n])}),r},e.setSamplerParameters=S,e.createTexture=V,e.setEmptyTexture=q,e.setTextureFromArray=W,e.loadTextureFromUrl=G,e.setTextureFromElement=D,e.setTextureFilteringForSize=I,e.setTextureParameters=F,e.setDefaultTextureColor=x,e.createTextures=function(t,e,r){r=r||L;var n=0,a=[],o={},i={};function u(){0===n&&setTimeout(function(){r(a.length?a:void 0,o,i)},0)}return Object.keys(e).forEach(function(r){var f,c=e[r];(function(t){return"string"==typeof t||Array.isArray(t)&&"string"==typeof t[0]})(c.src)&&(f=function(t,e,o){i[r]=o,--n,t&&a.push(t),u()},++n),o[r]=V(t,c,f)}),u(),o},e.resizeTexture=function(t,e,r,n,a){n=n||r.width,a=a||r.height;var o=r.target||t.TEXTURE_2D;t.bindTexture(o,e);var i,u=r.level||0,f=r.internalFormat||r.format||t.RGBA,s=y(f),l=r.format||s.format,d=r.src;i=d&&(c(d)||Array.isArray(d)&&"number"==typeof d[0])?r.type||E(t,d,s.type):r.type||s.type;if(o===t.TEXTURE_CUBE_MAP)for(var h=0;h<6;++h)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+h,u,f,n,a,0,l,i,null);else t.texImage2D(o,u,f,n,a,0,l,i,null)},e.getNumComponentsForFormat=function(t){var e=h[t];if(!e)throw"unknown format: "+t;return e.numColorComponents},e.getBytesPerElementForInternalFormat=v;var n=u(r(4)),a=u(r(1)),o=u(r(0)),i=function(t){return t&&t.__esModule?t:{default:t}}(r(2));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}var f={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},c=a.isArrayBuffer,s=i.default.document&&i.default.document.createElement?i.default.document.createElement("canvas").getContext("2d"):null,l=6407,d=33319,h={},p=h;p[6406]={numColorComponents:1},p[6409]={numColorComponents:1},p[6410]={numColorComponents:2},p[l]={numColorComponents:3},p[6408]={numColorComponents:4},p[6403]={numColorComponents:1},p[36244]={numColorComponents:1},p[d]={numColorComponents:2},p[33320]={numColorComponents:2},p[l]={numColorComponents:3},p[36248]={numColorComponents:3},p[6408]={numColorComponents:4},p[36249]={numColorComponents:4},p[6402]={numColorComponents:1},p[34041]={numColorComponents:2};var m={},b=m;function v(t,e){var r=m[t];if(!r)throw"unknown internal format";var n=r.bytesPerElementMap[e];if(void 0===n)throw"unknown internal format";return n}function y(t){var e=m[t];if(!e)throw"unknown internal format";return{format:e.textureFormat,type:Array.isArray(e.type)?e.type[0]:e.type}}function g(t){return 0==(t&t-1)}function E(t,e,r){return c(e)?a.getGLTypeForTypedArray(e):r||t.UNSIGNED_BYTE}function M(t,e,r,n,a){if(a%1!=0)throw"can't guess dimensions";if(r||n){if(n){if(!r&&(r=a/n)%1)throw"can't guess dimensions"}else if((n=a/r)%1)throw"can't guess dimensions"}else{var o=Math.sqrt(a/(e===t.TEXTURE_CUBE_MAP?6:1));o%1==0?(r=o,n=o):(r=a,n=1)}return{width:r,height:n}}function x(t){f.textureColor=new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}b[6406]={textureFormat:6406,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},b[6409]={textureFormat:6409,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[5121,5131,36193,5126]},b[6410]={textureFormat:6410,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[5121,5131,36193,5126]},b[l]={textureFormat:l,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[5121,5131,36193,5126,33635]},b[6408]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[5121,5131,36193,5126,32819,32820]},b[33321]={textureFormat:6403,colorRenderable:!0,textureFilterable:!0,bytesPerElement:1,type:5121},b[36756]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:1,type:5120},b[33325]={textureFormat:6403,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[5126,5131]},b[33326]={textureFormat:6403,colorRenderable:!1,textureFilterable:!1,bytesPerElement:4,type:5126},b[33330]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:1,type:5121},b[33329]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:1,type:5120},b[33332]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5123},b[33331]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5122},b[33334]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5125},b[33333]={textureFormat:36244,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5124},b[33323]={textureFormat:d,colorRenderable:!0,textureFilterable:!0,bytesPerElement:2,type:5121},b[36757]={textureFormat:d,colorRenderable:!1,textureFilterable:!0,bytesPerElement:2,type:5120},b[33327]={textureFormat:d,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[5126,5131]},b[33328]={textureFormat:d,colorRenderable:!1,textureFilterable:!1,bytesPerElement:8,type:5126},b[33336]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5121},b[33335]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:2,type:5120},b[33338]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5123},b[33337]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5122},b[33340]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5125},b[33339]={textureFormat:33320,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5124},b[32849]={textureFormat:l,colorRenderable:!0,textureFilterable:!0,bytesPerElement:3,type:5121},b[35905]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:3,type:5121},b[36194]={textureFormat:l,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[5121,33635]},b[36758]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:3,type:5120},b[35898]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35899]},b[35901]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[5126,5131,35902]},b[34843]={textureFormat:l,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[5126,5131]},b[34837]={textureFormat:l,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5126},b[36221]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:3,type:5121},b[36239]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:3,type:5120},b[36215]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:6,type:5123},b[36233]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:6,type:5122},b[36209]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5125},b[36227]={textureFormat:36248,colorRenderable:!1,textureFilterable:!1,bytesPerElement:12,type:5124},b[32856]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:5121},b[35907]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:5121},b[36759]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:4,type:5120},b[32855]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[5121,32820,33640]},b[32854]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[5121,32819]},b[32857]={textureFormat:6408,colorRenderable:!0,textureFilterable:!0,bytesPerElement:4,type:33640},b[34842]={textureFormat:6408,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[5126,5131]},b[34836]={textureFormat:6408,colorRenderable:!1,textureFilterable:!1,bytesPerElement:16,type:5126},b[36220]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5121},b[36238]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5120},b[36975]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:33640},b[36214]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5123},b[36232]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:8,type:5122},b[36226]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:16,type:5124},b[36208]={textureFormat:36249,colorRenderable:!0,textureFilterable:!1,bytesPerElement:16,type:5125},b[33189]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[5123,5125]},b[33190]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5125},b[36012]={textureFormat:6402,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:5126},b[35056]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:34042},b[36013]={textureFormat:34041,colorRenderable:!0,textureFilterable:!1,bytesPerElement:4,type:36269},Object.keys(b).forEach(function(t){var e=b[t];if(e.bytesPerElementMap={},Array.isArray(e.bytesPerElement))e.bytesPerElement.forEach(function(t,r){var n=e.type[r];e.bytesPerElementMap[n]=t});else{var r=e.type;e.bytesPerElementMap[r]=e.bytesPerElement}});var _={};function A(t,e){void 0!==e.colorspaceConversion&&(_.colorspaceConversion=t.getParameter(t.UNPACK_COLORSPACE_CONVERSION_WEBGL),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.colorspaceConversion)),void 0!==e.premultiplyAlpha&&(_.premultiplyAlpha=t.getParameter(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha)),void 0!==e.flipY&&(_.flipY=t.getParameter(t.UNPACK_FLIP_Y_WEBGL),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY))}function T(t,e){void 0!==e.colorspaceConversion&&t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,_.colorspaceConversion),void 0!==e.premultiplyAlpha&&t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_.premultiplyAlpha),void 0!==e.flipY&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,_.flipY)}function R(t){_.unpackAlignment=t.getParameter(t.UNPACK_ALIGNMENT),n.isWebGL2(t)&&(_.unpackRowLength=t.getParameter(t.UNPACK_ROW_LENGTH),_.unpackImageHeight=t.getParameter(t.UNPACK_IMAGE_HEIGHT),_.unpackSkipPixels=t.getParameter(t.UNPACK_SKIP_PIXELS),_.unpackSkipRows=t.getParameter(t.UNPACK_SKIP_ROWS),_.unpackSkipImages=t.getParameter(t.UNPACK_SKIP_IMAGES))}function w(t){t.pixelStorei(t.UNPACK_ALIGNMENT,_.unpackAlignment),n.isWebGL2(t)&&(t.pixelStorei(t.UNPACK_ROW_LENGTH,_.unpackRowLength),t.pixelStorei(t.UNPACK_IMAGE_HEIGHT,_.unpackImageHeight),t.pixelStorei(t.UNPACK_SKIP_PIXELS,_.unpackSkipPixels),t.pixelStorei(t.UNPACK_SKIP_ROWS,_.unpackSkipRows),t.pixelStorei(t.UNPACK_SKIP_IMAGES,_.unpackSkipImages))}function P(t,e,r,n){n.minMag&&(r.call(t,e,t.TEXTURE_MIN_FILTER,n.minMag),r.call(t,e,t.TEXTURE_MAG_FILTER,n.minMag)),n.min&&r.call(t,e,t.TEXTURE_MIN_FILTER,n.min),n.mag&&r.call(t,e,t.TEXTURE_MAG_FILTER,n.mag),n.wrap&&(r.call(t,e,t.TEXTURE_WRAP_S,n.wrap),r.call(t,e,t.TEXTURE_WRAP_T,n.wrap),(e===t.TEXTURE_3D||o.isSampler(t,e))&&r.call(t,e,t.TEXTURE_WRAP_R,n.wrap)),n.wrapR&&r.call(t,e,t.TEXTURE_WRAP_R,n.wrapR),n.wrapS&&r.call(t,e,t.TEXTURE_WRAP_S,n.wrapS),n.wrapT&&r.call(t,e,t.TEXTURE_WRAP_T,n.wrapT),n.minLod&&r.call(t,e,t.TEXTURE_MIN_LOD,n.minLod),n.maxLod&&r.call(t,e,t.TEXTURE_MAX_LOD,n.maxLod),n.baseLevel&&r.call(t,e,t.TEXTURE_BASE_LEVEL,n.baseLevel),n.maxLevel&&r.call(t,e,t.TEXTURE_MAX_LEVEL,n.maxLevel)}function F(t,e,r){var n=r.target||t.TEXTURE_2D;t.bindTexture(n,e),P(t,n,t.texParameteri,r)}function S(t,e,r){P(t,e,t.samplerParameteri,r)}function O(t,e){var r=t.createSampler();return S(t,r,e),r}function I(t,e,r,a,o,i,u){r=r||f.textureOptions,i=i||t.RGBA,u=u||t.UNSIGNED_BYTE;var c=r.target||t.TEXTURE_2D;if(a=a||r.width,o=o||r.height,t.bindTexture(c,e),function(t,e,r,a){if(!n.isWebGL2(t))return g(e)&&g(r);var o=m[a];if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}(t,a,o,i))t.generateMipmap(c);else{var s=function(t){var e=m[t];if(!e)throw"unknown internal format";return e.textureFilterable}(i)?t.LINEAR:t.NEAREST;t.texParameteri(c,t.TEXTURE_MIN_FILTER,s),t.texParameteri(c,t.TEXTURE_MAG_FILTER,s),t.texParameteri(c,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(c,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}}function B(t){return!0===t.auto||void 0===t.auto&&void 0===t.level}function U(t,e){return(e=e||{}).cubeFaceOrder||[t.TEXTURE_CUBE_MAP_POSITIVE_X,t.TEXTURE_CUBE_MAP_NEGATIVE_X,t.TEXTURE_CUBE_MAP_POSITIVE_Y,t.TEXTURE_CUBE_MAP_NEGATIVE_Y,t.TEXTURE_CUBE_MAP_POSITIVE_Z,t.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function C(t,e){var r=U(t,e).map(function(t,e){return{face:t,ndx:e}});return r.sort(function(t,e){return t.face-e.face}),r}function D(t,e,r,n){var a=(n=n||f.textureOptions).target||t.TEXTURE_2D,o=n.level||0,u=r.width,c=r.height,l=n.internalFormat||n.format||t.RGBA,d=y(l),h=n.format||d.format,p=n.type||d.type;if(A(t,n),t.bindTexture(a,e),a===t.TEXTURE_CUBE_MAP){var m,b,v=r.width,g=r.height;if(v/6===g)m=g,b=[0,0,1,0,2,0,3,0,4,0,5,0];else if(g/6===v)m=v,b=[0,0,0,1,0,2,0,3,0,4,0,5];else if(v/3==g/2)m=v/3,b=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(v/2!=g/3)throw"can't figure out cube map from element: "+(r.src?r.src:r.nodeName);m=v/2,b=[0,0,1,0,0,1,1,1,0,2,1,2]}s?(s.canvas.width=m,s.canvas.height=m,u=m,c=m,C(t,n).forEach(function(e){var n=b[2*e.ndx+0]*m,a=b[2*e.ndx+1]*m;s.drawImage(r,n,a,m,m,0,0,m,m),t.texImage2D(e.face,o,l,h,p,s.canvas)}),s.canvas.width=1,s.canvas.height=1):i.default.createImageBitmap&&(u=m,c=m,C(t,n).forEach(function(f){var s=b[2*f.ndx+0]*m,d=b[2*f.ndx+1]*m;t.texImage2D(f.face,o,l,m,m,0,h,p,null),i.default.createImageBitmap(r,s,d,m,m,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(r){A(t,n),t.bindTexture(a,e),t.texImage2D(f.face,o,l,h,p,r),T(t,n),B(n)&&I(t,e,n,u,c,l,p)})}))}else if(a===t.TEXTURE_3D||a===t.TEXTURE_2D_ARRAY){var E=Math.min(r.width,r.height),M=Math.max(r.width,r.height),x=M/E;if(x%1!=0)throw"can not compute 3D dimensions of element";var _=r.width===M?1:0,P=r.height===M?1:0;R(t),t.pixelStorei(t.UNPACK_ALIGNMENT,1),t.pixelStorei(t.UNPACK_ROW_LENGTH,r.width),t.pixelStorei(t.UNPACK_IMAGE_HEIGHT,0),t.pixelStorei(t.UNPACK_SKIP_IMAGES,0),t.texImage3D(a,o,l,E,E,E,0,h,p,null);for(var S=0;S<x;++S){var O=S*E*_,U=S*E*P;t.pixelStorei(t.UNPACK_SKIP_PIXELS,O),t.pixelStorei(t.UNPACK_SKIP_ROWS,U),t.texSubImage3D(a,o,0,0,S,E,E,1,h,p,r)}w(t)}else t.texImage2D(a,o,l,h,p,r);T(t,n),B(n)&&I(t,e,n,u,c,l,p),F(t,e,n)}function L(){}function N(t){return i.default.ImageBitmap&&t instanceof i.default.ImageBitmap||i.default.ImageData&&t instanceof i.default.ImageData||i.default.HTMLElement&&t instanceof i.default.HTMLElement}function k(t,e,r){return N(t)?(setTimeout(function(){r(null,t)}),t):function(t,e,r){var n;if(r=r||L,i.default.Image){n=new i.default.Image,void 0!==(e=void 0!==e?e:f.crossOrigin)&&(n.crossOrigin=e);var a=function(){n.removeEventListener("error",u),n.removeEventListener("load",c),n=null},u=function(){var e="couldn't load image: "+t;o.error(e),r(e,n),a()},c=function(){r(null,n),a()};return n.addEventListener("error",u),n.addEventListener("load",c),n.src=t,n}if(i.default.ImageBitmap){var s,l,d=function(){r(s,l)},h={};e&&(h.mode="cors"),fetch(t,h).then(function(t){if(!t.ok)throw t;return t.blob()}).then(function(t){return i.default.createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(t){l=t,setTimeout(d)}).catch(function(t){s=t,setTimeout(d)}),n=null}return n}(t,e,r)}function j(t,e,r){var n=(r=r||f.textureOptions).target||t.TEXTURE_2D;if(t.bindTexture(n,e),!1!==r.color){var a=function(t){return t=t||f.textureColor,c(t)?t:new Uint8Array([255*t[0],255*t[1],255*t[2],255*t[3]])}(r.color);if(n===t.TEXTURE_CUBE_MAP)for(var o=0;o<6;++o)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,a);else n===t.TEXTURE_3D||n===t.TEXTURE_2D_ARRAY?t.texImage3D(n,0,t.RGBA,1,1,1,0,t.RGBA,t.UNSIGNED_BYTE,a):t.texImage2D(n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,a)}}function G(t,e,r,n){return n=n||L,r=r||f.textureOptions,j(t,e,r),k((r=Object.assign({},r)).src,r.crossOrigin,function(a,o){a?n(a,e,o):(D(t,e,o,r),n(null,e,o))})}function X(t,e,r,n){n=n||L;var a=r.src;if(6!==a.length)throw"there must be 6 urls for a cubemap";var o=r.level||0,i=r.internalFormat||r.format||t.RGBA,u=y(i),f=r.format||u.format,c=r.type||t.UNSIGNED_BYTE,s=r.target||t.TEXTURE_2D;if(s!==t.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";j(t,e,r),r=Object.assign({},r);var l,d=6,h=[],p=U(t,r);l=a.map(function(a,u){return k(a,r.crossOrigin,function(a){return function(u,p){--d,u?h.push(u):p.width!==p.height?h.push("cubemap face img is not a square: "+p.src):(A(t,r),t.bindTexture(s,e),5===d?U(t).forEach(function(e){t.texImage2D(e,o,i,f,c,p)}):t.texImage2D(a,o,i,f,c,p),T(t,r),B(r)&&t.generateMipmap(s)),0===d&&n(h.length?h:void 0,e,l)}}(p[u]))})}function z(t,e,r,n){n=n||L;var a=r.src,o=r.internalFormat||r.format||t.RGBA,i=y(o),u=r.format||i.format,f=r.type||t.UNSIGNED_BYTE,c=r.target||t.TEXTURE_2D_ARRAY;if(c!==t.TEXTURE_3D&&c!==t.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";j(t,e,r),r=Object.assign({},r);var l,d=a.length,h=[],p=r.level||0,m=r.width,b=r.height,v=a.length,g=!0;l=a.map(function(a,i){return k(a,r.crossOrigin,function(a){return function(i,y){if(--d,i)h.push(i);else{if(A(t,r),t.bindTexture(c,e),g){g=!1,m=r.width||y.width,b=r.height||y.height,t.texImage3D(c,p,o,m,b,v,0,u,f,null);for(var E=0;E<v;++E)t.texSubImage3D(c,p,0,0,E,m,b,1,u,f,y)}else{var M=y;y.width===m&&y.height===b||(M=s.canvas,s.canvas.width=m,s.canvas.height=b,s.drawImage(y,0,0,m,b)),t.texSubImage3D(c,p,0,0,a,m,b,1,u,f,M),M===s.canvas&&(s.canvas.width=0,s.canvas.height=0)}T(t,r),B(r)&&t.generateMipmap(c)}0===d&&n(h.length?h:void 0,e,l)}}(i))})}function W(t,e,r,o){var i=(o=o||f.textureOptions).target||t.TEXTURE_2D;t.bindTexture(i,e);var u=o.width,s=o.height,l=o.depth,d=o.level||0,h=o.internalFormat||o.format||t.RGBA,p=y(h),m=o.format||p.format,b=o.type||E(t,r,p.type);if(c(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{var g=a.getTypedArrayTypeForGLType(b);r=new g(r)}var x,_=v(h,b),P=r.byteLength/_;if(P%1)throw"length wrong size for format: "+n.glEnumToString(t,m);if(i===t.TEXTURE_3D)if(u||s||l)!u||s&&l?!s||u&&l?(x=M(t,i,u,s,P/l),u=x.width,s=x.height):(x=M(t,i,u,l,P/s),u=x.width,l=x.height):(x=M(t,i,s,l,P/u),s=x.width,l=x.height);else{var F=Math.cbrt(P);if(F%1!=0)throw"can't guess cube size of array of numElements: "+P;u=F,s=F,l=F}else x=M(t,i,u,s,P),u=x.width,s=x.height;if(R(t),t.pixelStorei(t.UNPACK_ALIGNMENT,o.unpackAlignment||1),A(t,o),i===t.TEXTURE_CUBE_MAP){var S=P/6*(_/r.BYTES_PER_ELEMENT);C(t,o).forEach(function(e){var n=S*e.ndx,a=r.subarray(n,n+S);t.texImage2D(e.face,d,h,u,s,0,m,b,a)})}else i===t.TEXTURE_3D?t.texImage3D(i,d,h,u,s,l,0,m,b,r):t.texImage2D(i,d,h,u,s,0,m,b,r);return T(t,o),w(t),{width:u,height:s,depth:l,type:b}}function q(t,e,r){var n=r.target||t.TEXTURE_2D;t.bindTexture(n,e);var a=r.level||0,o=r.internalFormat||r.format||t.RGBA,i=y(o),u=r.format||i.format,f=r.type||i.type;if(A(t,r),n===t.TEXTURE_CUBE_MAP)for(var c=0;c<6;++c)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+c,a,o,r.width,r.height,0,u,f,null);else n===t.TEXTURE_3D?t.texImage3D(n,a,o,r.width,r.height,r.depth,0,u,f,null):t.texImage2D(n,a,o,r.width,r.height,0,u,f,null);T(t,r)}function V(t,e,r){r=r||L,e=e||f.textureOptions;var n=t.createTexture(),a=e.target||t.TEXTURE_2D,o=e.width||1,i=e.height||1,u=e.internalFormat||t.RGBA,s=y(u),l=e.type||s.type;t.bindTexture(a,n),a===t.TEXTURE_CUBE_MAP&&(t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE));var d=e.src;if(d)if("function"==typeof d&&(d=d(t,e)),"string"==typeof d)G(t,n,e,r);else if(c(d)||Array.isArray(d)&&("number"==typeof d[0]||Array.isArray(d[0])||c(d[0]))){var h=W(t,n,d,e);o=h.width,i=h.height,l=h.type}else if(Array.isArray(d)&&("string"==typeof d[0]||N(d[0])))a===t.TEXTURE_CUBE_MAP?X(t,n,e,r):z(t,n,e,r);else{if(!N(d))throw"unsupported src type";D(t,n,d,e),o=d.width,i=d.height}else q(t,n,e);return B(e)&&I(t,n,e,o,i,u,l),F(t,n,e),n}},function(t,e,r){"use strict";e.__esModule=!0;var n={m4:!0,v3:!0,primitives:!0};e.primitives=e.v3=e.m4=void 0;var a=f(r(6));e.m4=a;var o=f(r(3));e.v3=o;var i=f(r(10));e.primitives=i;var u=r(11);function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=u[t]))})},function(t,e,r){"use strict";e.__esModule=!0,e.create3DFVertices=w,e.createAugmentedTypedArray=d,e.createCubeVertices=A,e.createPlaneVertices=M,e.createSphereVertices=x,e.createTruncatedConeVertices=T,e.createXYQuadVertices=E,e.createCresentVertices=P,e.createCylinderVertices=F,e.createTorusVertices=S,e.createDiscVertices=O,e.deindexVertices=function(t){var e=t.indices,r={},n=e.length;return Object.keys(t).filter(h).forEach(function(a){for(var o=t[a],i=o.numComponents,u=d(i,n,o.constructor),f=0;f<n;++f)for(var c=e[f],s=c*i,l=0;l<i;++l)u.push(o[s+l]);r[a]=u}),r},e.flattenNormals=function(t){if(t.indices)throw"can't flatten normals of indexed vertices. deindex them first";for(var e=t.normal,r=e.length,n=0;n<r;n+=9){var a=e[n+0],o=e[n+1],i=e[n+2],u=e[n+3],f=e[n+4],c=e[n+5],s=e[n+6],l=e[n+7],d=e[n+8],h=a+u+s,p=o+f+l,m=i+c+d,b=Math.sqrt(h*h+p*p+m*m);h/=b,p/=b,m/=b,e[n+0]=h,e[n+1]=p,e[n+2]=m,e[n+3]=h,e[n+4]=p,e[n+5]=m,e[n+6]=h,e[n+7]=p,e[n+8]=m}return t},e.makeRandomVertexColors=function(t,e){e=e||{};var r=t.position.numElements,n=d(4,r,Uint8Array),a=e.rand||function(t,e){return e<3?function(t){return Math.random()*t|0}(256):255};if(t.color=n,t.indices)for(var o=0;o<r;++o)n.push(a(o,0),a(o,1),a(o,2),a(o,3));else for(var i=e.vertsPerColor||3,u=r/i,f=0;f<u;++f)for(var c=[a(f,0),a(f,1),a(f,2),a(f,3)],s=0;s<i;++s)n.push(c);return t},e.reorientDirections=b,e.reorientNormals=v,e.reorientPositions=y,e.reorientVertices=g,e.concatVertices=function(t){for(var e,r={},n=function(n){var a=t[n];Object.keys(a).forEach(function(t){r[t]||(r[t]=[]),e||"indices"===t||(e=t);var n=a[t],o=s(n,t),i=c(n),u=i.length/o;r[t].push(u)})},a=0;a<t.length;++a)n(a);var o=r[e],i={};return Object.keys(r).forEach(function(e){var r=function(e){for(var r,n=0,a=0;a<t.length;++a){var o=t[a],i=o[e],u=c(i);n+=u.length,r&&!i.data||(r=i)}return{length:n,spec:r}}(e),n=D(r.spec,r.length);!function(e,r,n){for(var a=0,o=0,i=0;i<t.length;++i){var u=t[i],f=u[e],s=c(f);"indices"===e?(C(s,n,o,a),a+=r[i]):C(s,n,o),o+=s.length}}(e,o,c(n)),i[e]=n}),i},e.duplicateVertices=function(t){var e={};return Object.keys(t).forEach(function(r){var n=t[r],a=c(n),o=D(n,a.length);C(a,c(o),0),e[r]=o}),e},e.createDiscBuffers=e.createDiscBufferInfo=e.createTorusBuffers=e.createTorusBufferInfo=e.createCylinderBuffers=e.createCylinderBufferInfo=e.createCresentBuffers=e.createCresentBufferInfo=e.createXYQuadBuffers=e.createXYQuadBufferInfo=e.createTruncatedConeBuffers=e.createTruncatedConeBufferInfo=e.createSphereBuffers=e.createSphereBufferInfo=e.createPlaneBuffers=e.createPlaneBufferInfo=e.createCubeBuffers=e.createCubeBufferInfo=e.create3DFBuffers=e.create3DFBufferInfo=void 0;var n=f(r(7)),a=f(r(0)),o=f(r(1)),i=f(r(6)),u=f(r(3));function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}var c=n.getArray_,s=n.getNumComponents_;function l(t,e){var r=0;return t.push=function(){for(var e=0;e<arguments.length;++e){var n=arguments[e];if(n instanceof Array||o.isArrayBuffer(n))for(var a=0;a<n.length;++a)t[r++]=n[a];else t[r++]=n}},t.reset=function(t){r=t||0},t.numComponents=e,Object.defineProperty(t,"numElements",{get:function(){return this.length/this.numComponents|0}}),t}function d(t,e,r){return l(new(r||Float32Array)(t*e),t)}function h(t){return"indices"!==t}function p(t,e,r){for(var n=t.length,a=new Float32Array(3),o=0;o<n;o+=3)r(e,[t[o],t[o+1],t[o+2]],a),t[o]=a[0],t[o+1]=a[1],t[o+2]=a[2]}function m(t,e,r){r=r||u.create();var n=e[0],a=e[1],o=e[2];return r[0]=n*t[0]+a*t[1]+o*t[2],r[1]=n*t[4]+a*t[5]+o*t[6],r[2]=n*t[8]+a*t[9]+o*t[10],r}function b(t,e){return p(t,e,i.transformDirection),t}function v(t,e){return p(t,i.inverse(e),m),t}function y(t,e){return p(t,e,i.transformPoint),t}function g(t,e){return Object.keys(t).forEach(function(r){var n=t[r];r.indexOf("pos")>=0?y(n,e):r.indexOf("tan")>=0||r.indexOf("binorm")>=0?b(n,e):r.indexOf("norm")>=0&&v(n,e)}),t}function E(t,e,r){return t=t||2,{position:{numComponents:2,data:[(e=e||0)+-1*(t*=.5),(r=r||0)+-1*t,e+1*t,r+-1*t,e+-1*t,r+1*t,e+1*t,r+1*t]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function M(t,e,r,n,a){t=t||1,e=e||1,r=r||1,n=n||1,a=a||i.identity();for(var o=(r+1)*(n+1),u=d(3,o),f=d(3,o),c=d(2,o),s=0;s<=n;s++)for(var l=0;l<=r;l++){var h=l/r,p=s/n;u.push(t*h-.5*t,0,e*p-.5*e),f.push(0,1,0),c.push(h,p)}for(var m=r+1,b=d(3,r*n*2,Uint16Array),v=0;v<n;v++)for(var y=0;y<r;y++)b.push((v+0)*m+y,(v+1)*m+y,(v+0)*m+y+1),b.push((v+1)*m+y,(v+1)*m+y+1,(v+0)*m+y+1);return g({position:u,normal:f,texcoord:c,indices:b},a)}function x(t,e,r,n,a,o,i){if(e<=0||r<=0)throw Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,a=a||Math.PI,o=o||0;for(var u=a-n,f=(i=i||2*Math.PI)-o,c=(e+1)*(r+1),s=d(3,c),l=d(3,c),h=d(2,c),p=0;p<=r;p++)for(var m=0;m<=e;m++){var b=m/e,v=p/r,y=f*b,g=u*v,E=Math.sin(y),M=Math.cos(y),x=Math.sin(g),_=M*x,A=Math.cos(g),T=E*x;s.push(t*_,t*A,t*T),l.push(_,A,T),h.push(1-b,v)}for(var R=e+1,w=d(3,e*r*2,Uint16Array),P=0;P<e;P++)for(var F=0;F<r;F++)w.push((F+0)*R+P,(F+0)*R+P+1,(F+1)*R+P),w.push((F+1)*R+P,(F+0)*R+P+1,(F+1)*R+P+1);return{position:s,normal:l,texcoord:h,indices:w}}var _=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function A(t){for(var e=(t=t||1)/2,r=[[-e,-e,-e],[+e,-e,-e],[-e,+e,-e],[+e,+e,-e],[-e,-e,+e],[+e,-e,+e],[-e,+e,+e],[+e,+e,+e]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],a=[[1,0],[0,0],[0,1],[1,1]],o=d(3,24),i=d(3,24),u=d(2,24),f=d(3,12,Uint16Array),c=0;c<6;++c){for(var s=_[c],l=0;l<4;++l){var h=r[s[l]],p=n[c],m=a[l];o.push(h),i.push(p),u.push(m)}var b=4*c;f.push(b+0,b+1,b+2),f.push(b+0,b+2,b+3)}return{position:o,normal:i,texcoord:u,indices:f}}function T(t,e,r,n,a,o,i){if(n<3)throw Error("radialSubdivisions must be 3 or greater");if(a<1)throw Error("verticalSubdivisions must be 1 or greater");for(var u=void 0===o||o,f=void 0===i||i,c=(u?2:0)+(f?2:0),s=(n+1)*(a+1+c),l=d(3,s),h=d(3,s),p=d(2,s),m=d(3,n*(a+c)*2,Uint16Array),b=n+1,v=Math.atan2(t-e,r),y=Math.cos(v),g=Math.sin(v),E=a+(f?2:0),M=u?-2:0;M<=E;++M){var x=M/a,_=r*x,A=void 0;M<0?(_=0,x=1,A=t):M>a?(_=r,x=1,A=e):A=t+M/a*(e-t),-2!==M&&M!==a+2||(A=0,x=0),_-=r/2;for(var T=0;T<b;++T){var R=Math.sin(T*Math.PI*2/n),w=Math.cos(T*Math.PI*2/n);l.push(R*A,_,w*A),h.push(M<0||M>a?0:R*y,M<0?-1:M>a?1:g,M<0||M>a?0:w*y),p.push(T/n,1-x)}}for(var P=0;P<a+c;++P)for(var F=0;F<n;++F)m.push(b*(P+0)+0+F,b*(P+0)+1+F,b*(P+1)+1+F),m.push(b*(P+0)+0+F,b*(P+1)+1+F,b*(P+1)+0+F);return{position:l,normal:h,texcoord:p,indices:m}}function R(t,e){e=e||[];for(var r=[],n=0;n<t.length;n+=4){var a=t[n],o=t.slice(n+1,n+4);o.push.apply(o,e);for(var i=0;i<a;++i)r.push.apply(r,o)}return r}function w(){var t=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],e=R([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=R([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=t.length/3,a={position:d(3,n),texcoord:d(2,n),normal:d(3,n),color:d(4,n,Uint8Array),indices:d(3,n/3,Uint16Array)};a.position.push(t),a.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),a.normal.push(e),a.color.push(r);for(var o=0;o<n;++o)a.indices.push(o);return a}function P(t,e,r,n,a,o,i){if(a<=0)throw Error("subdivisionDown must be > 0");o=o||0;var f=2,c=(i=i||1)-o,s=2*(a+1)*(2+f),l=d(3,s),h=d(3,s),p=d(2,s);function m(t,e,r){return t+(e-t)*r}function b(e,r,i,s,d,b){for(var v=0;v<=a;v++){var y=r/(f-1),g=v/a,E=2*(y-.5),M=(o+g*c)*Math.PI,x=Math.sin(M),_=Math.cos(M),A=m(t,e,x),T=E*n,R=_*t,w=x*A;l.push(T,R,w);var P=u.add(u.multiply([0,x,_],i),s);h.push(P),p.push(y*d+b,g)}}for(var v=0;v<f;v++){var y=2*(v/(f-1)-.5);b(e,v,[1,1,1],[0,0,0],1,0),b(e,v,[0,0,0],[y,0,0],0,0),b(r,v,[1,1,1],[0,0,0],1,0),b(r,v,[0,0,0],[y,0,0],0,1)}var g=d(3,2*a*(2+f),Uint16Array);function E(t,e){for(var r=0;r<a;++r)g.push(t+r+0,t+r+1,e+r+0),g.push(t+r+1,e+r+1,e+r+0)}var M=a+1;return E(0*M,4*M),E(5*M,7*M),E(6*M,2*M),E(3*M,1*M),{position:l,normal:h,texcoord:p,indices:g}}function F(t,e,r,n,a,o){return T(t,t,e,r,n,a,o)}function S(t,e,r,n,a,o){if(r<3)throw Error("radialSubdivisions must be 3 or greater");if(n<3)throw Error("verticalSubdivisions must be 3 or greater");a=a||0;for(var i=(o=o||2*Math.PI)-a,u=r+1,f=n+1,c=u*f,s=d(3,c),l=d(3,c),h=d(2,c),p=d(3,r*n*2,Uint16Array),m=0;m<f;++m)for(var b=m/n,v=b*Math.PI*2,y=Math.sin(v),g=t+y*e,E=Math.cos(v),M=E*e,x=0;x<u;++x){var _=x/r,A=a+_*i,T=Math.sin(A),R=Math.cos(A),w=T*g,P=R*g,F=T*y,S=R*y;s.push(w,M,P),l.push(F,E,S),h.push(_,1-b)}for(var O=0;O<n;++O)for(var I=0;I<r;++I){var B=1+I,U=1+O;p.push(u*O+I,u*U+I,u*O+B),p.push(u*U+I,u*U+B,u*O+B)}return{position:s,normal:l,texcoord:h,indices:p}}function O(t,e,r,n,a){if(e<3)throw Error("divisions must be at least 3");r=r||1,a=a||1,n=n||0;for(var o=(e+1)*(r+1),i=d(3,o),u=d(3,o),f=d(2,o),c=d(3,r*e*2,Uint16Array),s=0,l=t-n,h=e+1,p=0;p<=r;++p){for(var m=n+l*Math.pow(p/r,a),b=0;b<=e;++b){var v=2*Math.PI*b/e,y=m*Math.cos(v),g=m*Math.sin(v);if(i.push(y,0,g),u.push(0,1,0),f.push(1-b/e,p/r),p>0&&b!==e){var E=s+(b+1),M=s+b,x=s+b-h,_=s+(b+1)-h;c.push(E,M,x),c.push(E,x,_)}}s+=e+1}return{position:i,normal:u,texcoord:f,indices:c}}function I(t){return function(e){var r=t.apply(this,Array.prototype.slice.call(arguments,1));return n.createBuffersFromArrays(e,r)}}function B(t){return function(e){var r=t.apply(null,Array.prototype.slice.call(arguments,1));return n.createBufferInfoFromArrays(e,r)}}var U=["numComponents","size","type","normalize","stride","offset","attrib","name","attribName"];function C(t,e,r,n){n=n||0;for(var a=t.length,o=0;o<a;++o)e[r+o]=t[o]+n}function D(t,e){var r=c(t),n=new r.constructor(e),o=n;return r.numComponents&&r.numElements&&l(n,r.numComponents),t.data&&(o={data:n},a.copyNamedProperties(U,t,o)),o}var L=B(w);e.create3DFBufferInfo=L;var N=I(w);e.create3DFBuffers=N;var k=B(A);e.createCubeBufferInfo=k;var j=I(A);e.createCubeBuffers=j;var G=B(M);e.createPlaneBufferInfo=G;var X=I(M);e.createPlaneBuffers=X;var z=B(x);e.createSphereBufferInfo=z;var W=I(x);e.createSphereBuffers=W;var q=B(T);e.createTruncatedConeBufferInfo=q;var V=I(T);e.createTruncatedConeBuffers=V;var Y=B(E);e.createXYQuadBufferInfo=Y;var K=I(E);e.createXYQuadBuffers=K;var H=B(P);e.createCresentBufferInfo=H;var Q=I(P);e.createCresentBuffers=Q;var Z=B(F);e.createCylinderBufferInfo=Z;var $=I(F);e.createCylinderBuffers=$;var J=B(S);e.createTorusBufferInfo=J;var tt=I(S);e.createTorusBuffers=tt;var et=B(O);e.createDiscBufferInfo=et;var rt=I(O);e.createDiscBuffers=rt},function(t,e,r){"use strict";e.__esModule=!0;var n={addExtensionsToContext:!0,getContext:!0,getWebGLContext:!0,resizeCanvasToDisplaySize:!0,setDefaults:!0};e.addExtensionsToContext=y,e.getContext=function(t,e){return function(t,e){for(var r=["webgl2","webgl","experimental-webgl"],n=null,a=0;a<r.length;++a)if(n=t.getContext(r[a],e)){p.addExtensionsToContext&&y(n);break}return n}(t,e)},e.getWebGLContext=function(t,e){return function(t,e){for(var r=["webgl","experimental-webgl"],n=null,a=0;a<r.length;++a)if(n=t.getContext(r[a],e)){p.addExtensionsToContext&&y(n);break}return n}(t,e)},e.resizeCanvasToDisplaySize=function(t,e){e=e||1,e=Math.max(0,e);var r=t.clientWidth*e|0,n=t.clientHeight*e|0;if(t.width!==r||t.height!==n)return t.width=r,t.height=n,!0;return!1},e.setDefaults=function(t){i.copyExistingProperties(t,p),a.setAttributeDefaults_(t),o.setTextureDefaults_(t)};var a=h(r(7));Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=a[t]))});var o=h(r(8));Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=o[t]))});var i=h(r(0)),u=h(r(4));Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=u[t]))});var f=r(12);Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=f[t]))});var c=r(13);Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=c[t]))});var s=r(5);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=s[t]))});var l=r(1);Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=l[t]))});var d=r(14);function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}Object.keys(d).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||(e[t]=d[t]))});var p={addExtensionsToContext:!0};var m=/^(.*?)_/;function b(t,e){u.glEnumToString(t,0);var r=t.getExtension(e);if(r){var n={},a=m.exec(e)[1],o="_"+a;for(var f in r){var c=r[f],s="function"==typeof c,l=s?a:o,d=f;f.endsWith(l)&&(d=f.substring(0,f.length-l.length)),void 0!==t[d]?s||t[d]===c||i.warn(d,t[d],c,f):s?t[d]=function(t){return function(){return t.apply(r,arguments)}}(c):(t[d]=c,n[d]=c)}n.constructor={name:r.constructor.name},u.glEnumToString(n,0)}return r}var v=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_color_buffer_float","EXT_color_buffer_half_float","EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2","EXT_frag_depth","EXT_sRGB","EXT_shader_texture_lod","EXT_texture_filter_anisotropic","OES_element_index_uint","OES_standard_derivatives","OES_texture_float","OES_texture_float_linear","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_compressed_texture_atc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_pvrtc","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_depth_texture","WEBGL_draw_buffers"];function y(t){for(var e=0;e<v.length;++e)b(t,v[e])}},function(t,e,r){"use strict";e.__esModule=!0,e.drawBufferInfo=a,e.drawObjectList=function(t,e){var r=null,o=null;e.forEach(function(e){if(!1!==e.active){var i=e.programInfo,u=e.vertexArrayInfo||e.bufferInfo,f=!1,c=void 0===e.type?t.TRIANGLES:e.type;i!==r&&(r=i,t.useProgram(i.program),f=!0),(f||u!==o)&&(o&&o.vertexArrayObject&&!u.vertexArrayObject&&t.bindVertexArray(null),o=u,n.setBuffersAndAttributes(t,i,u)),n.setUniforms(i,e.uniforms),a(t,u,c,e.count,e.offset,e.instanceCount)}}),o.vertexArrayObject&&t.bindVertexArray(null)};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(r(5));function a(t,e,r,n,a,o){r=void 0===r?t.TRIANGLES:r;var i=e.indices,u=e.elementType,f=void 0===n?e.numElements:n;a=void 0===a?0:a,u||i?void 0!==o?t.drawElementsInstanced(r,f,void 0===u?t.UNSIGNED_SHORT:e.elementType,a,o):t.drawElements(r,f,void 0===u?t.UNSIGNED_SHORT:e.elementType,a):void 0!==o?t.drawArraysInstanced(r,a,f,o):t.drawArrays(r,a,f)}},function(t,e,r){"use strict";e.__esModule=!0,e.bindFramebufferInfo=function(t,e,r){r=r||t.FRAMEBUFFER,e?(t.bindFramebuffer(r,e.framebuffer),t.viewport(0,0,e.width,e.height)):(t.bindFramebuffer(r,null),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight))},e.createFramebufferInfo=function(t,e,r,o){var s=t.FRAMEBUFFER,l=t.createFramebuffer();t.bindFramebuffer(s,l),r=r||t.drawingBufferWidth,o=o||t.drawingBufferHeight;var d=0,h={framebuffer:l,attachments:[],width:r,height:o};return(e=e||u).forEach(function(e){var u=e.attachment,l=e.format,p=function(t){return f[t]}(l);if(p||(p=i+d++),!u)if(function(t){return c[t]}(l))u=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,u),t.renderbufferStorage(t.RENDERBUFFER,l,r,o);else{var m=Object.assign({},e);m.width=r,m.height=o,void 0===m.auto&&(m.auto=!1,m.min=m.min||m.minMag||t.LINEAR,m.mag=m.mag||m.minMag||t.LINEAR,m.wrapS=m.wrapS||m.wrap||t.CLAMP_TO_EDGE,m.wrapT=m.wrapT||m.wrap||t.CLAMP_TO_EDGE),u=n.createTexture(t,m)}if(a.isRenderbuffer(t,u))t.framebufferRenderbuffer(s,p,t.RENDERBUFFER,u);else{if(!a.isTexture(t,u))throw"unknown attachment type";t.framebufferTexture2D(s,p,e.texTarget||t.TEXTURE_2D,u,e.level||0)}h.attachments.push(u)}),h},e.resizeFramebufferInfo=function(t,e,r,o,i){o=o||t.drawingBufferWidth,i=i||t.drawingBufferHeight,e.width=o,e.height=i,(r=r||u).forEach(function(r,u){var f=e.attachments[u],c=r.format;if(a.isRenderbuffer(t,f))t.bindRenderbuffer(t.RENDERBUFFER,f),t.renderbufferStorage(t.RENDERBUFFER,c,o,i);else{if(!a.isTexture(t,f))throw"unknown attachment type";n.resizeTexture(t,f,r,o,i)}})};var n=o(r(8)),a=o(r(0));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}var i=36064,u=[{format:6408,type:5121,min:9729,wrap:33071},{format:34041}],f={};f[34041]=33306,f[6401]=36128,f[36168]=36128,f[6402]=36096,f[33189]=36096;var c={};c[32854]=!0,c[32855]=!0,c[36194]=!0,c[34041]=!0,c[33189]=!0,c[6401]=!0,c[36168]=!0},function(t,e,r){"use strict";e.__esModule=!0,e.createVertexArrayInfo=function(t,e,r){var a=t.createVertexArray();t.bindVertexArray(a),e.length||(e=[e]);return e.forEach(function(e){n.setBuffersAndAttributes(t,e,r)}),t.bindVertexArray(null),{numElements:r.numElements,elementType:r.elementType,vertexArrayObject:a}},e.createVAOAndSetAttributes=a,e.createVAOFromBufferInfo=function(t,e,r){return a(t,e.attribSetters||e,r.attribs,r.indices)};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(r(5));function a(t,e,r,a){var o=t.createVertexArray();return t.bindVertexArray(o),n.setAttributes(e,r),a&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a),t.bindVertexArray(null),o}}])})},37:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},38:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Loader=void 0;var n=r(27),a=function(t){return t&&t.__esModule?t:{default:t}}(r(5)),o=r(1);function i(){var t=f(["No texture value for key ",""]);return i=function(){return t},t}function u(){var t=f(["No value for key ",""]);return u=function(){return t},t}function f(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function c(t,e,r,n,a,o,i){try{var u=t[o](i),f=u.value}catch(t){return void r(t)}u.done?e(f):Promise.resolve(f).then(n,a)}function s(t){return function(){var e=this,r=arguments;return new Promise(function(n,a){var o=t.apply(e,r);function i(t){c(o,n,a,i,u,"next",t)}function u(t){c(o,n,a,i,u,"throw",t)}i(void 0)})}}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t){return new Promise(function(e,r){a.default.createTextures(o.gl,t,function(t,r,n){e({errors:t,textures:r,images:n})})})}o.gl;var p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cache=new Map,this.textureCache=new Map,this.programCache=new Map,this.errors={programs:new Map,textures:new Map,paths:new Map},this.loading=null,this.load(e)}return function(t,e,r){e&&d(t.prototype,e),r&&d(t,r)}(t,[{key:"load",value:function(t){var e=this,r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){l(t,e,r[e])})}return t}({basePath:"",raiseOnFailure:!0},t),i=r.basePath,u=r.raiseOnFailure,f=r.paths,c=r.textures,d=r.programs;i=i.replace(/\/+$/,"");var p=new Promise(function(){var t=s(regeneratorRuntime.mark(function t(r,s){var l,p,m,b,v,y,g,E,M,x,_,A,T,R;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!f){t.next=3;break}return t.next=3,e.loadPaths(f,i,u);case 3:if(!c){t.next=12;break}return t.next=6,h(c);case 6:l=t.sent,p=l.errors,m=l.textures,l.images,p&&console.log(p),Object.keys(m).forEach(function(t){e.textureCache.set(t,m[t])});case 12:if(!d){t.next=49;break}b=!0,v=!1,y=void 0,t.prev=16,g=d[Symbol.iterator]();case 18:if(b=(E=g.next()).done){t.next=35;break}if(M=E.value,x=M,_=void 0,n._.isObject(M)&&(x=M.name,_=M.opts),!e.programCache.has(x)){t.next=26;break}return console.log("Warning: attempted to load already loaded program '".concat(x,"'")),t.abrupt("continue",32);case 26:return A=n._.compact([i,x.split(".").join("/")]).join("/"),T="".concat(A,".vert"),R="".concat(A,".frag"),t.next=31,e.loadPaths([T,R],"",u);case 31:e.programCache.set(x,a.default.createProgramInfo(o.gl,[e.get(T),e.get(R)],_));case 32:b=!0,t.next=18;break;case 35:t.next=41;break;case 37:t.prev=37,t.t0=t.catch(16),v=!0,y=t.t0;case 41:t.prev=41,t.prev=42,b||null==g.return||g.return();case 44:if(t.prev=44,!v){t.next=47;break}throw y;case 47:return t.finish(44);case 48:return t.finish(41);case 49:r(e);case 50:case"end":return t.stop()}},t,this,[[16,37,41,49],[42,,44,48]])}));return function(e,r){return t.apply(this,arguments)}}());return this.loading=this.loading?this.loading.then(function(t){return p}):p,this.loading}},{key:"get",value:function(t){var e=this.cache.get(t);return void 0===e&&raise(u(),t),e}},{key:"getTexture",value:function(t){var e=this.textureCache.get(t);return void 0===e&&raise(i(),path),e}},{key:"getProgram",value:function(t){return this.programCache.get(t)}},{key:"loadPaths",value:function(){var t=s(regeneratorRuntime.mark(function t(e,r){var n,a,o,i,u,f,c,s,l=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=!(l.length>2&&void 0!==l[2])||l[2],a=!0,o=!1,i=void 0,t.prev=4,u=e[Symbol.iterator]();case 6:if(a=(f=u.next()).done){t.next=18;break}if(c=f.value,!this.cache.has(r+c)){t.next=11;break}return console.log("Warning: attempted to load already loaded path '".concat(r+c,"'")),t.abrupt("continue",15);case 11:return t.next=13,this.fetch(r+c,n);case 13:(s=t.sent)&&this.cache.set(r+c,s);case 15:a=!0,t.next=6;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(4),o=!0,i=t.t0;case 24:t.prev=24,t.prev=25,a||null==u.return||u.return();case 27:if(t.prev=27,!o){t.next=30;break}throw i;case 30:return t.finish(27);case 31:return t.finish(24);case 32:case"end":return t.stop()}},t,this,[[4,20,24,32],[25,,27,31]])}));return function(e,r){return t.apply(this,arguments)}}()},{key:"fetch",value:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){var t=s(regeneratorRuntime.mark(function t(e){var r,n,a=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=!(a.length>1&&void 0!==a[1])||a[1],t.next=3,fetch(e);case 3:if(!(n=t.sent).ok){t.next=10;break}return t.next=7,n.text();case 7:return t.abrupt("return",t.sent);case 10:if(!r){t.next=14;break}throw"failed to fetch resource '".concat(e,"'; got status ").concat(n.status," '").concat(n.statusText,"'");case 14:return this.errors.paths.set(e,n.statusText),t.abrupt("return",!1);case 16:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}]),t}();e.Loader=p},39:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initCanvas=e.App=e.default=void 0;var n=r(38),a=r(26),o=r(2),i=r(1),u=r(15);r(35);var f=r(17),c=r(18),s=r(29);function l(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e){console.log("gl."+t+"("+WebGLDebugUtils.glFunctionArgsToString(t,e)+")")}e.initCanvas=function(t,e){if(!t)throw new Error("argument containerId, id of containing element required");var r=document.getElementById(t),n=document.createElement("canvas");return e&&n.classList.add(e),r.appendChild(n),n};var m=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clearColor=e.clearColor||[.4,.4,.4,1],this.resolution=e.resolution||{width:352,height:224},this.pixelMultiplier=e.pixelMultiplier||2,this.debug=e.debug,"string"==typeof e.el?this.canvas=document.getElementById(e.el):this.canvas=e.el,this.gl=this.canvas.getContext("webgl2"),this.debug&&(WebGLDebugUtils.init(this.gl),this.gl=WebGLDebugUtils.makeDebugContext(this.gl,void 0,p)),(0,i.registerContext)(this.gl),i.gl.blendFunc(i.gl.SRC_ALPHA,i.gl.ONE_MINUS_SRC_ALPHA),i.gl.enable(i.gl.BLEND),this.framebuffer=(0,u.attachFramebuffer)(i.gl,this.resolution.width,this.resolution.height),this.framebufferRenderer=new c.SpriteRenderer({game:this,textureInfo:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){d(t,e,r[e])})}return t}({texture:this.framebuffer.texture},this.resolution)}),this.loader=new n.Loader,this.projection=o.mat4.ortho(o.mat4.create(),0,this.resolution.width,0,this.resolution.height,-1,1),this.camera=new s.Camera(this.resolution),this.cameraEnabled=!0,this.updateCanvasSize(),this.adjustViewport()}return function(t,e,r){e&&h(t.prototype,e),r&&h(t,r)}(t,[{key:"updateCanvasSize",value:function(){var t=this.resolution.width*this.pixelMultiplier,e=this.resolution.height*this.pixelMultiplier;this.canvas.style.width="".concat(t,"px"),this.canvas.style.height="".concat(e,"px"),this.canvas.width=t*(window.devicePixelRatio||1),this.canvas.height=e*(window.devicePixelRatio||1)}},{key:"adjustViewport",value:function(){var t=this.canvas.width,e=this.canvas.height;this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this._canvasToWorld=a.CoordinateConversions.canvasToWorldMatrix(this.camera.matrix,{width:t,height:e},this.resolution)}},{key:"clear",value:function(){var t;(t=this.gl).clearColor.apply(t,l(this.clearColor)),this.gl.clear(this.gl.COLOR_BUFFER_BIT)}},{key:"load",value:function(t){return this.loader.load(t)}},{key:"getProgram",value:function(t){var e=this.loader.getProgram(t);if(!e)throw"No program loaded for key '".concat(t,"'");return e}},{key:"enableCamera",value:function(){this.cameraEnabled=!0}},{key:"disableCamera",value:function(){this.cameraEnabled=!1}},{key:"beginRenderToTexture",value:function(){this.framebuffer.attach(),this.clear()}},{key:"endRenderToTexture",value:function(){this.framebuffer.detach(),this.adjustViewport()}},{key:"start",value:function(){var t,e=this;this.running||(requestAnimationFrame(function r(n){t||(t=n);var a=n-t;t=n,e.stage&&(e.stage.prerender(a),e.beginRenderToTexture(),e.stage.render(a),e.stage.postrender(a),e.endRenderToTexture(),e.clear(),e.framebufferRenderer.render([new f.Sprite({position:[0,0],size:[e.resolution.width,e.resolution.height]})],e.projection)),e.running&&requestAnimationFrame(r)}),this.running=!0)}},{key:"setStage",value:function(t){this.stage=t,t.app=this,t.init(this)}},{key:"canvasToWorld",get:function(){return this._canvasToWorld}},{key:"viewMatrix",get:function(){var t=o.mat4.create();return this.cameraEnabled&&(t=this.camera.matrix),o.mat4.multiply(o.mat4.create(),this.projection,t)}}]),t}();e.App=m;var b=m;e.default=b},5:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.twgl=e.default=void 0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(e,r,n):e[r]=t[r]}return e.default=t,e}(r(36));e.twgl=n;var a=n;e.default=a}});
//# sourceMappingURL=tilemap_texture.bundle.js.map